<charting:UltraChartCustomAnnotation
    x:Class="fx.Charting.UltrachartBuymakerAnnotation"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:charting="clr-namespace:fx.Charting"
    xmlns:cnvt="clr-namespace:StockSharp.Xaml.Converters;assembly=StockSharp.Xaml"
    xmlns:s="http://schemas.abtsoftware.co.uk/scichart"
    s:AnchorPointAnnotation.HorizontalAnchorPoint="Center"
    s:AnchorPointAnnotation.VerticalAnchorPoint="Top"
    FrameworkElement.DataContext="{Binding RelativeSource={RelativeSource Self}}"
    FrameworkElement.Margin="0">

    <FrameworkElement.Resources>
        <cnvt:ColoredIconConverter x:Key="ColoredIcon" />
    </FrameworkElement.Resources>

    <Image
        Width="{Binding Element.XAxis.DataPointWidth}"
        MinWidth="14"
        MaxWidth="40"
        Stretch="Uniform">
        <Image.Source>
            <MultiBinding Converter="{StaticResource ColoredIcon}" ConverterParameter="Up">
                <Binding Path="Background" />
                <Binding Path="Foreground" />
            </MultiBinding>
        </Image.Source>
    </Image>

    <ToolTipService.ToolTip>
        <ToolTip>
            <TextBlock Margin="6" Text="{Binding Text, Mode=OneWay}" />
        </ToolTip>
    </ToolTipService.ToolTip>

</charting:UltraChartCustomAnnotation>