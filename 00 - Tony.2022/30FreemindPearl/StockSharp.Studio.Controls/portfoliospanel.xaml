<controls:BaseStudioControl x:Class="StockSharp.Studio.Controls.PortfoliosPanel"
                            xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
                            xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
                            xmlns:loc="clr-namespace:StockSharp.Localization;assembly=StockSharp.Localization"
                            xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
                            xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
                            xmlns:controls="clr-namespace:StockSharp.Studio.Controls"
                            xmlns:alerts="clr-namespace:StockSharp.Alerts;assembly=StockSharp.Alerts"
                            xmlns:messages="clr-namespace:StockSharp.Messages;assembly=StockSharp.Messages"
                            xmlns:converters="clr-namespace:Ecng.Xaml.Converters;assembly=StockSharp.Xaml"
                            xmlns:sx="http://schemas.stocksharp.com/xaml"
                            xmlns:dxb="http://schemas.devexpress.com/winfx/2008/xaml/bars"
                            xmlns:dxg="http://schemas.devexpress.com/winfx/2008/xaml/grid"
                            DataContext="{Binding RelativeSource={RelativeSource Self}}">
  <UIElement.CommandBindings>
    <CommandBinding Executed="ClosePositionCommand_Executed" CanExecute="ClosePositionCommand_CanExecute"
                    Command="{x:Static controls:PortfoliosPanel.ClosePositionCommand}"/>
    <CommandBinding Executed="RevertPositionCommand_Executed" CanExecute="RevertPositionCommand_CanExecute"
                    Command="{x:Static controls:PortfoliosPanel.RevertPositionCommand}"/>
    <CommandBinding Executed="WithdrawCommand_Executed" CanExecute="WithdrawCommand_CanExecute"
                    Command="{x:Static controls:PortfoliosPanel.WithdrawCommand}"/>
  </UIElement.CommandBindings>
  <FrameworkElement.Resources>
    <converters:BoolToVisibilityConverter x:Key="BoolToVisibilityConverter"/>
  </FrameworkElement.Resources>
  <Grid>
    <Grid.RowDefinitions>
      <RowDefinition Height="Auto"/>
      <RowDefinition Height="*"/>
    </Grid.RowDefinitions>
    <dxb:BarManager x:Name="BarManager" Grid.Row="0"
                    Visibility="{Binding ShowToolBar, Converter={StaticResource BoolToVisibilityConverter}}">
      <dxb:BarManager.Bars>
        <dxb:Bar Caption="{x:Static loc:LocalizedStrings.Main}">
          <dxb:BarSplitButtonItem ActAsDropDown="True" ToolTip="{x:Static loc:LocalizedStrings.XamlStr673}"
                                  Glyph="{sx:ThemedIcons Key=Add}">
            <dxb:BarSplitButtonItem.PopupControl>
              <dxb:PopupMenu>
                <dxb:BarButtonItem ItemClick="CreatePortfolio_OnClick" Content="{x:Static loc:LocalizedStrings.XamlStr676}"/>
                <dxb:BarButtonItem ItemClick="CreatePosition_OnClick" Content="{x:Static loc:LocalizedStrings.XamlStr674}"/>
              </dxb:PopupMenu>
            </dxb:BarSplitButtonItem.PopupControl>
          </dxb:BarSplitButtonItem>
          <alerts:AlertButton x:Name="AlertBtn" MessageType="{x:Type messages:PositionChangeMessage}"/>
        </dxb:Bar>
      </dxb:BarManager.Bars>
    </dxb:BarManager>
    <sx:PortfolioGrid x:Name="PortfolioGrid" Grid.Row="1">
      <dxg:GridControl.View>
        <dxg:TableView AllowEditing="False" ShowGroupPanel="False" NavigationStyle="Row" ShowIndicator="False"/>
      </dxg:GridControl.View>
    </sx:PortfolioGrid>
  </Grid>
</controls:BaseStudioControl>