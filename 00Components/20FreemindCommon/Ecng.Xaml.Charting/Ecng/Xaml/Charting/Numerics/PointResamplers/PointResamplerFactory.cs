// Decompiled with JetBrains decompiler
// Type: fx.Xaml.Charting.Numerics.PointResamplers.PointResamplerFactory
// Assembly: fx.Xaml.Charting, Version=1.0.0.0, Culture=neutral, PublicKeyToken=b10e79ed0227b515
// MVID: 5D7395C1-836A-4A9B-B006-2FBF7EC25A8F
// Assembly location: T:\00 - Programming\StockSharp\References\fx.Xaml.Charting.dll

using System;
using System.Collections;
using System.Collections.Generic;
namespace fx.Xaml.Charting
{
    public class PointResamplerFactory : IPointResamplerFactory
    {
        private static readonly Dictionary<Type, Dictionary<Type, IPointResampler>> _resamplers = new Dictionary<Type, Dictionary<Type, IPointResampler>>();

        static PointResamplerFactory()
        {
            Dictionary<Type, IPointResampler> dictionary1 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( double ), dictionary1 );
            dictionary1.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.DoubleDoubleResampler() );
            dictionary1.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.DoubleSingleResampler() );
            dictionary1.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.DoubleInt32Resampler() );
            dictionary1.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.DoubleUInt32Resampler() );
            dictionary1.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.DoubleInt64Resampler() );
            dictionary1.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.DoubleUInt64Resampler() );
            dictionary1.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.DoubleInt16Resampler() );
            dictionary1.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.DoubleUInt16Resampler() );
            dictionary1.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.DoubleByteResampler() );
            dictionary1.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.DoubleSByteResampler() );
            Dictionary<Type, IPointResampler> dictionary2 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( float ), dictionary2 );
            dictionary2.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.SingleDoubleResampler() );
            dictionary2.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.SingleSingleResampler() );
            dictionary2.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.SingleInt32Resampler() );
            dictionary2.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.SingleUInt32Resampler() );
            dictionary2.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.SingleInt64Resampler() );
            dictionary2.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.SingleUInt64Resampler() );
            dictionary2.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.SingleInt16Resampler() );
            dictionary2.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.SingleUInt16Resampler() );
            dictionary2.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.SingleByteResampler() );
            dictionary2.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.SingleSByteResampler() );
            Dictionary<Type, IPointResampler> dictionary3 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( int ), dictionary3 );
            dictionary3.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.Int32DoubleResampler() );
            dictionary3.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.Int32SingleResampler() );
            dictionary3.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.Int32Int32Resampler() );
            dictionary3.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.Int32UInt32Resampler() );
            dictionary3.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.Int32Int64Resampler() );
            dictionary3.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.Int32UInt64Resampler() );
            dictionary3.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.Int32Int16Resampler() );
            dictionary3.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.Int32UInt16Resampler() );
            dictionary3.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.Int32ByteResampler() );
            dictionary3.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.Int32SByteResampler() );
            Dictionary<Type, IPointResampler> dictionary4 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( uint ), dictionary4 );
            dictionary4.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.UInt32DoubleResampler() );
            dictionary4.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.UInt32SingleResampler() );
            dictionary4.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.UInt32Int32Resampler() );
            dictionary4.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.UInt32UInt32Resampler() );
            dictionary4.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.UInt32Int64Resampler() );
            dictionary4.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.UInt32UInt64Resampler() );
            dictionary4.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.UInt32Int16Resampler() );
            dictionary4.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.UInt32UInt16Resampler() );
            dictionary4.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.UInt32ByteResampler() );
            dictionary4.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.UInt32SByteResampler() );
            Dictionary<Type, IPointResampler> dictionary5 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( long ), dictionary5 );
            dictionary5.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.Int64DoubleResampler() );
            dictionary5.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.Int64SingleResampler() );
            dictionary5.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.Int64Int32Resampler() );
            dictionary5.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.Int64UInt32Resampler() );
            dictionary5.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.Int64Int64Resampler() );
            dictionary5.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.Int64UInt64Resampler() );
            dictionary5.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.Int64Int16Resampler() );
            dictionary5.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.Int64UInt16Resampler() );
            dictionary5.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.Int64ByteResampler() );
            dictionary5.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.Int64SByteResampler() );
            Dictionary<Type, IPointResampler> dictionary6 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( ulong ), dictionary6 );
            dictionary6.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.UInt64DoubleResampler() );
            dictionary6.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.UInt64SingleResampler() );
            dictionary6.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.UInt64Int32Resampler() );
            dictionary6.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.UInt64UInt32Resampler() );
            dictionary6.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.UInt64Int64Resampler() );
            dictionary6.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.UInt64UInt64Resampler() );
            dictionary6.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.UInt64Int16Resampler() );
            dictionary6.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.UInt64UInt16Resampler() );
            dictionary6.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.UInt64ByteResampler() );
            dictionary6.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.UInt64SByteResampler() );
            Dictionary<Type, IPointResampler> dictionary7 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( short ), dictionary7 );
            dictionary7.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.Int16DoubleResampler() );
            dictionary7.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.Int16SingleResampler() );
            dictionary7.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.Int16Int32Resampler() );
            dictionary7.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.Int16UInt32Resampler() );
            dictionary7.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.Int16Int64Resampler() );
            dictionary7.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.Int16UInt64Resampler() );
            dictionary7.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.Int16Int16Resampler() );
            dictionary7.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.Int16UInt16Resampler() );
            dictionary7.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.Int16ByteResampler() );
            dictionary7.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.Int16SByteResampler() );
            Dictionary<Type, IPointResampler> dictionary8 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( ushort ), dictionary8 );
            dictionary8.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.UInt16DoubleResampler() );
            dictionary8.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.UInt16SingleResampler() );
            dictionary8.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.UInt16Int32Resampler() );
            dictionary8.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.UInt16UInt32Resampler() );
            dictionary8.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.UInt16Int64Resampler() );
            dictionary8.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.UInt16UInt64Resampler() );
            dictionary8.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.UInt16Int16Resampler() );
            dictionary8.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.UInt16UInt16Resampler() );
            dictionary8.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.UInt16ByteResampler() );
            dictionary8.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.UInt16SByteResampler() );
            Dictionary<Type, IPointResampler> dictionary9 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( byte ), dictionary9 );
            dictionary9.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.ByteDoubleResampler() );
            dictionary9.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.ByteSingleResampler() );
            dictionary9.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.ByteInt32Resampler() );
            dictionary9.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.ByteUInt32Resampler() );
            dictionary9.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.ByteInt64Resampler() );
            dictionary9.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.ByteUInt64Resampler() );
            dictionary9.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.ByteInt16Resampler() );
            dictionary9.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.ByteUInt16Resampler() );
            dictionary9.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.ByteByteResampler() );
            dictionary9.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.ByteSByteResampler() );
            Dictionary<Type, IPointResampler> dictionary10 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( sbyte ), dictionary10 );
            dictionary10.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.SByteDoubleResampler() );
            dictionary10.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.SByteSingleResampler() );
            dictionary10.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.SByteInt32Resampler() );
            dictionary10.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.SByteUInt32Resampler() );
            dictionary10.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.SByteInt64Resampler() );
            dictionary10.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.SByteUInt64Resampler() );
            dictionary10.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.SByteInt16Resampler() );
            dictionary10.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.SByteUInt16Resampler() );
            dictionary10.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.SByteByteResampler() );
            dictionary10.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.SByteSByteResampler() );
            Dictionary<Type, IPointResampler> dictionary11 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( DateTime ), dictionary11 );
            dictionary11.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.DateTimeDoubleResampler() );
            dictionary11.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.DateTimeSingleResampler() );
            dictionary11.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.DateTimeInt32Resampler() );
            dictionary11.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.DateTimeUInt32Resampler() );
            dictionary11.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.DateTimeInt64Resampler() );
            dictionary11.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.DateTimeUInt64Resampler() );
            dictionary11.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.DateTimeInt16Resampler() );
            dictionary11.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.DateTimeUInt16Resampler() );
            dictionary11.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.DateTimeByteResampler() );
            dictionary11.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.DateTimeSByteResampler() );
            Dictionary<Type, IPointResampler> dictionary12 = new Dictionary<Type, IPointResampler>();
            PointResamplerFactory._resamplers.Add( typeof( TimeSpan ), dictionary12 );
            dictionary12.Add( typeof( double ), ( IPointResampler ) new PointResamplerFactory.TimeSpanDoubleResampler() );
            dictionary12.Add( typeof( float ), ( IPointResampler ) new PointResamplerFactory.TimeSpanSingleResampler() );
            dictionary12.Add( typeof( int ), ( IPointResampler ) new PointResamplerFactory.TimeSpanInt32Resampler() );
            dictionary12.Add( typeof( uint ), ( IPointResampler ) new PointResamplerFactory.TimeSpanUInt32Resampler() );
            dictionary12.Add( typeof( long ), ( IPointResampler ) new PointResamplerFactory.TimeSpanInt64Resampler() );
            dictionary12.Add( typeof( ulong ), ( IPointResampler ) new PointResamplerFactory.TimeSpanUInt64Resampler() );
            dictionary12.Add( typeof( short ), ( IPointResampler ) new PointResamplerFactory.TimeSpanInt16Resampler() );
            dictionary12.Add( typeof( ushort ), ( IPointResampler ) new PointResamplerFactory.TimeSpanUInt16Resampler() );
            dictionary12.Add( typeof( byte ), ( IPointResampler ) new PointResamplerFactory.TimeSpanByteResampler() );
            dictionary12.Add( typeof( sbyte ), ( IPointResampler ) new PointResamplerFactory.TimeSpanSByteResampler() );
        }

        public IPointResampler GetPointResampler<TX, TY>() where TX : IComparable where TY : IComparable
        {
            Type index1 = typeof (TY);
            Type index2 = typeof (TX);
            try
            {
                return PointResamplerFactory._resamplers[ index2 ][ index1 ];
            }
            catch ( Exception ex )
            {
                throw new InvalidOperationException( string.Format( "No resampler exists for the combination of TX={0} and TY={1}. Please contact support", ( object ) index2, ( object ) index1 ) );
            }
        }

        private class DoubleDoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<double> doubleList = xValues as IList<double>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<double, double>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, double>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<double, double>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, double>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<double> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<double> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<double>(false) : (UncheckedList<double>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( double* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        double* numPtr3 = numPtr1;
                        double* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DoubleDoubleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleDoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DoubleDoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DoubleDoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<double> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<double> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<double> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<double> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                double[] uncheckedList1 = xDoubleColumn.ToUncheckedList<double>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( double* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    double* numPtr5 = numPtr1;
                    double* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            double* numPtr10 = (double*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            double* numPtr14 = (double*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr16 = (double*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            double* numPtr20 = (double*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr22 = (double*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            double* numPtr26 = (double*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr28 = (double*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            double* numPtr32 = (double*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr34 = (double*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            double* numPtr38 = (double*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr40 = (double*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            double* numPtr44 = (double*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr46 = (double*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            double* numPtr50 = (double*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr52 = (double*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            double* numPtr54 = (double*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            double* numPtr56 = (double*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            double* numPtr58 = (double*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            double* numPtr60 = (double*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            double* numPtr62 = (double*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            double* numPtr64 = (double*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            double* numPtr66 = (double*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            double* numPtr68 = (double*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleDoubleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( double xValue )
            {
                return xValue;
            }
        }

        private class DoubleSingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<double> doubleList = xValues as IList<double>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<double, float>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, double>( doubleList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<double, float>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, float>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<double> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<double> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<double>(false) : (UncheckedList<double>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( double* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        double* numPtr3 = numPtr1;
                        float* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr4;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DoubleSingleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleSingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DoubleSingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DoubleSingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<double> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<double> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<double> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<double> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                double[] uncheckedList1 = xDoubleColumn.ToUncheckedList<double>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( double* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    double* numPtr5 = numPtr1;
                    float* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            double* numPtr10 = (double*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            double* numPtr14 = (double*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr16 = (float*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            float* numPtr20 = (float*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr22 = (double*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            double* numPtr26 = (double*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr28 = (float*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            float* numPtr32 = (float*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr34 = (double*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            double* numPtr38 = (double*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr40 = (float*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            float* numPtr44 = (float*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr46 = (double*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            double* numPtr50 = (double*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr52 = (float*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            double* numPtr54 = (double*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            float* numPtr56 = (float*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            double* numPtr58 = (double*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            float* numPtr60 = (float*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            double* numPtr62 = (double*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            float* numPtr64 = (float*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            double* numPtr66 = (double*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            float* numPtr68 = (float*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( float* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleSingleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( double xValue )
            {
                return xValue;
            }
        }

        private class DoubleInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<double> doubleList = xValues as IList<double>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<double, int>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, double>( doubleList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<double, int>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, int>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<double> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<double> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<double>(false) : (UncheckedList<double>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( double* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        double* numPtr3 = numPtr1;
                        int* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DoubleInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DoubleInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DoubleInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<double> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<double> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<double> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<double> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                double[] uncheckedList1 = xDoubleColumn.ToUncheckedList<double>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( double* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    double* numPtr5 = numPtr1;
                    int* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            double* numPtr10 = (double*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            double* numPtr14 = (double*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr16 = (int*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            int* numPtr20 = (int*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr22 = (double*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            double* numPtr26 = (double*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr28 = (int*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            int* numPtr32 = (int*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr34 = (double*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            double* numPtr38 = (double*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr40 = (int*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            int* numPtr44 = (int*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr46 = (double*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            double* numPtr50 = (double*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr52 = (int*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            double* numPtr54 = (double*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            int* numPtr56 = (int*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            double* numPtr58 = (double*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            int* numPtr60 = (int*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            double* numPtr62 = (double*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            int* numPtr64 = (int*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            double* numPtr66 = (double*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            int* numPtr68 = (int*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( int* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( double xValue )
            {
                return xValue;
            }
        }

        private class DoubleUInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<double> doubleList = xValues as IList<double>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<double, uint>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, double>( doubleList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<double, uint>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, uint>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<double> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<double> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<double>(false) : (UncheckedList<double>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( double* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        double* numPtr3 = numPtr1;
                        uint* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DoubleUInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DoubleUInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<double> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<double> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<double> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<double> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                double[] uncheckedList1 = xDoubleColumn.ToUncheckedList<double>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( double* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    double* numPtr5 = numPtr1;
                    uint* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            double* numPtr10 = (double*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            double* numPtr14 = (double*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr16 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            uint* numPtr20 = (uint*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr22 = (double*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            double* numPtr26 = (double*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr28 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            uint* numPtr32 = (uint*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr34 = (double*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            double* numPtr38 = (double*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr40 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            uint* numPtr44 = (uint*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr46 = (double*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            double* numPtr50 = (double*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr52 = (uint*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            double* numPtr54 = (double*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            uint* numPtr56 = (uint*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            double* numPtr58 = (double*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            uint* numPtr60 = (uint*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            double* numPtr62 = (double*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            uint* numPtr64 = (uint*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            double* numPtr66 = (double*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            uint* numPtr68 = (uint*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( uint* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleUInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( double xValue )
            {
                return xValue;
            }
        }

        private class DoubleInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<double> doubleList = xValues as IList<double>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<double, long>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, double>( doubleList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<double, long>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, long>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<double> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<double> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<double>(false) : (UncheckedList<double>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( double* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        double* numPtr3 = numPtr1;
                        long* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DoubleInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DoubleInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DoubleInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<double> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<double> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<double> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<double> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                double[] uncheckedList1 = xDoubleColumn.ToUncheckedList<double>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( double* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    double* numPtr5 = numPtr1;
                    long* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            double* numPtr10 = (double*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            double* numPtr14 = (double*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr16 = (long*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            long* numPtr20 = (long*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr22 = (double*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            double* numPtr26 = (double*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr28 = (long*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            long* numPtr32 = (long*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr34 = (double*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            double* numPtr38 = (double*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr40 = (long*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            long* numPtr44 = (long*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr46 = (double*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            double* numPtr50 = (double*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr52 = (long*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            double* numPtr54 = (double*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            long* numPtr56 = (long*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            double* numPtr58 = (double*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            long* numPtr60 = (long*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            double* numPtr62 = (double*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            long* numPtr64 = (long*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            double* numPtr66 = (double*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            long* numPtr68 = (long*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( long* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( double xValue )
            {
                return xValue;
            }
        }

        private class DoubleUInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<double> doubleList = xValues as IList<double>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<double, ulong>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, double>( doubleList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<double, ulong>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, ulong>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<double> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<double> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<double>(false) : (UncheckedList<double>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( double* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        double* numPtr3 = numPtr1;
                        ulong* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DoubleUInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DoubleUInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<double> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<double> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<double> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<double> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                double[] uncheckedList1 = xDoubleColumn.ToUncheckedList<double>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( double* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    double* numPtr5 = numPtr1;
                    ulong* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            double* numPtr10 = (double*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            double* numPtr14 = (double*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr16 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ulong* numPtr20 = (ulong*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr22 = (double*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            double* numPtr26 = (double*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr28 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ulong* numPtr32 = (ulong*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr34 = (double*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            double* numPtr38 = (double*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr40 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ulong* numPtr44 = (ulong*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr46 = (double*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            double* numPtr50 = (double*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr52 = (ulong*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            double* numPtr54 = (double*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ulong* numPtr56 = (ulong*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            double* numPtr58 = (double*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ulong* numPtr60 = (ulong*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            double* numPtr62 = (double*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ulong* numPtr64 = (ulong*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            double* numPtr66 = (double*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ulong* numPtr68 = (ulong*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ulong* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleUInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( double xValue )
            {
                return xValue;
            }
        }

        private class DoubleInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<double> doubleList = xValues as IList<double>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<double, short>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, double>( doubleList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<double, short>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, short>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<double> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<double> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<double>(false) : (UncheckedList<double>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( double* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        double* numPtr3 = numPtr1;
                        short* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DoubleInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DoubleInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DoubleInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<double> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<double> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<double> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<double> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                double[] uncheckedList1 = xDoubleColumn.ToUncheckedList<double>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( double* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    double* numPtr5 = numPtr1;
                    short* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            double* numPtr10 = (double*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            double* numPtr14 = (double*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr16 = (short*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            short* numPtr20 = (short*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr22 = (double*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            double* numPtr26 = (double*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr28 = (short*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            short* numPtr32 = (short*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr34 = (double*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            double* numPtr38 = (double*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr40 = (short*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            short* numPtr44 = (short*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr46 = (double*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            double* numPtr50 = (double*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr52 = (short*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            double* numPtr54 = (double*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            short* numPtr56 = (short*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            double* numPtr58 = (double*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            short* numPtr60 = (short*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            double* numPtr62 = (double*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            short* numPtr64 = (short*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            double* numPtr66 = (double*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            short* numPtr68 = (short*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( short* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( double xValue )
            {
                return xValue;
            }
        }

        private class DoubleUInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<double> doubleList = xValues as IList<double>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<double, ushort>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, double>( doubleList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<double, ushort>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, ushort>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<double> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<double> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<double>(false) : (UncheckedList<double>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( double* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        double* numPtr3 = numPtr1;
                        ushort* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DoubleUInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DoubleUInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<double> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<double> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<double> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<double> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                double[] uncheckedList1 = xDoubleColumn.ToUncheckedList<double>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( double* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    double* numPtr5 = numPtr1;
                    ushort* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            double* numPtr10 = (double*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            double* numPtr14 = (double*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr16 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ushort* numPtr20 = (ushort*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr22 = (double*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            double* numPtr26 = (double*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr28 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ushort* numPtr32 = (ushort*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr34 = (double*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            double* numPtr38 = (double*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr40 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ushort* numPtr44 = (ushort*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr46 = (double*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            double* numPtr50 = (double*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr52 = (ushort*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            double* numPtr54 = (double*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ushort* numPtr56 = (ushort*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            double* numPtr58 = (double*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ushort* numPtr60 = (ushort*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            double* numPtr62 = (double*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ushort* numPtr64 = (ushort*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            double* numPtr66 = (double*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ushort* numPtr68 = (ushort*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ushort* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleUInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( double xValue )
            {
                return xValue;
            }
        }

        private class DoubleByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<double> doubleList = xValues as IList<double>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<double, byte>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, double>( doubleList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<double, byte>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, byte>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<double> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<double> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<double>(false) : (UncheckedList<double>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( double* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        double* numPtr3 = numPtr1;
                        byte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DoubleByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DoubleByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DoubleByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<double> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<double> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<double> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<double> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                double[] uncheckedList1 = xDoubleColumn.ToUncheckedList<double>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( double* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    double* numPtr5 = numPtr1;
                    byte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            double* numPtr10 = (double*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            double* numPtr14 = (double*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            byte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr22 = (double*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            byte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            double* numPtr26 = (double*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            byte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr34 = (double*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            byte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            double* numPtr38 = (double*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            byte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr46 = (double*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            byte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            double* numPtr50 = (double*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            double* numPtr54 = (double*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            byte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            double* numPtr58 = (double*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            byte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            double* numPtr62 = (double*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            byte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            double* numPtr66 = (double*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            byte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( double xValue )
            {
                return xValue;
            }
        }

        private class DoubleSByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<double> doubleList = xValues as IList<double>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<double, sbyte>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, double>( doubleList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<double, sbyte>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<double, sbyte>( doubleList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( doubleList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<double> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<double> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<double>(false) : (UncheckedList<double>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( double* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        double* numPtr3 = numPtr1;
                        sbyte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DoubleSByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleSByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DoubleSByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DoubleSByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<double> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<double> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<double> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DoubleSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<double> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                double[] uncheckedList1 = xDoubleColumn.ToUncheckedList<double>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( double* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    double* numPtr5 = numPtr1;
                    sbyte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            double* numPtr10 = (double*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            double* numPtr14 = (double*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            sbyte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr22 = (double*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            sbyte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            double* numPtr26 = (double*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            sbyte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr34 = (double*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            sbyte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            double* numPtr38 = (double*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            sbyte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr46 = (double*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            sbyte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            double* numPtr50 = (double*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            double* numPtr54 = (double*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            sbyte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            double* numPtr58 = (double*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            sbyte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            double* numPtr62 = (double*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            sbyte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            double* numPtr66 = (double*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            sbyte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DoubleSByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( double xValue )
            {
                return xValue;
            }
        }

        private class SingleDoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<float> floatList = xValues as IList<float>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( floatList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<float, double>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, double>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<float, double>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, double>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( floatList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<float> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<float> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<float>(false) : (UncheckedList<float>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( float* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        float* numPtr3 = numPtr1;
                        double* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SingleDoubleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SingleDoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SingleDoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SingleDoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<float> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<float> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<float> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<float> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                float[] uncheckedList1 = xDoubleColumn.ToUncheckedList<float>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( float* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    float* numPtr5 = numPtr1;
                    double* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            float* numPtr10 = (float*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            float* numPtr14 = (float*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr16 = (double*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            double* numPtr20 = (double*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr22 = (float*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            float* numPtr26 = (float*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr28 = (double*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            double* numPtr32 = (double*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr34 = (float*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            float* numPtr38 = (float*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr40 = (double*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            double* numPtr44 = (double*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr46 = (float*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            float* numPtr50 = (float*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr52 = (double*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            float* numPtr54 = (float*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            double* numPtr56 = (double*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            float* numPtr58 = (float*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            double* numPtr60 = (double*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            float* numPtr62 = (float*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            double* numPtr64 = (double*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            float* numPtr66 = (float*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            double* numPtr68 = (double*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( float* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleDoubleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( float xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SingleSingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<float> floatList = xValues as IList<float>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( floatList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<float, float>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, double>( floatList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<float, float>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, float>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( floatList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<float> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<float> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<float>(false) : (UncheckedList<float>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( float* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        float* numPtr3 = numPtr1;
                        float* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr4;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SingleSingleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SingleSingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SingleSingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SingleSingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<float> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<float> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<float> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<float> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                float[] uncheckedList1 = xDoubleColumn.ToUncheckedList<float>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( float* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    float* numPtr5 = numPtr1;
                    float* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            float* numPtr10 = (float*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            float* numPtr14 = (float*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr16 = (float*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            float* numPtr20 = (float*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr22 = (float*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            float* numPtr26 = (float*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr28 = (float*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            float* numPtr32 = (float*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr34 = (float*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            float* numPtr38 = (float*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr40 = (float*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            float* numPtr44 = (float*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr46 = (float*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            float* numPtr50 = (float*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr52 = (float*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            float* numPtr54 = (float*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            float* numPtr56 = (float*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            float* numPtr58 = (float*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            float* numPtr60 = (float*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            float* numPtr62 = (float*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            float* numPtr64 = (float*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            float* numPtr66 = (float*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            float* numPtr68 = (float*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( float* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( float* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleSingleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( float xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SingleInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<float> floatList = xValues as IList<float>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( floatList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<float, int>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, double>( floatList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<float, int>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, int>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( floatList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<float> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<float> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<float>(false) : (UncheckedList<float>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( float* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        float* numPtr3 = numPtr1;
                        int* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SingleInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SingleInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SingleInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<float> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<float> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<float> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<float> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                float[] uncheckedList1 = xDoubleColumn.ToUncheckedList<float>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( float* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    float* numPtr5 = numPtr1;
                    int* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            float* numPtr10 = (float*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            float* numPtr14 = (float*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr16 = (int*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            int* numPtr20 = (int*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr22 = (float*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            float* numPtr26 = (float*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr28 = (int*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            int* numPtr32 = (int*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr34 = (float*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            float* numPtr38 = (float*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr40 = (int*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            int* numPtr44 = (int*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr46 = (float*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            float* numPtr50 = (float*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr52 = (int*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            float* numPtr54 = (float*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            int* numPtr56 = (int*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            float* numPtr58 = (float*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            int* numPtr60 = (int*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            float* numPtr62 = (float*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            int* numPtr64 = (int*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            float* numPtr66 = (float*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            int* numPtr68 = (int*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( float* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( int* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( float xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SingleUInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<float> floatList = xValues as IList<float>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( floatList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<float, uint>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, double>( floatList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<float, uint>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, uint>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( floatList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<float> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<float> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<float>(false) : (UncheckedList<float>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( float* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        float* numPtr3 = numPtr1;
                        uint* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SingleUInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SingleUInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SingleUInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<float> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<float> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<float> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<float> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                float[] uncheckedList1 = xDoubleColumn.ToUncheckedList<float>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( float* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    float* numPtr5 = numPtr1;
                    uint* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            float* numPtr10 = (float*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            float* numPtr14 = (float*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr16 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            uint* numPtr20 = (uint*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr22 = (float*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            float* numPtr26 = (float*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr28 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            uint* numPtr32 = (uint*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr34 = (float*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            float* numPtr38 = (float*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr40 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            uint* numPtr44 = (uint*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr46 = (float*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            float* numPtr50 = (float*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr52 = (uint*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            float* numPtr54 = (float*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            uint* numPtr56 = (uint*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            float* numPtr58 = (float*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            uint* numPtr60 = (uint*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            float* numPtr62 = (float*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            uint* numPtr64 = (uint*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            float* numPtr66 = (float*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            uint* numPtr68 = (uint*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( float* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( uint* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleUInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( float xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SingleInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<float> floatList = xValues as IList<float>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( floatList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<float, long>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, double>( floatList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<float, long>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, long>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( floatList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<float> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<float> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<float>(false) : (UncheckedList<float>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( float* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        float* numPtr3 = numPtr1;
                        long* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SingleInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SingleInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SingleInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<float> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<float> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<float> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<float> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                float[] uncheckedList1 = xDoubleColumn.ToUncheckedList<float>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( float* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    float* numPtr5 = numPtr1;
                    long* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            float* numPtr10 = (float*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            float* numPtr14 = (float*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr16 = (long*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            long* numPtr20 = (long*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr22 = (float*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            float* numPtr26 = (float*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr28 = (long*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            long* numPtr32 = (long*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr34 = (float*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            float* numPtr38 = (float*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr40 = (long*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            long* numPtr44 = (long*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr46 = (float*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            float* numPtr50 = (float*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr52 = (long*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            float* numPtr54 = (float*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            long* numPtr56 = (long*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            float* numPtr58 = (float*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            long* numPtr60 = (long*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            float* numPtr62 = (float*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            long* numPtr64 = (long*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            float* numPtr66 = (float*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            long* numPtr68 = (long*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( float* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( long* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( float xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SingleUInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<float> floatList = xValues as IList<float>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( floatList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<float, ulong>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, double>( floatList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<float, ulong>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, ulong>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( floatList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<float> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<float> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<float>(false) : (UncheckedList<float>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( float* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        float* numPtr3 = numPtr1;
                        ulong* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SingleUInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SingleUInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SingleUInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<float> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<float> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<float> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<float> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                float[] uncheckedList1 = xDoubleColumn.ToUncheckedList<float>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( float* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    float* numPtr5 = numPtr1;
                    ulong* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            float* numPtr10 = (float*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            float* numPtr14 = (float*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr16 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ulong* numPtr20 = (ulong*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr22 = (float*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            float* numPtr26 = (float*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr28 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ulong* numPtr32 = (ulong*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr34 = (float*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            float* numPtr38 = (float*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr40 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ulong* numPtr44 = (ulong*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr46 = (float*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            float* numPtr50 = (float*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr52 = (ulong*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            float* numPtr54 = (float*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ulong* numPtr56 = (ulong*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            float* numPtr58 = (float*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ulong* numPtr60 = (ulong*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            float* numPtr62 = (float*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ulong* numPtr64 = (ulong*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            float* numPtr66 = (float*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ulong* numPtr68 = (ulong*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( float* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ulong* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleUInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( float xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SingleInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<float> floatList = xValues as IList<float>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( floatList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<float, short>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, double>( floatList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<float, short>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, short>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( floatList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<float> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<float> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<float>(false) : (UncheckedList<float>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( float* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        float* numPtr3 = numPtr1;
                        short* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SingleInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SingleInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SingleInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<float> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<float> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<float> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<float> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                float[] uncheckedList1 = xDoubleColumn.ToUncheckedList<float>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( float* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    float* numPtr5 = numPtr1;
                    short* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            float* numPtr10 = (float*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            float* numPtr14 = (float*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr16 = (short*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            short* numPtr20 = (short*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr22 = (float*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            float* numPtr26 = (float*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr28 = (short*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            short* numPtr32 = (short*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr34 = (float*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            float* numPtr38 = (float*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr40 = (short*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            short* numPtr44 = (short*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr46 = (float*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            float* numPtr50 = (float*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr52 = (short*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            float* numPtr54 = (float*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            short* numPtr56 = (short*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            float* numPtr58 = (float*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            short* numPtr60 = (short*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            float* numPtr62 = (float*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            short* numPtr64 = (short*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            float* numPtr66 = (float*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            short* numPtr68 = (short*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( float* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( short* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( float xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SingleUInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<float> floatList = xValues as IList<float>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( floatList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<float, ushort>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, double>( floatList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<float, ushort>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, ushort>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( floatList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<float> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<float> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<float>(false) : (UncheckedList<float>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( float* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        float* numPtr3 = numPtr1;
                        ushort* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SingleUInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SingleUInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SingleUInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<float> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<float> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<float> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<float> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                float[] uncheckedList1 = xDoubleColumn.ToUncheckedList<float>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( float* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    float* numPtr5 = numPtr1;
                    ushort* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            float* numPtr10 = (float*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            float* numPtr14 = (float*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr16 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ushort* numPtr20 = (ushort*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr22 = (float*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            float* numPtr26 = (float*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr28 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ushort* numPtr32 = (ushort*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr34 = (float*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            float* numPtr38 = (float*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr40 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ushort* numPtr44 = (ushort*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr46 = (float*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            float* numPtr50 = (float*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr52 = (ushort*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            float* numPtr54 = (float*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ushort* numPtr56 = (ushort*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            float* numPtr58 = (float*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ushort* numPtr60 = (ushort*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            float* numPtr62 = (float*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ushort* numPtr64 = (ushort*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            float* numPtr66 = (float*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ushort* numPtr68 = (ushort*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( float* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ushort* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleUInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( float xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SingleByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<float> floatList = xValues as IList<float>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( floatList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<float, byte>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, double>( floatList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<float, byte>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, byte>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( floatList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<float> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<float> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<float>(false) : (UncheckedList<float>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( float* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        float* numPtr3 = numPtr1;
                        byte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SingleByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SingleByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SingleByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SingleByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<float> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<float> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<float> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<float> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                float[] uncheckedList1 = xDoubleColumn.ToUncheckedList<float>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( float* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    float* numPtr5 = numPtr1;
                    byte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            float* numPtr10 = (float*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            float* numPtr14 = (float*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            byte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr22 = (float*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            byte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            float* numPtr26 = (float*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            byte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr34 = (float*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            byte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            float* numPtr38 = (float*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            byte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr46 = (float*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            byte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            float* numPtr50 = (float*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            float* numPtr54 = (float*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            byte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            float* numPtr58 = (float*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            byte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            float* numPtr62 = (float*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            byte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            float* numPtr66 = (float*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            byte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( float* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( float xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SingleSByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<float> floatList = xValues as IList<float>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( floatList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<float, sbyte>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, double>( floatList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<float, sbyte>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<float, sbyte>( floatList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( floatList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<float> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<float> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<float>(false) : (UncheckedList<float>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( float* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        float* numPtr3 = numPtr1;
                        sbyte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SingleSByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SingleSByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SingleSByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SingleSByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<float> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<float> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<float> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SingleSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<float> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                float[] uncheckedList1 = xDoubleColumn.ToUncheckedList<float>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( float* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    float* numPtr5 = numPtr1;
                    sbyte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            float* numPtr10 = (float*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            float* numPtr14 = (float*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            sbyte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr22 = (float*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            sbyte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            float* numPtr26 = (float*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            sbyte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr34 = (float*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            sbyte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            float* numPtr38 = (float*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            sbyte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr46 = (float*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            sbyte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            float* numPtr50 = (float*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            float* numPtr54 = (float*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            sbyte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            float* numPtr58 = (float*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            sbyte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            float* numPtr62 = (float*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            sbyte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            float* numPtr66 = (float*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            sbyte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( float* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SingleSByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( float xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int32DoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<int> intList = xValues as IList<int>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( intList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<int, double>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, double>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<int, double>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, double>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( intList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<int> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<int> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<int>(false) : (UncheckedList<int>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( int* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        int* numPtr3 = numPtr1;
                        double* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int32DoubleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int32DoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int32DoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int32DoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<int> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<int> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<int> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<int> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int[] uncheckedList1 = xDoubleColumn.ToUncheckedList<int>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( int* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    int* numPtr5 = numPtr1;
                    double* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            int* numPtr10 = (int*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            int* numPtr14 = (int*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr16 = (double*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            double* numPtr20 = (double*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr22 = (int*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            int* numPtr26 = (int*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr28 = (double*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            double* numPtr32 = (double*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr34 = (int*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            int* numPtr38 = (int*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr40 = (double*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            double* numPtr44 = (double*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr46 = (int*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            int* numPtr50 = (int*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr52 = (double*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            int* numPtr54 = (int*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            double* numPtr56 = (double*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            int* numPtr58 = (int*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            double* numPtr60 = (double*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            int* numPtr62 = (int*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            double* numPtr64 = (double*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            int* numPtr66 = (int*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            double* numPtr68 = (double*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( int* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32DoubleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( int xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int32SingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<int> intList = xValues as IList<int>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( intList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<int, float>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, double>( intList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<int, float>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, float>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( intList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<int> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<int> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<int>(false) : (UncheckedList<int>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( int* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        int* numPtr3 = numPtr1;
                        float* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr4;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int32SingleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int32SingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int32SingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int32SingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<int> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<int> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<int> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<int> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int[] uncheckedList1 = xDoubleColumn.ToUncheckedList<int>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( int* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    int* numPtr5 = numPtr1;
                    float* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            int* numPtr10 = (int*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            int* numPtr14 = (int*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr16 = (float*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            float* numPtr20 = (float*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr22 = (int*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            int* numPtr26 = (int*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr28 = (float*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            float* numPtr32 = (float*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr34 = (int*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            int* numPtr38 = (int*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr40 = (float*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            float* numPtr44 = (float*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr46 = (int*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            int* numPtr50 = (int*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr52 = (float*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            int* numPtr54 = (int*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            float* numPtr56 = (float*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            int* numPtr58 = (int*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            float* numPtr60 = (float*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            int* numPtr62 = (int*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            float* numPtr64 = (float*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            int* numPtr66 = (int*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            float* numPtr68 = (float*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( int* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( float* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32SingleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( int xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int32Int32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<int> intList = xValues as IList<int>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( intList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<int, int>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, double>( intList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<int, int>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, int>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( intList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<int> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<int> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<int>(false) : (UncheckedList<int>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( int* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        int* numPtr3 = numPtr1;
                        int* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int32Int32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int32Int32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int32Int32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<int> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<int> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<int> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<int> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int[] uncheckedList1 = xDoubleColumn.ToUncheckedList<int>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( int* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    int* numPtr5 = numPtr1;
                    int* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            int* numPtr10 = (int*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            int* numPtr14 = (int*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr16 = (int*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            int* numPtr20 = (int*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr22 = (int*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            int* numPtr26 = (int*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr28 = (int*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            int* numPtr32 = (int*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr34 = (int*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            int* numPtr38 = (int*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr40 = (int*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            int* numPtr44 = (int*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr46 = (int*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            int* numPtr50 = (int*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr52 = (int*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            int* numPtr54 = (int*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            int* numPtr56 = (int*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            int* numPtr58 = (int*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            int* numPtr60 = (int*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            int* numPtr62 = (int*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            int* numPtr64 = (int*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            int* numPtr66 = (int*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            int* numPtr68 = (int*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( int* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( int* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32Int32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( int xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int32UInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<int> intList = xValues as IList<int>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( intList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<int, uint>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, double>( intList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<int, uint>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, uint>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( intList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<int> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<int> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<int>(false) : (UncheckedList<int>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( int* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        int* numPtr3 = numPtr1;
                        uint* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int32UInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int32UInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int32UInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<int> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<int> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<int> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<int> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int[] uncheckedList1 = xDoubleColumn.ToUncheckedList<int>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( int* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    int* numPtr5 = numPtr1;
                    uint* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            int* numPtr10 = (int*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            int* numPtr14 = (int*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr16 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            uint* numPtr20 = (uint*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr22 = (int*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            int* numPtr26 = (int*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr28 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            uint* numPtr32 = (uint*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr34 = (int*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            int* numPtr38 = (int*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr40 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            uint* numPtr44 = (uint*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr46 = (int*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            int* numPtr50 = (int*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr52 = (uint*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            int* numPtr54 = (int*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            uint* numPtr56 = (uint*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            int* numPtr58 = (int*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            uint* numPtr60 = (uint*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            int* numPtr62 = (int*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            uint* numPtr64 = (uint*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            int* numPtr66 = (int*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            uint* numPtr68 = (uint*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( int* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( uint* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32UInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( int xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int32Int64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<int> intList = xValues as IList<int>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( intList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<int, long>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, double>( intList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<int, long>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, long>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( intList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<int> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<int> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<int>(false) : (UncheckedList<int>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( int* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        int* numPtr3 = numPtr1;
                        long* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int32Int64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int32Int64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int32Int64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<int> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<int> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<int> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<int> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int[] uncheckedList1 = xDoubleColumn.ToUncheckedList<int>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( int* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    int* numPtr5 = numPtr1;
                    long* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            int* numPtr10 = (int*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            int* numPtr14 = (int*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr16 = (long*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            long* numPtr20 = (long*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr22 = (int*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            int* numPtr26 = (int*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr28 = (long*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            long* numPtr32 = (long*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr34 = (int*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            int* numPtr38 = (int*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr40 = (long*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            long* numPtr44 = (long*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr46 = (int*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            int* numPtr50 = (int*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr52 = (long*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            int* numPtr54 = (int*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            long* numPtr56 = (long*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            int* numPtr58 = (int*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            long* numPtr60 = (long*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            int* numPtr62 = (int*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            long* numPtr64 = (long*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            int* numPtr66 = (int*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            long* numPtr68 = (long*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( int* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( long* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32Int64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( int xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int32UInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<int> intList = xValues as IList<int>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( intList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<int, ulong>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, double>( intList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<int, ulong>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, ulong>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( intList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<int> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<int> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<int>(false) : (UncheckedList<int>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( int* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        int* numPtr3 = numPtr1;
                        ulong* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int32UInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int32UInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int32UInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<int> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<int> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<int> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<int> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int[] uncheckedList1 = xDoubleColumn.ToUncheckedList<int>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( int* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    int* numPtr5 = numPtr1;
                    ulong* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            int* numPtr10 = (int*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            int* numPtr14 = (int*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr16 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ulong* numPtr20 = (ulong*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr22 = (int*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            int* numPtr26 = (int*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr28 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ulong* numPtr32 = (ulong*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr34 = (int*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            int* numPtr38 = (int*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr40 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ulong* numPtr44 = (ulong*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr46 = (int*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            int* numPtr50 = (int*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr52 = (ulong*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            int* numPtr54 = (int*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ulong* numPtr56 = (ulong*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            int* numPtr58 = (int*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ulong* numPtr60 = (ulong*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            int* numPtr62 = (int*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ulong* numPtr64 = (ulong*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            int* numPtr66 = (int*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ulong* numPtr68 = (ulong*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( int* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ulong* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32UInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( int xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int32Int16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<int> intList = xValues as IList<int>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( intList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<int, short>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, double>( intList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<int, short>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, short>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( intList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<int> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<int> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<int>(false) : (UncheckedList<int>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( int* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        int* numPtr3 = numPtr1;
                        short* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int32Int16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int32Int16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int32Int16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<int> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<int> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<int> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<int> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int[] uncheckedList1 = xDoubleColumn.ToUncheckedList<int>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( int* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    int* numPtr5 = numPtr1;
                    short* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            int* numPtr10 = (int*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            int* numPtr14 = (int*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr16 = (short*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            short* numPtr20 = (short*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr22 = (int*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            int* numPtr26 = (int*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr28 = (short*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            short* numPtr32 = (short*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr34 = (int*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            int* numPtr38 = (int*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr40 = (short*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            short* numPtr44 = (short*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr46 = (int*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            int* numPtr50 = (int*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr52 = (short*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            int* numPtr54 = (int*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            short* numPtr56 = (short*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            int* numPtr58 = (int*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            short* numPtr60 = (short*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            int* numPtr62 = (int*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            short* numPtr64 = (short*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            int* numPtr66 = (int*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            short* numPtr68 = (short*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( int* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( short* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32Int16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( int xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int32UInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<int> intList = xValues as IList<int>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( intList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<int, ushort>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, double>( intList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<int, ushort>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, ushort>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( intList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<int> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<int> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<int>(false) : (UncheckedList<int>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( int* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        int* numPtr3 = numPtr1;
                        ushort* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int32UInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int32UInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int32UInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<int> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<int> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<int> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<int> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int[] uncheckedList1 = xDoubleColumn.ToUncheckedList<int>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( int* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    int* numPtr5 = numPtr1;
                    ushort* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            int* numPtr10 = (int*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            int* numPtr14 = (int*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr16 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ushort* numPtr20 = (ushort*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr22 = (int*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            int* numPtr26 = (int*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr28 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ushort* numPtr32 = (ushort*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr34 = (int*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            int* numPtr38 = (int*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr40 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ushort* numPtr44 = (ushort*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr46 = (int*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            int* numPtr50 = (int*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr52 = (ushort*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            int* numPtr54 = (int*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ushort* numPtr56 = (ushort*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            int* numPtr58 = (int*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ushort* numPtr60 = (ushort*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            int* numPtr62 = (int*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ushort* numPtr64 = (ushort*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            int* numPtr66 = (int*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ushort* numPtr68 = (ushort*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( int* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ushort* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32UInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( int xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int32ByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<int> intList = xValues as IList<int>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( intList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<int, byte>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, double>( intList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<int, byte>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, byte>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( intList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<int> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<int> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<int>(false) : (UncheckedList<int>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( int* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        int* numPtr3 = numPtr1;
                        byte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int32ByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int32ByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int32ByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int32ByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<int> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<int> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<int> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<int> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int[] uncheckedList1 = xDoubleColumn.ToUncheckedList<int>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( int* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    int* numPtr5 = numPtr1;
                    byte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            int* numPtr10 = (int*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            int* numPtr14 = (int*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            byte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr22 = (int*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            byte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            int* numPtr26 = (int*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            byte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr34 = (int*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            byte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            int* numPtr38 = (int*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            byte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr46 = (int*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            byte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            int* numPtr50 = (int*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            int* numPtr54 = (int*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            byte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            int* numPtr58 = (int*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            byte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            int* numPtr62 = (int*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            byte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            int* numPtr66 = (int*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            byte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( int* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32ByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( int xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int32SByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<int> intList = xValues as IList<int>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( intList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<int, sbyte>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, double>( intList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<int, sbyte>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( intList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<int, sbyte>( intList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( intList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<int> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<int> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<int>(false) : (UncheckedList<int>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( int* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        int* numPtr3 = numPtr1;
                        sbyte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int32SByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int32SByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int32SByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int32SByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<int> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<int> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<int> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int32SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<int> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int[] uncheckedList1 = xDoubleColumn.ToUncheckedList<int>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( int* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    int* numPtr5 = numPtr1;
                    sbyte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            int* numPtr10 = (int*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            int* numPtr14 = (int*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            sbyte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr22 = (int*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            sbyte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            int* numPtr26 = (int*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            sbyte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr34 = (int*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            sbyte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            int* numPtr38 = (int*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            sbyte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr46 = (int*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            sbyte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            int* numPtr50 = (int*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            int* numPtr54 = (int*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            sbyte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            int* numPtr58 = (int*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            sbyte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            int* numPtr62 = (int*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            sbyte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            int* numPtr66 = (int*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            sbyte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( int* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int32SByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( int xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt32DoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<uint> uintList = xValues as IList<uint>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( uintList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<uint, double>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, double>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<uint, double>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, double>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( uintList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<uint> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<uint> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<uint>(false) : (UncheckedList<uint>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( uint* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        uint* numPtr3 = numPtr1;
                        double* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt32DoubleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32DoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt32DoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt32DoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<uint> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<uint> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<uint> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<uint> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                uint[] uncheckedList1 = xDoubleColumn.ToUncheckedList<uint>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( uint* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    uint* numPtr5 = numPtr1;
                    double* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            uint* numPtr10 = (uint*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            uint* numPtr14 = (uint*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr16 = (double*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            double* numPtr20 = (double*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr22 = (uint*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            uint* numPtr26 = (uint*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr28 = (double*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            double* numPtr32 = (double*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr34 = (uint*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            uint* numPtr38 = (uint*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr40 = (double*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            double* numPtr44 = (double*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr46 = (uint*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            uint* numPtr50 = (uint*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr52 = (double*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            uint* numPtr54 = (uint*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            double* numPtr56 = (double*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            uint* numPtr58 = (uint*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            double* numPtr60 = (double*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            uint* numPtr62 = (uint*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            double* numPtr64 = (double*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            uint* numPtr66 = (uint*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            double* numPtr68 = (double*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( uint* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32DoubleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( uint xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt32SingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<uint> uintList = xValues as IList<uint>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( uintList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<uint, float>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, double>( uintList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<uint, float>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, float>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( uintList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<uint> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<uint> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<uint>(false) : (UncheckedList<uint>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( uint* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        uint* numPtr3 = numPtr1;
                        float* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr4;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt32SingleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32SingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt32SingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt32SingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<uint> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<uint> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<uint> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<uint> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                uint[] uncheckedList1 = xDoubleColumn.ToUncheckedList<uint>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( uint* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    uint* numPtr5 = numPtr1;
                    float* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            uint* numPtr10 = (uint*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            uint* numPtr14 = (uint*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr16 = (float*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            float* numPtr20 = (float*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr22 = (uint*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            uint* numPtr26 = (uint*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr28 = (float*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            float* numPtr32 = (float*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr34 = (uint*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            uint* numPtr38 = (uint*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr40 = (float*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            float* numPtr44 = (float*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr46 = (uint*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            uint* numPtr50 = (uint*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr52 = (float*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            uint* numPtr54 = (uint*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            float* numPtr56 = (float*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            uint* numPtr58 = (uint*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            float* numPtr60 = (float*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            uint* numPtr62 = (uint*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            float* numPtr64 = (float*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            uint* numPtr66 = (uint*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            float* numPtr68 = (float*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( uint* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( float* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32SingleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( uint xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt32Int32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<uint> uintList = xValues as IList<uint>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( uintList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<uint, int>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, double>( uintList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<uint, int>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, int>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( uintList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<uint> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<uint> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<uint>(false) : (UncheckedList<uint>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( uint* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        uint* numPtr3 = numPtr1;
                        int* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt32Int32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt32Int32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt32Int32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<uint> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<uint> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<uint> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<uint> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                uint[] uncheckedList1 = xDoubleColumn.ToUncheckedList<uint>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( uint* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    uint* numPtr5 = numPtr1;
                    int* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            uint* numPtr10 = (uint*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            uint* numPtr14 = (uint*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr16 = (int*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            int* numPtr20 = (int*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr22 = (uint*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            uint* numPtr26 = (uint*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr28 = (int*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            int* numPtr32 = (int*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr34 = (uint*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            uint* numPtr38 = (uint*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr40 = (int*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            int* numPtr44 = (int*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr46 = (uint*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            uint* numPtr50 = (uint*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr52 = (int*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            uint* numPtr54 = (uint*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            int* numPtr56 = (int*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            uint* numPtr58 = (uint*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            int* numPtr60 = (int*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            uint* numPtr62 = (uint*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            int* numPtr64 = (int*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            uint* numPtr66 = (uint*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            int* numPtr68 = (int*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( uint* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( int* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32Int32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( uint xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt32UInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<uint> uintList = xValues as IList<uint>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( uintList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<uint, uint>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, double>( uintList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<uint, uint>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, uint>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( uintList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<uint> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<uint> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<uint>(false) : (UncheckedList<uint>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( uint* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        uint* numPtr3 = numPtr1;
                        uint* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt32UInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt32UInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<uint> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<uint> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<uint> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<uint> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                uint[] uncheckedList1 = xDoubleColumn.ToUncheckedList<uint>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( uint* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    uint* numPtr5 = numPtr1;
                    uint* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            uint* numPtr10 = (uint*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            uint* numPtr14 = (uint*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr16 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            uint* numPtr20 = (uint*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr22 = (uint*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            uint* numPtr26 = (uint*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr28 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            uint* numPtr32 = (uint*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr34 = (uint*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            uint* numPtr38 = (uint*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr40 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            uint* numPtr44 = (uint*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr46 = (uint*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            uint* numPtr50 = (uint*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr52 = (uint*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            uint* numPtr54 = (uint*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            uint* numPtr56 = (uint*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            uint* numPtr58 = (uint*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            uint* numPtr60 = (uint*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            uint* numPtr62 = (uint*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            uint* numPtr64 = (uint*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            uint* numPtr66 = (uint*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            uint* numPtr68 = (uint*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( uint* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( uint* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32UInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( uint xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt32Int64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<uint> uintList = xValues as IList<uint>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( uintList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<uint, long>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, double>( uintList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<uint, long>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, long>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( uintList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<uint> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<uint> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<uint>(false) : (UncheckedList<uint>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( uint* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        uint* numPtr3 = numPtr1;
                        long* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt32Int64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt32Int64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt32Int64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<uint> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<uint> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<uint> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<uint> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                uint[] uncheckedList1 = xDoubleColumn.ToUncheckedList<uint>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( uint* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    uint* numPtr5 = numPtr1;
                    long* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            uint* numPtr10 = (uint*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            uint* numPtr14 = (uint*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr16 = (long*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            long* numPtr20 = (long*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr22 = (uint*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            uint* numPtr26 = (uint*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr28 = (long*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            long* numPtr32 = (long*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr34 = (uint*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            uint* numPtr38 = (uint*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr40 = (long*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            long* numPtr44 = (long*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr46 = (uint*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            uint* numPtr50 = (uint*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr52 = (long*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            uint* numPtr54 = (uint*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            long* numPtr56 = (long*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            uint* numPtr58 = (uint*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            long* numPtr60 = (long*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            uint* numPtr62 = (uint*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            long* numPtr64 = (long*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            uint* numPtr66 = (uint*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            long* numPtr68 = (long*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( uint* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( long* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32Int64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( uint xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt32UInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<uint> uintList = xValues as IList<uint>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( uintList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<uint, ulong>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, double>( uintList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<uint, ulong>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, ulong>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( uintList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<uint> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<uint> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<uint>(false) : (UncheckedList<uint>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( uint* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        uint* numPtr3 = numPtr1;
                        ulong* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt32UInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt32UInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<uint> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<uint> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<uint> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<uint> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                uint[] uncheckedList1 = xDoubleColumn.ToUncheckedList<uint>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( uint* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    uint* numPtr5 = numPtr1;
                    ulong* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            uint* numPtr10 = (uint*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            uint* numPtr14 = (uint*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr16 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ulong* numPtr20 = (ulong*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr22 = (uint*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            uint* numPtr26 = (uint*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr28 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ulong* numPtr32 = (ulong*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr34 = (uint*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            uint* numPtr38 = (uint*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr40 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ulong* numPtr44 = (ulong*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr46 = (uint*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            uint* numPtr50 = (uint*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr52 = (ulong*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            uint* numPtr54 = (uint*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ulong* numPtr56 = (ulong*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            uint* numPtr58 = (uint*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ulong* numPtr60 = (ulong*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            uint* numPtr62 = (uint*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ulong* numPtr64 = (ulong*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            uint* numPtr66 = (uint*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ulong* numPtr68 = (ulong*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( uint* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ulong* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32UInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( uint xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt32Int16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<uint> uintList = xValues as IList<uint>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( uintList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<uint, short>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, double>( uintList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<uint, short>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, short>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( uintList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<uint> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<uint> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<uint>(false) : (UncheckedList<uint>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( uint* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        uint* numPtr3 = numPtr1;
                        short* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt32Int16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt32Int16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt32Int16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<uint> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<uint> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<uint> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<uint> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                uint[] uncheckedList1 = xDoubleColumn.ToUncheckedList<uint>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( uint* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    uint* numPtr5 = numPtr1;
                    short* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            uint* numPtr10 = (uint*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            uint* numPtr14 = (uint*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr16 = (short*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            short* numPtr20 = (short*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr22 = (uint*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            uint* numPtr26 = (uint*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr28 = (short*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            short* numPtr32 = (short*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr34 = (uint*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            uint* numPtr38 = (uint*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr40 = (short*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            short* numPtr44 = (short*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr46 = (uint*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            uint* numPtr50 = (uint*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr52 = (short*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            uint* numPtr54 = (uint*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            short* numPtr56 = (short*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            uint* numPtr58 = (uint*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            short* numPtr60 = (short*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            uint* numPtr62 = (uint*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            short* numPtr64 = (short*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            uint* numPtr66 = (uint*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            short* numPtr68 = (short*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( uint* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( short* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32Int16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( uint xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt32UInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<uint> uintList = xValues as IList<uint>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( uintList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<uint, ushort>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, double>( uintList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<uint, ushort>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, ushort>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( uintList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<uint> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<uint> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<uint>(false) : (UncheckedList<uint>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( uint* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        uint* numPtr3 = numPtr1;
                        ushort* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt32UInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt32UInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<uint> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<uint> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<uint> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<uint> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                uint[] uncheckedList1 = xDoubleColumn.ToUncheckedList<uint>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( uint* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    uint* numPtr5 = numPtr1;
                    ushort* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            uint* numPtr10 = (uint*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            uint* numPtr14 = (uint*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr16 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ushort* numPtr20 = (ushort*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr22 = (uint*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            uint* numPtr26 = (uint*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr28 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ushort* numPtr32 = (ushort*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr34 = (uint*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            uint* numPtr38 = (uint*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr40 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ushort* numPtr44 = (ushort*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr46 = (uint*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            uint* numPtr50 = (uint*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr52 = (ushort*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            uint* numPtr54 = (uint*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ushort* numPtr56 = (ushort*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            uint* numPtr58 = (uint*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ushort* numPtr60 = (ushort*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            uint* numPtr62 = (uint*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ushort* numPtr64 = (ushort*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            uint* numPtr66 = (uint*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ushort* numPtr68 = (ushort*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( uint* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ushort* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32UInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( uint xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt32ByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<uint> uintList = xValues as IList<uint>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( uintList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<uint, byte>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, double>( uintList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<uint, byte>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, byte>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( uintList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<uint> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<uint> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<uint>(false) : (UncheckedList<uint>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( uint* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        uint* numPtr3 = numPtr1;
                        byte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt32ByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32ByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt32ByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt32ByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<uint> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<uint> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<uint> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<uint> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                uint[] uncheckedList1 = xDoubleColumn.ToUncheckedList<uint>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( uint* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    uint* numPtr5 = numPtr1;
                    byte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            uint* numPtr10 = (uint*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            uint* numPtr14 = (uint*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            byte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr22 = (uint*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            byte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            uint* numPtr26 = (uint*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            byte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr34 = (uint*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            byte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            uint* numPtr38 = (uint*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            byte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr46 = (uint*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            byte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            uint* numPtr50 = (uint*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            uint* numPtr54 = (uint*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            byte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            uint* numPtr58 = (uint*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            byte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            uint* numPtr62 = (uint*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            byte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            uint* numPtr66 = (uint*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            byte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( uint* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32ByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( uint xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt32SByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<uint> uintList = xValues as IList<uint>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( uintList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<uint, sbyte>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, double>( uintList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<uint, sbyte>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<uint, sbyte>( uintList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( uintList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<uint> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<uint> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<uint>(false) : (UncheckedList<uint>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( uint* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        uint* numPtr3 = numPtr1;
                        sbyte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt32SByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 4;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32SByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt32SByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt32SByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<uint> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<uint> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<uint> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt32SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<uint> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                uint[] uncheckedList1 = xDoubleColumn.ToUncheckedList<uint>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( uint* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    uint* numPtr5 = numPtr1;
                    sbyte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            uint* numPtr10 = (uint*) ((IntPtr) numPtr5 + 4);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            uint* numPtr14 = (uint*) ((IntPtr) numPtr10 + 4);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr14 + 4);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            sbyte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr22 = (uint*) ((IntPtr) numPtr18 + 4);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            sbyte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            uint* numPtr26 = (uint*) ((IntPtr) numPtr22 + 4);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr26 + 4);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            sbyte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr34 = (uint*) ((IntPtr) numPtr30 + 4);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            sbyte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            uint* numPtr38 = (uint*) ((IntPtr) numPtr34 + 4);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr38 + 4);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            sbyte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr46 = (uint*) ((IntPtr) numPtr42 + 4);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            sbyte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            uint* numPtr50 = (uint*) ((IntPtr) numPtr46 + 4);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            uint* numPtr54 = (uint*) ((IntPtr) numPtr50 + 4);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            sbyte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            uint* numPtr58 = (uint*) ((IntPtr) numPtr54 + 4);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            sbyte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            uint* numPtr62 = (uint*) ((IntPtr) numPtr58 + 4);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            sbyte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            uint* numPtr66 = (uint*) ((IntPtr) numPtr62 + 4);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            sbyte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( uint* ) ( ( IntPtr ) numPtr66 + 4 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt32SByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 4;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( uint xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int64DoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<long> longList = xValues as IList<long>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( longList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<long, double>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, double>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<long, double>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, double>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( longList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<long> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<long> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<long>(false) : (UncheckedList<long>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( long* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        long* numPtr3 = numPtr1;
                        double* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int64DoubleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int64DoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int64DoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int64DoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<long> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<long> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<long> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<long> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                long[] uncheckedList1 = xDoubleColumn.ToUncheckedList<long>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( long* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    long* numPtr5 = numPtr1;
                    double* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            long* numPtr10 = (long*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            long* numPtr14 = (long*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr16 = (double*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            double* numPtr20 = (double*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr22 = (long*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            long* numPtr26 = (long*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr28 = (double*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            double* numPtr32 = (double*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr34 = (long*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            long* numPtr38 = (long*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr40 = (double*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            double* numPtr44 = (double*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr46 = (long*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            long* numPtr50 = (long*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr52 = (double*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            long* numPtr54 = (long*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            double* numPtr56 = (double*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            long* numPtr58 = (long*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            double* numPtr60 = (double*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            long* numPtr62 = (long*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            double* numPtr64 = (double*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            long* numPtr66 = (long*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            double* numPtr68 = (double*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( long* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64DoubleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( long xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int64SingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<long> longList = xValues as IList<long>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( longList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<long, float>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, double>( longList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<long, float>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, float>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( longList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<long> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<long> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<long>(false) : (UncheckedList<long>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( long* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        long* numPtr3 = numPtr1;
                        float* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr4;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int64SingleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int64SingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int64SingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int64SingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<long> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<long> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<long> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<long> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                long[] uncheckedList1 = xDoubleColumn.ToUncheckedList<long>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( long* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    long* numPtr5 = numPtr1;
                    float* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            long* numPtr10 = (long*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            long* numPtr14 = (long*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr16 = (float*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            float* numPtr20 = (float*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr22 = (long*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            long* numPtr26 = (long*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr28 = (float*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            float* numPtr32 = (float*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr34 = (long*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            long* numPtr38 = (long*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr40 = (float*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            float* numPtr44 = (float*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr46 = (long*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            long* numPtr50 = (long*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr52 = (float*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            long* numPtr54 = (long*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            float* numPtr56 = (float*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            long* numPtr58 = (long*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            float* numPtr60 = (float*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            long* numPtr62 = (long*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            float* numPtr64 = (float*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            long* numPtr66 = (long*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            float* numPtr68 = (float*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( long* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( float* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64SingleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( long xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int64Int32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<long> longList = xValues as IList<long>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( longList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<long, int>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, double>( longList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<long, int>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, int>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( longList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<long> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<long> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<long>(false) : (UncheckedList<long>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( long* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        long* numPtr3 = numPtr1;
                        int* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int64Int32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int64Int32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int64Int32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<long> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<long> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<long> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<long> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                long[] uncheckedList1 = xDoubleColumn.ToUncheckedList<long>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( long* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    long* numPtr5 = numPtr1;
                    int* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            long* numPtr10 = (long*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            long* numPtr14 = (long*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr16 = (int*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            int* numPtr20 = (int*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr22 = (long*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            long* numPtr26 = (long*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr28 = (int*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            int* numPtr32 = (int*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr34 = (long*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            long* numPtr38 = (long*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr40 = (int*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            int* numPtr44 = (int*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr46 = (long*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            long* numPtr50 = (long*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr52 = (int*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            long* numPtr54 = (long*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            int* numPtr56 = (int*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            long* numPtr58 = (long*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            int* numPtr60 = (int*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            long* numPtr62 = (long*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            int* numPtr64 = (int*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            long* numPtr66 = (long*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            int* numPtr68 = (int*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( long* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( int* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64Int32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( long xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int64UInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<long> longList = xValues as IList<long>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( longList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<long, uint>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, double>( longList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<long, uint>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, uint>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( longList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<long> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<long> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<long>(false) : (UncheckedList<long>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( long* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        long* numPtr3 = numPtr1;
                        uint* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int64UInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int64UInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int64UInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<long> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<long> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<long> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<long> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                long[] uncheckedList1 = xDoubleColumn.ToUncheckedList<long>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( long* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    long* numPtr5 = numPtr1;
                    uint* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            long* numPtr10 = (long*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            long* numPtr14 = (long*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr16 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            uint* numPtr20 = (uint*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr22 = (long*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            long* numPtr26 = (long*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr28 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            uint* numPtr32 = (uint*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr34 = (long*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            long* numPtr38 = (long*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr40 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            uint* numPtr44 = (uint*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr46 = (long*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            long* numPtr50 = (long*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr52 = (uint*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            long* numPtr54 = (long*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            uint* numPtr56 = (uint*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            long* numPtr58 = (long*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            uint* numPtr60 = (uint*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            long* numPtr62 = (long*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            uint* numPtr64 = (uint*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            long* numPtr66 = (long*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            uint* numPtr68 = (uint*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( long* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( uint* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64UInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( long xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int64Int64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<long> longList = xValues as IList<long>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( longList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<long, long>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, double>( longList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<long, long>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, long>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( longList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<long> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<long> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<long>(false) : (UncheckedList<long>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( long* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        long* numPtr3 = numPtr1;
                        long* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int64Int64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int64Int64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int64Int64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<long> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<long> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<long> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<long> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                long[] uncheckedList1 = xDoubleColumn.ToUncheckedList<long>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( long* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    long* numPtr5 = numPtr1;
                    long* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            long* numPtr10 = (long*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            long* numPtr14 = (long*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr16 = (long*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            long* numPtr20 = (long*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr22 = (long*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            long* numPtr26 = (long*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr28 = (long*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            long* numPtr32 = (long*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr34 = (long*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            long* numPtr38 = (long*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr40 = (long*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            long* numPtr44 = (long*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr46 = (long*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            long* numPtr50 = (long*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr52 = (long*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            long* numPtr54 = (long*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            long* numPtr56 = (long*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            long* numPtr58 = (long*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            long* numPtr60 = (long*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            long* numPtr62 = (long*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            long* numPtr64 = (long*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            long* numPtr66 = (long*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            long* numPtr68 = (long*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( long* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( long* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64Int64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( long xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int64UInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<long> longList = xValues as IList<long>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( longList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<long, ulong>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, double>( longList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<long, ulong>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, ulong>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( longList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<long> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<long> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<long>(false) : (UncheckedList<long>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( long* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        long* numPtr3 = numPtr1;
                        ulong* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int64UInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int64UInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int64UInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<long> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<long> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<long> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<long> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                long[] uncheckedList1 = xDoubleColumn.ToUncheckedList<long>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( long* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    long* numPtr5 = numPtr1;
                    ulong* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            long* numPtr10 = (long*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            long* numPtr14 = (long*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr16 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ulong* numPtr20 = (ulong*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr22 = (long*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            long* numPtr26 = (long*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr28 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ulong* numPtr32 = (ulong*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr34 = (long*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            long* numPtr38 = (long*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr40 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ulong* numPtr44 = (ulong*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr46 = (long*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            long* numPtr50 = (long*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr52 = (ulong*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            long* numPtr54 = (long*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ulong* numPtr56 = (ulong*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            long* numPtr58 = (long*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ulong* numPtr60 = (ulong*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            long* numPtr62 = (long*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ulong* numPtr64 = (ulong*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            long* numPtr66 = (long*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ulong* numPtr68 = (ulong*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( long* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ulong* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64UInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( long xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int64Int16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<long> longList = xValues as IList<long>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( longList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<long, short>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, double>( longList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<long, short>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, short>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( longList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<long> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<long> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<long>(false) : (UncheckedList<long>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( long* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        long* numPtr3 = numPtr1;
                        short* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int64Int16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int64Int16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int64Int16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<long> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<long> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<long> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<long> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                long[] uncheckedList1 = xDoubleColumn.ToUncheckedList<long>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( long* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    long* numPtr5 = numPtr1;
                    short* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            long* numPtr10 = (long*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            long* numPtr14 = (long*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr16 = (short*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            short* numPtr20 = (short*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr22 = (long*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            long* numPtr26 = (long*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr28 = (short*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            short* numPtr32 = (short*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr34 = (long*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            long* numPtr38 = (long*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr40 = (short*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            short* numPtr44 = (short*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr46 = (long*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            long* numPtr50 = (long*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr52 = (short*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            long* numPtr54 = (long*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            short* numPtr56 = (short*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            long* numPtr58 = (long*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            short* numPtr60 = (short*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            long* numPtr62 = (long*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            short* numPtr64 = (short*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            long* numPtr66 = (long*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            short* numPtr68 = (short*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( long* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( short* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64Int16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( long xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int64UInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<long> longList = xValues as IList<long>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( longList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<long, ushort>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, double>( longList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<long, ushort>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, ushort>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( longList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<long> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<long> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<long>(false) : (UncheckedList<long>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( long* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        long* numPtr3 = numPtr1;
                        ushort* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int64UInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int64UInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int64UInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<long> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<long> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<long> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<long> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                long[] uncheckedList1 = xDoubleColumn.ToUncheckedList<long>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( long* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    long* numPtr5 = numPtr1;
                    ushort* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            long* numPtr10 = (long*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            long* numPtr14 = (long*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr16 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ushort* numPtr20 = (ushort*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr22 = (long*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            long* numPtr26 = (long*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr28 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ushort* numPtr32 = (ushort*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr34 = (long*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            long* numPtr38 = (long*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr40 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ushort* numPtr44 = (ushort*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr46 = (long*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            long* numPtr50 = (long*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr52 = (ushort*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            long* numPtr54 = (long*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ushort* numPtr56 = (ushort*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            long* numPtr58 = (long*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ushort* numPtr60 = (ushort*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            long* numPtr62 = (long*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ushort* numPtr64 = (ushort*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            long* numPtr66 = (long*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ushort* numPtr68 = (ushort*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( long* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ushort* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64UInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( long xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int64ByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<long> longList = xValues as IList<long>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( longList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<long, byte>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, double>( longList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<long, byte>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, byte>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( longList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<long> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<long> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<long>(false) : (UncheckedList<long>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( long* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        long* numPtr3 = numPtr1;
                        byte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int64ByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int64ByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int64ByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int64ByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<long> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<long> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<long> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<long> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                long[] uncheckedList1 = xDoubleColumn.ToUncheckedList<long>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( long* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    long* numPtr5 = numPtr1;
                    byte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            long* numPtr10 = (long*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            long* numPtr14 = (long*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            byte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr22 = (long*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            byte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            long* numPtr26 = (long*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            byte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr34 = (long*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            byte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            long* numPtr38 = (long*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            byte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr46 = (long*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            byte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            long* numPtr50 = (long*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            long* numPtr54 = (long*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            byte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            long* numPtr58 = (long*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            byte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            long* numPtr62 = (long*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            byte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            long* numPtr66 = (long*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            byte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( long* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64ByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( long xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int64SByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<long> longList = xValues as IList<long>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( longList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<long, sbyte>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, double>( longList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<long, sbyte>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( longList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<long, sbyte>( longList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( longList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<long> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<long> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<long>(false) : (UncheckedList<long>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( long* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        long* numPtr3 = numPtr1;
                        sbyte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int64SByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int64SByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int64SByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int64SByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<long> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<long> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<long> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int64SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<long> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                long[] uncheckedList1 = xDoubleColumn.ToUncheckedList<long>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( long* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    long* numPtr5 = numPtr1;
                    sbyte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            long* numPtr10 = (long*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            long* numPtr14 = (long*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            sbyte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr22 = (long*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            sbyte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            long* numPtr26 = (long*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            sbyte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr34 = (long*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            sbyte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            long* numPtr38 = (long*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            sbyte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr46 = (long*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            sbyte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            long* numPtr50 = (long*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            long* numPtr54 = (long*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            sbyte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            long* numPtr58 = (long*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            sbyte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            long* numPtr62 = (long*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            sbyte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            long* numPtr66 = (long*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            sbyte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( long* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int64SByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( long xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt64DoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ulong> ulongList = xValues as IList<ulong>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ulong, double>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, double>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ulong, double>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, double>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ulong> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ulong> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ulong>(false) : (UncheckedList<ulong>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ulong* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ulong* numPtr3 = numPtr1;
                        double* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt64DoubleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64DoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt64DoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt64DoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ulong> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ulong> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ulong> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ulong> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ulong[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ulong>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ulong* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ulong* numPtr5 = numPtr1;
                    double* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ulong* numPtr10 = (ulong*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ulong* numPtr14 = (ulong*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr16 = (double*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            double* numPtr20 = (double*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr22 = (ulong*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ulong* numPtr26 = (ulong*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr28 = (double*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            double* numPtr32 = (double*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr34 = (ulong*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ulong* numPtr38 = (ulong*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr40 = (double*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            double* numPtr44 = (double*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr46 = (ulong*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ulong* numPtr50 = (ulong*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr52 = (double*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ulong* numPtr54 = (ulong*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            double* numPtr56 = (double*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ulong* numPtr58 = (ulong*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            double* numPtr60 = (double*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ulong* numPtr62 = (ulong*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            double* numPtr64 = (double*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ulong* numPtr66 = (ulong*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            double* numPtr68 = (double*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ulong* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64DoubleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ulong xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt64SingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ulong> ulongList = xValues as IList<ulong>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ulong, float>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, double>( ulongList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ulong, float>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, float>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ulong> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ulong> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ulong>(false) : (UncheckedList<ulong>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ulong* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ulong* numPtr3 = numPtr1;
                        float* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr4;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt64SingleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64SingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt64SingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt64SingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ulong> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ulong> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ulong> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ulong> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ulong[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ulong>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ulong* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ulong* numPtr5 = numPtr1;
                    float* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ulong* numPtr10 = (ulong*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ulong* numPtr14 = (ulong*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr16 = (float*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            float* numPtr20 = (float*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr22 = (ulong*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ulong* numPtr26 = (ulong*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr28 = (float*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            float* numPtr32 = (float*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr34 = (ulong*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ulong* numPtr38 = (ulong*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr40 = (float*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            float* numPtr44 = (float*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr46 = (ulong*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ulong* numPtr50 = (ulong*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr52 = (float*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ulong* numPtr54 = (ulong*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            float* numPtr56 = (float*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ulong* numPtr58 = (ulong*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            float* numPtr60 = (float*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ulong* numPtr62 = (ulong*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            float* numPtr64 = (float*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ulong* numPtr66 = (ulong*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            float* numPtr68 = (float*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ulong* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( float* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64SingleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ulong xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt64Int32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ulong> ulongList = xValues as IList<ulong>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ulong, int>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, double>( ulongList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ulong, int>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, int>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ulong> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ulong> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ulong>(false) : (UncheckedList<ulong>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ulong* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ulong* numPtr3 = numPtr1;
                        int* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt64Int32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt64Int32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt64Int32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ulong> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ulong> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ulong> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ulong> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ulong[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ulong>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ulong* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ulong* numPtr5 = numPtr1;
                    int* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ulong* numPtr10 = (ulong*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ulong* numPtr14 = (ulong*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr16 = (int*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            int* numPtr20 = (int*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr22 = (ulong*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ulong* numPtr26 = (ulong*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr28 = (int*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            int* numPtr32 = (int*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr34 = (ulong*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ulong* numPtr38 = (ulong*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr40 = (int*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            int* numPtr44 = (int*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr46 = (ulong*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ulong* numPtr50 = (ulong*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr52 = (int*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ulong* numPtr54 = (ulong*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            int* numPtr56 = (int*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ulong* numPtr58 = (ulong*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            int* numPtr60 = (int*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ulong* numPtr62 = (ulong*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            int* numPtr64 = (int*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ulong* numPtr66 = (ulong*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            int* numPtr68 = (int*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ulong* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( int* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64Int32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ulong xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt64UInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ulong> ulongList = xValues as IList<ulong>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ulong, uint>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, double>( ulongList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ulong, uint>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, uint>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ulong> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ulong> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ulong>(false) : (UncheckedList<ulong>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ulong* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ulong* numPtr3 = numPtr1;
                        uint* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt64UInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt64UInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ulong> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ulong> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ulong> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ulong> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ulong[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ulong>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ulong* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ulong* numPtr5 = numPtr1;
                    uint* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ulong* numPtr10 = (ulong*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ulong* numPtr14 = (ulong*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr16 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            uint* numPtr20 = (uint*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr22 = (ulong*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ulong* numPtr26 = (ulong*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr28 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            uint* numPtr32 = (uint*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr34 = (ulong*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ulong* numPtr38 = (ulong*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr40 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            uint* numPtr44 = (uint*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr46 = (ulong*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ulong* numPtr50 = (ulong*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr52 = (uint*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ulong* numPtr54 = (ulong*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            uint* numPtr56 = (uint*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ulong* numPtr58 = (ulong*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            uint* numPtr60 = (uint*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ulong* numPtr62 = (ulong*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            uint* numPtr64 = (uint*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ulong* numPtr66 = (ulong*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            uint* numPtr68 = (uint*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ulong* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( uint* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64UInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ulong xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt64Int64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ulong> ulongList = xValues as IList<ulong>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ulong, long>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, double>( ulongList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ulong, long>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, long>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ulong> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ulong> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ulong>(false) : (UncheckedList<ulong>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ulong* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ulong* numPtr3 = numPtr1;
                        long* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt64Int64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt64Int64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt64Int64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ulong> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ulong> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ulong> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ulong> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ulong[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ulong>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ulong* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ulong* numPtr5 = numPtr1;
                    long* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ulong* numPtr10 = (ulong*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ulong* numPtr14 = (ulong*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr16 = (long*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            long* numPtr20 = (long*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr22 = (ulong*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ulong* numPtr26 = (ulong*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr28 = (long*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            long* numPtr32 = (long*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr34 = (ulong*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ulong* numPtr38 = (ulong*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr40 = (long*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            long* numPtr44 = (long*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr46 = (ulong*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ulong* numPtr50 = (ulong*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr52 = (long*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ulong* numPtr54 = (ulong*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            long* numPtr56 = (long*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ulong* numPtr58 = (ulong*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            long* numPtr60 = (long*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ulong* numPtr62 = (ulong*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            long* numPtr64 = (long*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ulong* numPtr66 = (ulong*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            long* numPtr68 = (long*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ulong* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( long* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64Int64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ulong xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt64UInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ulong> ulongList = xValues as IList<ulong>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ulong, ulong>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, double>( ulongList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ulong, ulong>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, ulong>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ulong> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ulong> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ulong>(false) : (UncheckedList<ulong>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ulong* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ulong* numPtr3 = numPtr1;
                        ulong* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt64UInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt64UInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ulong> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ulong> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ulong> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ulong> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ulong[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ulong>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ulong* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ulong* numPtr5 = numPtr1;
                    ulong* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ulong* numPtr10 = (ulong*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ulong* numPtr14 = (ulong*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr16 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ulong* numPtr20 = (ulong*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr22 = (ulong*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ulong* numPtr26 = (ulong*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr28 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ulong* numPtr32 = (ulong*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr34 = (ulong*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ulong* numPtr38 = (ulong*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr40 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ulong* numPtr44 = (ulong*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr46 = (ulong*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ulong* numPtr50 = (ulong*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr52 = (ulong*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ulong* numPtr54 = (ulong*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ulong* numPtr56 = (ulong*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ulong* numPtr58 = (ulong*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ulong* numPtr60 = (ulong*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ulong* numPtr62 = (ulong*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ulong* numPtr64 = (ulong*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ulong* numPtr66 = (ulong*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ulong* numPtr68 = (ulong*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ulong* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ulong* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64UInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ulong xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt64Int16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ulong> ulongList = xValues as IList<ulong>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ulong, short>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, double>( ulongList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ulong, short>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, short>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ulong> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ulong> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ulong>(false) : (UncheckedList<ulong>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ulong* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ulong* numPtr3 = numPtr1;
                        short* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt64Int16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt64Int16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt64Int16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ulong> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ulong> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ulong> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ulong> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ulong[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ulong>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ulong* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ulong* numPtr5 = numPtr1;
                    short* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ulong* numPtr10 = (ulong*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ulong* numPtr14 = (ulong*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr16 = (short*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            short* numPtr20 = (short*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr22 = (ulong*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ulong* numPtr26 = (ulong*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr28 = (short*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            short* numPtr32 = (short*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr34 = (ulong*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ulong* numPtr38 = (ulong*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr40 = (short*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            short* numPtr44 = (short*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr46 = (ulong*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ulong* numPtr50 = (ulong*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr52 = (short*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ulong* numPtr54 = (ulong*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            short* numPtr56 = (short*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ulong* numPtr58 = (ulong*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            short* numPtr60 = (short*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ulong* numPtr62 = (ulong*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            short* numPtr64 = (short*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ulong* numPtr66 = (ulong*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            short* numPtr68 = (short*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ulong* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( short* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64Int16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ulong xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt64UInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ulong> ulongList = xValues as IList<ulong>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ulong, ushort>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, double>( ulongList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ulong, ushort>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, ushort>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ulong> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ulong> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ulong>(false) : (UncheckedList<ulong>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ulong* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ulong* numPtr3 = numPtr1;
                        ushort* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt64UInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt64UInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ulong> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ulong> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ulong> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ulong> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ulong[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ulong>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ulong* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ulong* numPtr5 = numPtr1;
                    ushort* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ulong* numPtr10 = (ulong*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ulong* numPtr14 = (ulong*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr16 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ushort* numPtr20 = (ushort*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr22 = (ulong*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ulong* numPtr26 = (ulong*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr28 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ushort* numPtr32 = (ushort*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr34 = (ulong*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ulong* numPtr38 = (ulong*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr40 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ushort* numPtr44 = (ushort*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr46 = (ulong*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ulong* numPtr50 = (ulong*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr52 = (ushort*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ulong* numPtr54 = (ulong*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ushort* numPtr56 = (ushort*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ulong* numPtr58 = (ulong*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ushort* numPtr60 = (ushort*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ulong* numPtr62 = (ulong*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ushort* numPtr64 = (ushort*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ulong* numPtr66 = (ulong*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ushort* numPtr68 = (ushort*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ulong* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ushort* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64UInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ulong xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt64ByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ulong> ulongList = xValues as IList<ulong>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ulong, byte>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, double>( ulongList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ulong, byte>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, byte>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ulong> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ulong> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ulong>(false) : (UncheckedList<ulong>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ulong* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ulong* numPtr3 = numPtr1;
                        byte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt64ByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64ByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt64ByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt64ByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ulong> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ulong> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ulong> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ulong> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ulong[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ulong>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ulong* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ulong* numPtr5 = numPtr1;
                    byte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ulong* numPtr10 = (ulong*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ulong* numPtr14 = (ulong*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            byte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr22 = (ulong*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            byte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ulong* numPtr26 = (ulong*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            byte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr34 = (ulong*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            byte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ulong* numPtr38 = (ulong*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            byte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr46 = (ulong*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            byte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ulong* numPtr50 = (ulong*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ulong* numPtr54 = (ulong*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            byte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ulong* numPtr58 = (ulong*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            byte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ulong* numPtr62 = (ulong*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            byte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ulong* numPtr66 = (ulong*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            byte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ulong* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64ByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ulong xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt64SByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ulong> ulongList = xValues as IList<ulong>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ulong, sbyte>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, double>( ulongList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ulong, sbyte>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ulong, sbyte>( ulongList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ulongList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ulong> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ulong> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ulong>(false) : (UncheckedList<ulong>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ulong* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ulong* numPtr3 = numPtr1;
                        sbyte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt64SByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 8;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64SByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt64SByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt64SByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ulong> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ulong> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ulong> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt64SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ulong> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ulong[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ulong>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ulong* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ulong* numPtr5 = numPtr1;
                    sbyte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ulong* numPtr10 = (ulong*) ((IntPtr) numPtr5 + 8);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ulong* numPtr14 = (ulong*) ((IntPtr) numPtr10 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr14 + 8);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            sbyte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr22 = (ulong*) ((IntPtr) numPtr18 + 8);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            sbyte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ulong* numPtr26 = (ulong*) ((IntPtr) numPtr22 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr26 + 8);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            sbyte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr34 = (ulong*) ((IntPtr) numPtr30 + 8);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            sbyte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ulong* numPtr38 = (ulong*) ((IntPtr) numPtr34 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr38 + 8);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            sbyte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr46 = (ulong*) ((IntPtr) numPtr42 + 8);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            sbyte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ulong* numPtr50 = (ulong*) ((IntPtr) numPtr46 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ulong* numPtr54 = (ulong*) ((IntPtr) numPtr50 + 8);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            sbyte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ulong* numPtr58 = (ulong*) ((IntPtr) numPtr54 + 8);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            sbyte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ulong* numPtr62 = (ulong*) ((IntPtr) numPtr58 + 8);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            sbyte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ulong* numPtr66 = (ulong*) ((IntPtr) numPtr62 + 8);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            sbyte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ulong* ) ( ( IntPtr ) numPtr66 + 8 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt64SByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 8;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ulong xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int16DoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<short> shortList = xValues as IList<short>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( shortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<short, double>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, double>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<short, double>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, double>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( shortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<short> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<short> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<short>(false) : (UncheckedList<short>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( short* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        short* numPtr3 = numPtr1;
                        double* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int16DoubleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int16DoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int16DoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int16DoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<short> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<short> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<short> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<short> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                short[] uncheckedList1 = xDoubleColumn.ToUncheckedList<short>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( short* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    short* numPtr5 = numPtr1;
                    double* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            short* numPtr10 = (short*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            short* numPtr14 = (short*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr16 = (double*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            double* numPtr20 = (double*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr22 = (short*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            short* numPtr26 = (short*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr28 = (double*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            double* numPtr32 = (double*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr34 = (short*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            short* numPtr38 = (short*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr40 = (double*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            double* numPtr44 = (double*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr46 = (short*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            short* numPtr50 = (short*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr52 = (double*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            short* numPtr54 = (short*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            double* numPtr56 = (double*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            short* numPtr58 = (short*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            double* numPtr60 = (double*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            short* numPtr62 = (short*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            double* numPtr64 = (double*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            short* numPtr66 = (short*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            double* numPtr68 = (double*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( short* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16DoubleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( short xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int16SingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<short> shortList = xValues as IList<short>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( shortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<short, float>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, double>( shortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<short, float>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, float>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( shortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<short> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<short> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<short>(false) : (UncheckedList<short>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( short* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        short* numPtr3 = numPtr1;
                        float* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr4;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int16SingleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int16SingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int16SingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int16SingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<short> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<short> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<short> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<short> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                short[] uncheckedList1 = xDoubleColumn.ToUncheckedList<short>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( short* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    short* numPtr5 = numPtr1;
                    float* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            short* numPtr10 = (short*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            short* numPtr14 = (short*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr16 = (float*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            float* numPtr20 = (float*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr22 = (short*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            short* numPtr26 = (short*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr28 = (float*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            float* numPtr32 = (float*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr34 = (short*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            short* numPtr38 = (short*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr40 = (float*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            float* numPtr44 = (float*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr46 = (short*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            short* numPtr50 = (short*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr52 = (float*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            short* numPtr54 = (short*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            float* numPtr56 = (float*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            short* numPtr58 = (short*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            float* numPtr60 = (float*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            short* numPtr62 = (short*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            float* numPtr64 = (float*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            short* numPtr66 = (short*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            float* numPtr68 = (float*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( short* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( float* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16SingleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( short xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int16Int32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<short> shortList = xValues as IList<short>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( shortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<short, int>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, double>( shortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<short, int>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, int>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( shortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<short> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<short> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<short>(false) : (UncheckedList<short>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( short* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        short* numPtr3 = numPtr1;
                        int* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int16Int32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int16Int32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int16Int32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<short> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<short> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<short> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<short> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                short[] uncheckedList1 = xDoubleColumn.ToUncheckedList<short>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( short* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    short* numPtr5 = numPtr1;
                    int* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            short* numPtr10 = (short*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            short* numPtr14 = (short*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr16 = (int*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            int* numPtr20 = (int*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr22 = (short*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            short* numPtr26 = (short*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr28 = (int*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            int* numPtr32 = (int*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr34 = (short*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            short* numPtr38 = (short*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr40 = (int*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            int* numPtr44 = (int*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr46 = (short*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            short* numPtr50 = (short*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr52 = (int*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            short* numPtr54 = (short*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            int* numPtr56 = (int*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            short* numPtr58 = (short*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            int* numPtr60 = (int*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            short* numPtr62 = (short*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            int* numPtr64 = (int*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            short* numPtr66 = (short*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            int* numPtr68 = (int*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( short* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( int* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16Int32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( short xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int16UInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<short> shortList = xValues as IList<short>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( shortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<short, uint>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, double>( shortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<short, uint>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, uint>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( shortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<short> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<short> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<short>(false) : (UncheckedList<short>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( short* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        short* numPtr3 = numPtr1;
                        uint* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int16UInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int16UInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int16UInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<short> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<short> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<short> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<short> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                short[] uncheckedList1 = xDoubleColumn.ToUncheckedList<short>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( short* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    short* numPtr5 = numPtr1;
                    uint* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            short* numPtr10 = (short*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            short* numPtr14 = (short*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr16 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            uint* numPtr20 = (uint*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr22 = (short*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            short* numPtr26 = (short*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr28 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            uint* numPtr32 = (uint*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr34 = (short*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            short* numPtr38 = (short*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr40 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            uint* numPtr44 = (uint*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr46 = (short*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            short* numPtr50 = (short*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr52 = (uint*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            short* numPtr54 = (short*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            uint* numPtr56 = (uint*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            short* numPtr58 = (short*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            uint* numPtr60 = (uint*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            short* numPtr62 = (short*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            uint* numPtr64 = (uint*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            short* numPtr66 = (short*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            uint* numPtr68 = (uint*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( short* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( uint* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16UInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( short xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int16Int64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<short> shortList = xValues as IList<short>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( shortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<short, long>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, double>( shortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<short, long>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, long>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( shortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<short> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<short> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<short>(false) : (UncheckedList<short>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( short* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        short* numPtr3 = numPtr1;
                        long* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int16Int64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int16Int64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int16Int64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<short> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<short> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<short> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<short> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                short[] uncheckedList1 = xDoubleColumn.ToUncheckedList<short>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( short* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    short* numPtr5 = numPtr1;
                    long* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            short* numPtr10 = (short*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            short* numPtr14 = (short*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr16 = (long*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            long* numPtr20 = (long*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr22 = (short*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            short* numPtr26 = (short*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr28 = (long*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            long* numPtr32 = (long*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr34 = (short*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            short* numPtr38 = (short*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr40 = (long*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            long* numPtr44 = (long*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr46 = (short*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            short* numPtr50 = (short*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr52 = (long*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            short* numPtr54 = (short*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            long* numPtr56 = (long*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            short* numPtr58 = (short*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            long* numPtr60 = (long*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            short* numPtr62 = (short*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            long* numPtr64 = (long*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            short* numPtr66 = (short*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            long* numPtr68 = (long*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( short* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( long* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16Int64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( short xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int16UInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<short> shortList = xValues as IList<short>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( shortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<short, ulong>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, double>( shortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<short, ulong>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, ulong>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( shortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<short> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<short> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<short>(false) : (UncheckedList<short>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( short* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        short* numPtr3 = numPtr1;
                        ulong* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int16UInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int16UInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int16UInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<short> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<short> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<short> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<short> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                short[] uncheckedList1 = xDoubleColumn.ToUncheckedList<short>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( short* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    short* numPtr5 = numPtr1;
                    ulong* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            short* numPtr10 = (short*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            short* numPtr14 = (short*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr16 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ulong* numPtr20 = (ulong*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr22 = (short*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            short* numPtr26 = (short*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr28 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ulong* numPtr32 = (ulong*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr34 = (short*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            short* numPtr38 = (short*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr40 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ulong* numPtr44 = (ulong*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr46 = (short*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            short* numPtr50 = (short*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr52 = (ulong*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            short* numPtr54 = (short*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ulong* numPtr56 = (ulong*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            short* numPtr58 = (short*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ulong* numPtr60 = (ulong*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            short* numPtr62 = (short*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ulong* numPtr64 = (ulong*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            short* numPtr66 = (short*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ulong* numPtr68 = (ulong*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( short* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ulong* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16UInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( short xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int16Int16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<short> shortList = xValues as IList<short>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( shortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<short, short>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, double>( shortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<short, short>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, short>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( shortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<short> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<short> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<short>(false) : (UncheckedList<short>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( short* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        short* numPtr3 = numPtr1;
                        short* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int16Int16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int16Int16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int16Int16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<short> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<short> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<short> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<short> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                short[] uncheckedList1 = xDoubleColumn.ToUncheckedList<short>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( short* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    short* numPtr5 = numPtr1;
                    short* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            short* numPtr10 = (short*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            short* numPtr14 = (short*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr16 = (short*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            short* numPtr20 = (short*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr22 = (short*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            short* numPtr26 = (short*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr28 = (short*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            short* numPtr32 = (short*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr34 = (short*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            short* numPtr38 = (short*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr40 = (short*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            short* numPtr44 = (short*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr46 = (short*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            short* numPtr50 = (short*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr52 = (short*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            short* numPtr54 = (short*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            short* numPtr56 = (short*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            short* numPtr58 = (short*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            short* numPtr60 = (short*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            short* numPtr62 = (short*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            short* numPtr64 = (short*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            short* numPtr66 = (short*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            short* numPtr68 = (short*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( short* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( short* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16Int16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( short xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int16UInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<short> shortList = xValues as IList<short>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( shortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<short, ushort>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, double>( shortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<short, ushort>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, ushort>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( shortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<short> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<short> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<short>(false) : (UncheckedList<short>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( short* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        short* numPtr3 = numPtr1;
                        ushort* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int16UInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int16UInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int16UInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<short> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<short> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<short> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<short> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                short[] uncheckedList1 = xDoubleColumn.ToUncheckedList<short>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( short* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    short* numPtr5 = numPtr1;
                    ushort* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            short* numPtr10 = (short*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            short* numPtr14 = (short*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr16 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ushort* numPtr20 = (ushort*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr22 = (short*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            short* numPtr26 = (short*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr28 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ushort* numPtr32 = (ushort*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr34 = (short*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            short* numPtr38 = (short*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr40 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ushort* numPtr44 = (ushort*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr46 = (short*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            short* numPtr50 = (short*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr52 = (ushort*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            short* numPtr54 = (short*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ushort* numPtr56 = (ushort*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            short* numPtr58 = (short*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ushort* numPtr60 = (ushort*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            short* numPtr62 = (short*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ushort* numPtr64 = (ushort*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            short* numPtr66 = (short*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ushort* numPtr68 = (ushort*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( short* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ushort* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16UInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( short xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int16ByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<short> shortList = xValues as IList<short>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( shortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<short, byte>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, double>( shortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<short, byte>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, byte>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( shortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<short> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<short> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<short>(false) : (UncheckedList<short>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( short* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        short* numPtr3 = numPtr1;
                        byte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int16ByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int16ByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int16ByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int16ByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<short> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<short> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<short> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<short> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                short[] uncheckedList1 = xDoubleColumn.ToUncheckedList<short>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( short* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    short* numPtr5 = numPtr1;
                    byte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            short* numPtr10 = (short*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            short* numPtr14 = (short*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            byte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr22 = (short*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            byte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            short* numPtr26 = (short*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            byte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr34 = (short*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            byte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            short* numPtr38 = (short*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            byte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr46 = (short*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            byte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            short* numPtr50 = (short*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            short* numPtr54 = (short*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            byte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            short* numPtr58 = (short*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            byte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            short* numPtr62 = (short*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            byte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            short* numPtr66 = (short*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            byte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( short* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16ByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( short xValue )
            {
                return ( double ) xValue;
            }
        }

        private class Int16SByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<short> shortList = xValues as IList<short>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( shortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<short, sbyte>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, double>( shortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<short, sbyte>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<short, sbyte>( shortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( shortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<short> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<short> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<short>(false) : (UncheckedList<short>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( short* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        short* numPtr3 = numPtr1;
                        sbyte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.Int16SByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.Int16SByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.Int16SByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.Int16SByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<short> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<short> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<short> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.Int16SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<short> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                short[] uncheckedList1 = xDoubleColumn.ToUncheckedList<short>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( short* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    short* numPtr5 = numPtr1;
                    sbyte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            short* numPtr10 = (short*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            short* numPtr14 = (short*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            sbyte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr22 = (short*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            sbyte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            short* numPtr26 = (short*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            sbyte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr34 = (short*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            sbyte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            short* numPtr38 = (short*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            sbyte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr46 = (short*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            sbyte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            short* numPtr50 = (short*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            short* numPtr54 = (short*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            sbyte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            short* numPtr58 = (short*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            sbyte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            short* numPtr62 = (short*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            sbyte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            short* numPtr66 = (short*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            sbyte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( short* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.Int16SByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( short xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt16DoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ushort> ushortList = xValues as IList<ushort>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ushort, double>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, double>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ushort, double>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, double>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ushort> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ushort> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ushort>(false) : (UncheckedList<ushort>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ushort* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ushort* numPtr3 = numPtr1;
                        double* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt16DoubleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16DoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt16DoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt16DoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ushort> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ushort> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ushort> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16DoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ushort> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ushort[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ushort>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ushort* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ushort* numPtr5 = numPtr1;
                    double* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ushort* numPtr10 = (ushort*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ushort* numPtr14 = (ushort*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr16 = (double*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            double* numPtr20 = (double*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr22 = (ushort*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ushort* numPtr26 = (ushort*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr28 = (double*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            double* numPtr32 = (double*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr34 = (ushort*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ushort* numPtr38 = (ushort*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr40 = (double*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            double* numPtr44 = (double*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr46 = (ushort*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ushort* numPtr50 = (ushort*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr52 = (double*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ushort* numPtr54 = (ushort*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            double* numPtr56 = (double*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ushort* numPtr58 = (ushort*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            double* numPtr60 = (double*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ushort* numPtr62 = (ushort*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            double* numPtr64 = (double*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ushort* numPtr66 = (ushort*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            double* numPtr68 = (double*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ushort* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16DoubleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ushort xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt16SingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ushort> ushortList = xValues as IList<ushort>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ushort, float>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, double>( ushortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ushort, float>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, float>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ushort> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ushort> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ushort>(false) : (UncheckedList<ushort>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ushort* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ushort* numPtr3 = numPtr1;
                        float* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr4;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt16SingleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16SingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt16SingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt16SingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ushort> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ushort> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ushort> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16SingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ushort> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ushort[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ushort>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ushort* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ushort* numPtr5 = numPtr1;
                    float* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ushort* numPtr10 = (ushort*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ushort* numPtr14 = (ushort*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr16 = (float*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            float* numPtr20 = (float*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr22 = (ushort*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ushort* numPtr26 = (ushort*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr28 = (float*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            float* numPtr32 = (float*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr34 = (ushort*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ushort* numPtr38 = (ushort*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr40 = (float*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            float* numPtr44 = (float*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr46 = (ushort*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ushort* numPtr50 = (ushort*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr52 = (float*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ushort* numPtr54 = (ushort*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            float* numPtr56 = (float*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ushort* numPtr58 = (ushort*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            float* numPtr60 = (float*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ushort* numPtr62 = (ushort*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            float* numPtr64 = (float*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ushort* numPtr66 = (ushort*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            float* numPtr68 = (float*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ushort* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( float* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16SingleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ushort xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt16Int32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ushort> ushortList = xValues as IList<ushort>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ushort, int>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, double>( ushortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ushort, int>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, int>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ushort> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ushort> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ushort>(false) : (UncheckedList<ushort>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ushort* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ushort* numPtr3 = numPtr1;
                        int* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt16Int32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt16Int32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt16Int32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ushort> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ushort> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ushort> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ushort> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ushort[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ushort>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ushort* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ushort* numPtr5 = numPtr1;
                    int* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ushort* numPtr10 = (ushort*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ushort* numPtr14 = (ushort*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr16 = (int*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            int* numPtr20 = (int*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr22 = (ushort*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ushort* numPtr26 = (ushort*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr28 = (int*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            int* numPtr32 = (int*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr34 = (ushort*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ushort* numPtr38 = (ushort*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr40 = (int*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            int* numPtr44 = (int*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr46 = (ushort*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ushort* numPtr50 = (ushort*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr52 = (int*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ushort* numPtr54 = (ushort*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            int* numPtr56 = (int*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ushort* numPtr58 = (ushort*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            int* numPtr60 = (int*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ushort* numPtr62 = (ushort*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            int* numPtr64 = (int*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ushort* numPtr66 = (ushort*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            int* numPtr68 = (int*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ushort* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( int* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16Int32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ushort xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt16UInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ushort> ushortList = xValues as IList<ushort>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ushort, uint>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, double>( ushortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ushort, uint>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, uint>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ushort> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ushort> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ushort>(false) : (UncheckedList<ushort>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ushort* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ushort* numPtr3 = numPtr1;
                        uint* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt16UInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt16UInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ushort> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ushort> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ushort> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ushort> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ushort[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ushort>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ushort* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ushort* numPtr5 = numPtr1;
                    uint* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ushort* numPtr10 = (ushort*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ushort* numPtr14 = (ushort*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr16 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            uint* numPtr20 = (uint*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr22 = (ushort*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ushort* numPtr26 = (ushort*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr28 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            uint* numPtr32 = (uint*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr34 = (ushort*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ushort* numPtr38 = (ushort*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr40 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            uint* numPtr44 = (uint*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr46 = (ushort*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ushort* numPtr50 = (ushort*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr52 = (uint*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ushort* numPtr54 = (ushort*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            uint* numPtr56 = (uint*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ushort* numPtr58 = (ushort*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            uint* numPtr60 = (uint*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ushort* numPtr62 = (ushort*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            uint* numPtr64 = (uint*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ushort* numPtr66 = (ushort*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            uint* numPtr68 = (uint*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ushort* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( uint* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16UInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ushort xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt16Int64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ushort> ushortList = xValues as IList<ushort>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ushort, long>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, double>( ushortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ushort, long>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, long>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ushort> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ushort> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ushort>(false) : (UncheckedList<ushort>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ushort* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ushort* numPtr3 = numPtr1;
                        long* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt16Int64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt16Int64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt16Int64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ushort> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ushort> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ushort> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ushort> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ushort[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ushort>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ushort* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ushort* numPtr5 = numPtr1;
                    long* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ushort* numPtr10 = (ushort*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ushort* numPtr14 = (ushort*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr16 = (long*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            long* numPtr20 = (long*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr22 = (ushort*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ushort* numPtr26 = (ushort*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr28 = (long*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            long* numPtr32 = (long*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr34 = (ushort*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ushort* numPtr38 = (ushort*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr40 = (long*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            long* numPtr44 = (long*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr46 = (ushort*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ushort* numPtr50 = (ushort*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr52 = (long*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ushort* numPtr54 = (ushort*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            long* numPtr56 = (long*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ushort* numPtr58 = (ushort*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            long* numPtr60 = (long*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ushort* numPtr62 = (ushort*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            long* numPtr64 = (long*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ushort* numPtr66 = (ushort*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            long* numPtr68 = (long*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ushort* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( long* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16Int64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ushort xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt16UInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ushort> ushortList = xValues as IList<ushort>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ushort, ulong>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, double>( ushortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ushort, ulong>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, ulong>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ushort> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ushort> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ushort>(false) : (UncheckedList<ushort>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ushort* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ushort* numPtr3 = numPtr1;
                        ulong* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt16UInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt16UInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ushort> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ushort> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ushort> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ushort> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ushort[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ushort>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ushort* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ushort* numPtr5 = numPtr1;
                    ulong* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ushort* numPtr10 = (ushort*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ushort* numPtr14 = (ushort*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr16 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ulong* numPtr20 = (ulong*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr22 = (ushort*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ushort* numPtr26 = (ushort*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr28 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ulong* numPtr32 = (ulong*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr34 = (ushort*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ushort* numPtr38 = (ushort*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr40 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ulong* numPtr44 = (ulong*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr46 = (ushort*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ushort* numPtr50 = (ushort*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr52 = (ulong*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ushort* numPtr54 = (ushort*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ulong* numPtr56 = (ulong*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ushort* numPtr58 = (ushort*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ulong* numPtr60 = (ulong*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ushort* numPtr62 = (ushort*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ulong* numPtr64 = (ulong*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ushort* numPtr66 = (ushort*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ulong* numPtr68 = (ulong*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ushort* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ulong* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16UInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ushort xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt16Int16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ushort> ushortList = xValues as IList<ushort>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ushort, short>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, double>( ushortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ushort, short>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, short>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ushort> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ushort> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ushort>(false) : (UncheckedList<ushort>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ushort* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ushort* numPtr3 = numPtr1;
                        short* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt16Int16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt16Int16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt16Int16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ushort> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ushort> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ushort> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16Int16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ushort> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ushort[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ushort>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ushort* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ushort* numPtr5 = numPtr1;
                    short* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ushort* numPtr10 = (ushort*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ushort* numPtr14 = (ushort*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr16 = (short*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            short* numPtr20 = (short*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr22 = (ushort*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ushort* numPtr26 = (ushort*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr28 = (short*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            short* numPtr32 = (short*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr34 = (ushort*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ushort* numPtr38 = (ushort*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr40 = (short*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            short* numPtr44 = (short*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr46 = (ushort*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ushort* numPtr50 = (ushort*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr52 = (short*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ushort* numPtr54 = (ushort*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            short* numPtr56 = (short*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ushort* numPtr58 = (ushort*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            short* numPtr60 = (short*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ushort* numPtr62 = (ushort*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            short* numPtr64 = (short*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ushort* numPtr66 = (ushort*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            short* numPtr68 = (short*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ushort* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( short* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16Int16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ushort xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt16UInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ushort> ushortList = xValues as IList<ushort>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ushort, ushort>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, double>( ushortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ushort, ushort>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, ushort>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ushort> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ushort> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ushort>(false) : (UncheckedList<ushort>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ushort* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ushort* numPtr3 = numPtr1;
                        ushort* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt16UInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt16UInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ushort> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ushort> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ushort> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ushort> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ushort[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ushort>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ushort* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ushort* numPtr5 = numPtr1;
                    ushort* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ushort* numPtr10 = (ushort*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ushort* numPtr14 = (ushort*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr16 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ushort* numPtr20 = (ushort*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr22 = (ushort*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ushort* numPtr26 = (ushort*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr28 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ushort* numPtr32 = (ushort*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr34 = (ushort*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ushort* numPtr38 = (ushort*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr40 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ushort* numPtr44 = (ushort*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr46 = (ushort*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ushort* numPtr50 = (ushort*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr52 = (ushort*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ushort* numPtr54 = (ushort*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ushort* numPtr56 = (ushort*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ushort* numPtr58 = (ushort*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ushort* numPtr60 = (ushort*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ushort* numPtr62 = (ushort*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ushort* numPtr64 = (ushort*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ushort* numPtr66 = (ushort*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ushort* numPtr68 = (ushort*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ushort* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ushort* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16UInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ushort xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt16ByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ushort> ushortList = xValues as IList<ushort>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ushort, byte>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, double>( ushortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ushort, byte>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, byte>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ushort> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ushort> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ushort>(false) : (UncheckedList<ushort>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ushort* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ushort* numPtr3 = numPtr1;
                        byte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt16ByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16ByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt16ByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt16ByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ushort> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ushort> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ushort> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16ByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ushort> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ushort[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ushort>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ushort* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ushort* numPtr5 = numPtr1;
                    byte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ushort* numPtr10 = (ushort*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ushort* numPtr14 = (ushort*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            byte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr22 = (ushort*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            byte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ushort* numPtr26 = (ushort*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            byte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr34 = (ushort*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            byte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ushort* numPtr38 = (ushort*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            byte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr46 = (ushort*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            byte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ushort* numPtr50 = (ushort*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ushort* numPtr54 = (ushort*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            byte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ushort* numPtr58 = (ushort*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            byte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ushort* numPtr62 = (ushort*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            byte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ushort* numPtr66 = (ushort*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            byte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ushort* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16ByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ushort xValue )
            {
                return ( double ) xValue;
            }
        }

        private class UInt16SByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<ushort> ushortList = xValues as IList<ushort>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<ushort, sbyte>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, double>( ushortList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<ushort, sbyte>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<ushort, sbyte>( ushortList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( ushortList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<ushort> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<ushort> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<ushort>(false) : (UncheckedList<ushort>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( ushort* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        ushort* numPtr3 = numPtr1;
                        sbyte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.UInt16SByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            numPtr3 += 2;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16SByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.UInt16SByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.UInt16SByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<ushort> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<ushort> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<ushort> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.UInt16SByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<ushort> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                ushort[] uncheckedList1 = xDoubleColumn.ToUncheckedList<ushort>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( ushort* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    ushort* numPtr5 = numPtr1;
                    sbyte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            ushort* numPtr10 = (ushort*) ((IntPtr) numPtr5 + 2);
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            ushort* numPtr14 = (ushort*) ((IntPtr) numPtr10 + 2);
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr14 + 2);
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            sbyte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr22 = (ushort*) ((IntPtr) numPtr18 + 2);
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            sbyte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            ushort* numPtr26 = (ushort*) ((IntPtr) numPtr22 + 2);
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr26 + 2);
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            sbyte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr34 = (ushort*) ((IntPtr) numPtr30 + 2);
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            sbyte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            ushort* numPtr38 = (ushort*) ((IntPtr) numPtr34 + 2);
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr38 + 2);
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            sbyte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr46 = (ushort*) ((IntPtr) numPtr42 + 2);
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            sbyte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            ushort* numPtr50 = (ushort*) ((IntPtr) numPtr46 + 2);
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            ushort* numPtr54 = (ushort*) ((IntPtr) numPtr50 + 2);
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            sbyte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            ushort* numPtr58 = (ushort*) ((IntPtr) numPtr54 + 2);
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            sbyte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            ushort* numPtr62 = (ushort*) ((IntPtr) numPtr58 + 2);
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            sbyte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            ushort* numPtr66 = (ushort*) ((IntPtr) numPtr62 + 2);
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            sbyte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = ( ushort* ) ( ( IntPtr ) numPtr66 + 2 );
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.UInt16SByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        numPtr5 += 2;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( ushort xValue )
            {
                return ( double ) xValue;
            }
        }

        private class ByteDoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<byte> byteList = xValues as IList<byte>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( byteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<byte, double>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, double>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<byte, double>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, double>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( byteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<byte> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<byte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<byte>(false) : (UncheckedList<byte>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( byte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        byte* numPtr3 = numPtr1;
                        double* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.ByteDoubleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.ByteDoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.ByteDoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.ByteDoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<byte> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<byte> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<byte> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<byte> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                byte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<byte>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( byte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    byte* numPtr5 = numPtr1;
                    double* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            byte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            byte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr16 = (double*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            byte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            double* numPtr20 = (double*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            byte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr28 = (double*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            byte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            double* numPtr32 = (double*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            byte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr40 = (double*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            byte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            double* numPtr44 = (double*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            byte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr52 = (double*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            byte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            double* numPtr56 = (double*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            byte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            double* numPtr60 = (double*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            byte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            double* numPtr64 = (double*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            byte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            double* numPtr68 = (double*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteDoubleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( byte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class ByteSingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<byte> byteList = xValues as IList<byte>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( byteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<byte, float>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, double>( byteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<byte, float>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, float>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( byteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<byte> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<byte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<byte>(false) : (UncheckedList<byte>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( byte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        byte* numPtr3 = numPtr1;
                        float* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr4;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.ByteSingleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.ByteSingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.ByteSingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.ByteSingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<byte> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<byte> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<byte> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<byte> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                byte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<byte>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( byte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    byte* numPtr5 = numPtr1;
                    float* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            byte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            byte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr16 = (float*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            byte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            float* numPtr20 = (float*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            byte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr28 = (float*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            byte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            float* numPtr32 = (float*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            byte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr40 = (float*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            byte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            float* numPtr44 = (float*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            byte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr52 = (float*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            byte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            float* numPtr56 = (float*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            byte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            float* numPtr60 = (float*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            byte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            float* numPtr64 = (float*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            byte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            float* numPtr68 = (float*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( float* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteSingleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( byte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class ByteInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<byte> byteList = xValues as IList<byte>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( byteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<byte, int>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, double>( byteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<byte, int>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, int>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( byteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<byte> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<byte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<byte>(false) : (UncheckedList<byte>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( byte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        byte* numPtr3 = numPtr1;
                        int* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.ByteInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.ByteInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.ByteInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<byte> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<byte> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<byte> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<byte> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                byte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<byte>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( byte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    byte* numPtr5 = numPtr1;
                    int* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            byte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            byte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr16 = (int*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            byte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            int* numPtr20 = (int*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            byte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr28 = (int*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            byte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            int* numPtr32 = (int*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            byte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr40 = (int*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            byte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            int* numPtr44 = (int*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            byte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr52 = (int*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            byte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            int* numPtr56 = (int*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            byte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            int* numPtr60 = (int*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            byte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            int* numPtr64 = (int*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            byte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            int* numPtr68 = (int*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( int* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( byte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class ByteUInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<byte> byteList = xValues as IList<byte>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( byteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<byte, uint>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, double>( byteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<byte, uint>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, uint>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( byteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<byte> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<byte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<byte>(false) : (UncheckedList<byte>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( byte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        byte* numPtr3 = numPtr1;
                        uint* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.ByteUInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.ByteUInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.ByteUInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<byte> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<byte> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<byte> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<byte> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                byte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<byte>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( byte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    byte* numPtr5 = numPtr1;
                    uint* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            byte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            byte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr16 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            byte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            uint* numPtr20 = (uint*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            byte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr28 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            byte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            uint* numPtr32 = (uint*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            byte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr40 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            byte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            uint* numPtr44 = (uint*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            byte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr52 = (uint*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            byte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            uint* numPtr56 = (uint*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            byte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            uint* numPtr60 = (uint*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            byte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            uint* numPtr64 = (uint*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            byte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            uint* numPtr68 = (uint*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( uint* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteUInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( byte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class ByteInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<byte> byteList = xValues as IList<byte>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( byteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<byte, long>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, double>( byteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<byte, long>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, long>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( byteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<byte> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<byte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<byte>(false) : (UncheckedList<byte>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( byte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        byte* numPtr3 = numPtr1;
                        long* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.ByteInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.ByteInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.ByteInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<byte> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<byte> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<byte> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<byte> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                byte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<byte>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( byte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    byte* numPtr5 = numPtr1;
                    long* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            byte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            byte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr16 = (long*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            byte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            long* numPtr20 = (long*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            byte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr28 = (long*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            byte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            long* numPtr32 = (long*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            byte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr40 = (long*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            byte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            long* numPtr44 = (long*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            byte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr52 = (long*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            byte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            long* numPtr56 = (long*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            byte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            long* numPtr60 = (long*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            byte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            long* numPtr64 = (long*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            byte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            long* numPtr68 = (long*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( long* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( byte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class ByteUInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<byte> byteList = xValues as IList<byte>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( byteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<byte, ulong>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, double>( byteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<byte, ulong>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, ulong>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( byteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<byte> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<byte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<byte>(false) : (UncheckedList<byte>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( byte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        byte* numPtr3 = numPtr1;
                        ulong* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.ByteUInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.ByteUInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.ByteUInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<byte> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<byte> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<byte> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<byte> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                byte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<byte>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( byte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    byte* numPtr5 = numPtr1;
                    ulong* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            byte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            byte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr16 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            byte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ulong* numPtr20 = (ulong*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            byte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr28 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            byte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ulong* numPtr32 = (ulong*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            byte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr40 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            byte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ulong* numPtr44 = (ulong*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            byte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr52 = (ulong*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            byte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ulong* numPtr56 = (ulong*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            byte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ulong* numPtr60 = (ulong*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            byte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ulong* numPtr64 = (ulong*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            byte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ulong* numPtr68 = (ulong*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ulong* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteUInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( byte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class ByteInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<byte> byteList = xValues as IList<byte>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( byteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<byte, short>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, double>( byteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<byte, short>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, short>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( byteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<byte> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<byte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<byte>(false) : (UncheckedList<byte>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( byte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        byte* numPtr3 = numPtr1;
                        short* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.ByteInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.ByteInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.ByteInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<byte> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<byte> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<byte> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<byte> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                byte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<byte>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( byte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    byte* numPtr5 = numPtr1;
                    short* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            byte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            byte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr16 = (short*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            byte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            short* numPtr20 = (short*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            byte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr28 = (short*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            byte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            short* numPtr32 = (short*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            byte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr40 = (short*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            byte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            short* numPtr44 = (short*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            byte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr52 = (short*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            byte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            short* numPtr56 = (short*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            byte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            short* numPtr60 = (short*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            byte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            short* numPtr64 = (short*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            byte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            short* numPtr68 = (short*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( short* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( byte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class ByteUInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<byte> byteList = xValues as IList<byte>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( byteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<byte, ushort>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, double>( byteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<byte, ushort>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, ushort>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( byteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<byte> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<byte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<byte>(false) : (UncheckedList<byte>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( byte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        byte* numPtr3 = numPtr1;
                        ushort* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.ByteUInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.ByteUInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.ByteUInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<byte> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<byte> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<byte> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<byte> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                byte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<byte>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( byte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    byte* numPtr5 = numPtr1;
                    ushort* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            byte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            byte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr16 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            byte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ushort* numPtr20 = (ushort*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            byte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr28 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            byte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ushort* numPtr32 = (ushort*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            byte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr40 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            byte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ushort* numPtr44 = (ushort*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            byte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr52 = (ushort*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            byte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ushort* numPtr56 = (ushort*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            byte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ushort* numPtr60 = (ushort*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            byte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ushort* numPtr64 = (ushort*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            byte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ushort* numPtr68 = (ushort*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ushort* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteUInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( byte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class ByteByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<byte> byteList = xValues as IList<byte>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( byteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<byte, byte>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, double>( byteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<byte, byte>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, byte>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( byteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<byte> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<byte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<byte>(false) : (UncheckedList<byte>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( byte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        byte* numPtr3 = numPtr1;
                        byte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.ByteByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.ByteByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.ByteByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.ByteByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<byte> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<byte> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<byte> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<byte> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                byte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<byte>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( byte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    byte* numPtr5 = numPtr1;
                    byte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            byte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            byte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            byte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            byte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            byte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            byte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            byte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            byte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            byte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            byte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            byte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            byte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            byte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            byte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            byte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            byte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            byte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            byte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            byte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            byte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            byte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            byte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( byte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class ByteSByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<byte> byteList = xValues as IList<byte>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( byteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<byte, sbyte>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, double>( byteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<byte, sbyte>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<byte, sbyte>( byteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( byteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<byte> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<byte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<byte>(false) : (UncheckedList<byte>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( byte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        byte* numPtr3 = numPtr1;
                        sbyte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.ByteSByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.ByteSByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.ByteSByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.ByteSByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<byte> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<byte> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<byte> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.ByteSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<byte> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                byte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<byte>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( byte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    byte* numPtr5 = numPtr1;
                    sbyte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            byte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            byte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            byte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            sbyte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            sbyte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            byte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            byte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            sbyte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            sbyte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            byte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            byte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            sbyte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            sbyte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            byte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            byte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            sbyte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            byte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            sbyte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            byte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            sbyte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            byte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            sbyte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.ByteSByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( byte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SByteDoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<sbyte> sbyteList = xValues as IList<sbyte>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<sbyte, double>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, double>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<sbyte, double>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, double>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<sbyte> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<sbyte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<sbyte>(false) : (UncheckedList<sbyte>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( sbyte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        sbyte* numPtr3 = numPtr1;
                        double* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SByteDoubleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SByteDoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SByteDoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SByteDoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<sbyte> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<sbyte> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<sbyte> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<sbyte> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                sbyte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<sbyte>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( sbyte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    sbyte* numPtr5 = numPtr1;
                    double* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            sbyte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            sbyte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr16 = (double*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            sbyte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            double* numPtr20 = (double*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            sbyte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr28 = (double*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            sbyte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            double* numPtr32 = (double*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            sbyte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr40 = (double*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            sbyte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            double* numPtr44 = (double*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            sbyte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr52 = (double*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            sbyte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            double* numPtr56 = (double*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            sbyte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            double* numPtr60 = (double*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            sbyte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            double* numPtr64 = (double*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            sbyte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            double* numPtr68 = (double*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteDoubleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( sbyte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SByteSingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<sbyte> sbyteList = xValues as IList<sbyte>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<sbyte, float>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, double>( sbyteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<sbyte, float>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, float>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<sbyte> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<sbyte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<sbyte>(false) : (UncheckedList<sbyte>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( sbyte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        sbyte* numPtr3 = numPtr1;
                        float* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr4;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SByteSingleResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SByteSingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SByteSingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SByteSingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<sbyte> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<sbyte> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<sbyte> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<sbyte> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                sbyte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<sbyte>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( sbyte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    sbyte* numPtr5 = numPtr1;
                    float* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            sbyte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            sbyte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr16 = (float*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            sbyte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            float* numPtr20 = (float*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            sbyte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr28 = (float*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            sbyte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            float* numPtr32 = (float*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            sbyte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr40 = (float*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            sbyte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            float* numPtr44 = (float*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            sbyte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr52 = (float*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            sbyte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            float* numPtr56 = (float*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            sbyte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            float* numPtr60 = (float*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            sbyte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            float* numPtr64 = (float*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            sbyte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            float* numPtr68 = (float*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( float* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteSingleResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( sbyte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SByteInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<sbyte> sbyteList = xValues as IList<sbyte>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<sbyte, int>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, double>( sbyteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<sbyte, int>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, int>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<sbyte> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<sbyte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<sbyte>(false) : (UncheckedList<sbyte>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( sbyte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        sbyte* numPtr3 = numPtr1;
                        int* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SByteInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SByteInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SByteInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<sbyte> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<sbyte> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<sbyte> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<sbyte> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                sbyte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<sbyte>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( sbyte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    sbyte* numPtr5 = numPtr1;
                    int* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            sbyte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            sbyte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr16 = (int*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            sbyte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            int* numPtr20 = (int*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            sbyte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr28 = (int*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            sbyte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            int* numPtr32 = (int*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            sbyte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr40 = (int*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            sbyte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            int* numPtr44 = (int*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            sbyte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr52 = (int*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            sbyte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            int* numPtr56 = (int*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            sbyte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            int* numPtr60 = (int*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            sbyte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            int* numPtr64 = (int*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            sbyte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            int* numPtr68 = (int*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( int* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( sbyte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SByteUInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<sbyte> sbyteList = xValues as IList<sbyte>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<sbyte, uint>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, double>( sbyteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<sbyte, uint>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, uint>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<sbyte> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<sbyte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<sbyte>(false) : (UncheckedList<sbyte>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( sbyte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        sbyte* numPtr3 = numPtr1;
                        uint* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SByteUInt32Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SByteUInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SByteUInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<sbyte> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<sbyte> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<sbyte> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<sbyte> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                sbyte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<sbyte>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( sbyte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    sbyte* numPtr5 = numPtr1;
                    uint* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            sbyte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr6 + 4);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            sbyte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr16 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            sbyte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            uint* numPtr20 = (uint*) ((IntPtr) numPtr16 + 4);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr20 + 4);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            sbyte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr28 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            sbyte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            uint* numPtr32 = (uint*) ((IntPtr) numPtr28 + 4);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr32 + 4);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            sbyte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr40 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            sbyte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            uint* numPtr44 = (uint*) ((IntPtr) numPtr40 + 4);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr44 + 4);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            sbyte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr52 = (uint*) ((IntPtr) numPtr48 + 4);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            sbyte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            uint* numPtr56 = (uint*) ((IntPtr) numPtr52 + 4);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            sbyte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            uint* numPtr60 = (uint*) ((IntPtr) numPtr56 + 4);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            sbyte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            uint* numPtr64 = (uint*) ((IntPtr) numPtr60 + 4);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            sbyte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            uint* numPtr68 = (uint*) ((IntPtr) numPtr64 + 4);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( uint* ) ( ( IntPtr ) numPtr68 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteUInt32Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( sbyte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SByteInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<sbyte> sbyteList = xValues as IList<sbyte>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<sbyte, long>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, double>( sbyteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<sbyte, long>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, long>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<sbyte> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<sbyte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<sbyte>(false) : (UncheckedList<sbyte>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( sbyte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        sbyte* numPtr3 = numPtr1;
                        long* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SByteInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SByteInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SByteInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<sbyte> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<sbyte> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<sbyte> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<sbyte> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                sbyte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<sbyte>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( sbyte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    sbyte* numPtr5 = numPtr1;
                    long* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            sbyte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            sbyte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr16 = (long*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            sbyte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            long* numPtr20 = (long*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            sbyte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr28 = (long*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            sbyte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            long* numPtr32 = (long*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            sbyte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr40 = (long*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            sbyte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            long* numPtr44 = (long*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            sbyte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr52 = (long*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            sbyte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            long* numPtr56 = (long*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            sbyte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            long* numPtr60 = (long*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            sbyte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            long* numPtr64 = (long*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            sbyte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            long* numPtr68 = (long*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( long* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( sbyte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SByteUInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<sbyte> sbyteList = xValues as IList<sbyte>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<sbyte, ulong>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, double>( sbyteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<sbyte, ulong>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, ulong>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<sbyte> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<sbyte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<sbyte>(false) : (UncheckedList<sbyte>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( sbyte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        sbyte* numPtr3 = numPtr1;
                        ulong* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr4;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SByteUInt64Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SByteUInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SByteUInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<sbyte> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<sbyte> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<sbyte> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<sbyte> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                sbyte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<sbyte>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( sbyte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    sbyte* numPtr5 = numPtr1;
                    ulong* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            sbyte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr6 + 8);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            sbyte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr16 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            sbyte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ulong* numPtr20 = (ulong*) ((IntPtr) numPtr16 + 8);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr20 + 8);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            sbyte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr28 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            sbyte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ulong* numPtr32 = (ulong*) ((IntPtr) numPtr28 + 8);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr32 + 8);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            sbyte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr40 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            sbyte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ulong* numPtr44 = (ulong*) ((IntPtr) numPtr40 + 8);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr44 + 8);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            sbyte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr52 = (ulong*) ((IntPtr) numPtr48 + 8);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            sbyte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ulong* numPtr56 = (ulong*) ((IntPtr) numPtr52 + 8);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            sbyte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ulong* numPtr60 = (ulong*) ((IntPtr) numPtr56 + 8);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            sbyte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ulong* numPtr64 = (ulong*) ((IntPtr) numPtr60 + 8);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            sbyte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ulong* numPtr68 = (ulong*) ((IntPtr) numPtr64 + 8);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ulong* ) ( ( IntPtr ) numPtr68 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteUInt64Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( sbyte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SByteInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<sbyte> sbyteList = xValues as IList<sbyte>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<sbyte, short>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, double>( sbyteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<sbyte, short>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, short>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<sbyte> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<sbyte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<sbyte>(false) : (UncheckedList<sbyte>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( sbyte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        sbyte* numPtr3 = numPtr1;
                        short* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SByteInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SByteInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SByteInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<sbyte> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<sbyte> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<sbyte> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<sbyte> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                sbyte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<sbyte>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( sbyte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    sbyte* numPtr5 = numPtr1;
                    short* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            sbyte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            sbyte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr16 = (short*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            sbyte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            short* numPtr20 = (short*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            sbyte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr28 = (short*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            sbyte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            short* numPtr32 = (short*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            sbyte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr40 = (short*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            sbyte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            short* numPtr44 = (short*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            sbyte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr52 = (short*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            sbyte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            short* numPtr56 = (short*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            sbyte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            short* numPtr60 = (short*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            sbyte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            short* numPtr64 = (short*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            sbyte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            short* numPtr68 = (short*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( short* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( sbyte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SByteUInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<sbyte> sbyteList = xValues as IList<sbyte>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<sbyte, ushort>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, double>( sbyteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<sbyte, ushort>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, ushort>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<sbyte> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<sbyte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<sbyte>(false) : (UncheckedList<sbyte>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( sbyte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        sbyte* numPtr3 = numPtr1;
                        ushort* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SByteUInt16Resampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            numPtr4 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SByteUInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SByteUInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<sbyte> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<sbyte> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<sbyte> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<sbyte> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                sbyte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<sbyte>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( sbyte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    sbyte* numPtr5 = numPtr1;
                    ushort* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            sbyte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr6 + 2);
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            sbyte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr16 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            sbyte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            ushort* numPtr20 = (ushort*) ((IntPtr) numPtr16 + 2);
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr20 + 2);
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            sbyte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr28 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            sbyte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            ushort* numPtr32 = (ushort*) ((IntPtr) numPtr28 + 2);
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr32 + 2);
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            sbyte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr40 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            sbyte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            ushort* numPtr44 = (ushort*) ((IntPtr) numPtr40 + 2);
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr44 + 2);
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            sbyte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr52 = (ushort*) ((IntPtr) numPtr48 + 2);
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            sbyte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            ushort* numPtr56 = (ushort*) ((IntPtr) numPtr52 + 2);
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            sbyte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            ushort* numPtr60 = (ushort*) ((IntPtr) numPtr56 + 2);
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            sbyte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            ushort* numPtr64 = (ushort*) ((IntPtr) numPtr60 + 2);
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            sbyte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            ushort* numPtr68 = (ushort*) ((IntPtr) numPtr64 + 2);
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = ( ushort* ) ( ( IntPtr ) numPtr68 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteUInt16Resampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        numPtr6 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( sbyte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SByteByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<sbyte> sbyteList = xValues as IList<sbyte>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<sbyte, byte>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, double>( sbyteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<sbyte, byte>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, byte>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<sbyte> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<sbyte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<sbyte>(false) : (UncheckedList<sbyte>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( sbyte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        sbyte* numPtr3 = numPtr1;
                        byte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SByteByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SByteByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SByteByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SByteByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<sbyte> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<sbyte> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<sbyte> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<sbyte> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                sbyte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<sbyte>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( sbyte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    sbyte* numPtr5 = numPtr1;
                    byte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            sbyte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            sbyte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            sbyte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            byte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            byte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            sbyte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            sbyte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            byte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            byte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            sbyte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            sbyte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            byte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            byte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            sbyte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            sbyte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            byte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            sbyte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            byte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            sbyte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            byte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            sbyte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            byte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( sbyte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class SByteSByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<sbyte> sbyteList = xValues as IList<sbyte>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<sbyte, sbyte>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, double>( sbyteList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<sbyte, sbyte>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<sbyte, sbyte>( sbyteList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( sbyteList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<sbyte> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<sbyte> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<sbyte>(false) : (UncheckedList<sbyte>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( sbyte* numPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr2 = &uncheckedList2.Array[ min ] )
                    {
                        sbyte* numPtr3 = numPtr1;
                        sbyte* numPtr4 = numPtr2;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr4;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.SByteSByteResampler.TxToDouble(*numPtr3);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++numPtr3;
                            ++numPtr4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.SByteSByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.SByteSByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.SByteSByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<sbyte> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<sbyte> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<sbyte> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.SByteSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<sbyte> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                sbyte[] uncheckedList1 = xDoubleColumn.ToUncheckedList<sbyte>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( sbyte* numPtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr2 = &uncheckedList2[ min ] )
                fixed ( double* numPtr3 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr4 = &uncheckedList4[ 0 ] )
                {
                    sbyte* numPtr5 = numPtr1;
                    sbyte* numPtr6 = numPtr2;
                    double* numPtr7 = numPtr3;
                    double* numPtr8 = numPtr4;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr5 );
                            *numPtr8 = ( double ) *numPtr6;
                            double* numPtr9 = (double*) ((IntPtr) numPtr7 + 8);
                            sbyte* numPtr10 = numPtr5 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr6 + 1;
                            int num4 = num2 + 1;
                            *numPtr9 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr10 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr9 + 8);
                            sbyte* numPtr14 = numPtr10 + 1;
                            double* numPtr15 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr16 = numPtr12 + 1;
                            int num5 = num4 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr14 );
                            *numPtr15 = ( double ) *numPtr16;
                            double* numPtr17 = (double*) ((IntPtr) numPtr13 + 8);
                            sbyte* numPtr18 = numPtr14 + 1;
                            double* numPtr19 = (double*) ((IntPtr) numPtr15 + 8);
                            sbyte* numPtr20 = numPtr16 + 1;
                            int num6 = num5 + 1;
                            *numPtr17 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr18 );
                            *numPtr19 = ( double ) *numPtr20;
                            double* numPtr21 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr22 = numPtr18 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr19 + 8);
                            sbyte* numPtr24 = numPtr20 + 1;
                            int num7 = num6 + 1;
                            *numPtr21 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr22 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr21 + 8);
                            sbyte* numPtr26 = numPtr22 + 1;
                            double* numPtr27 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr28 = numPtr24 + 1;
                            int num8 = num7 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr26 );
                            *numPtr27 = ( double ) *numPtr28;
                            double* numPtr29 = (double*) ((IntPtr) numPtr25 + 8);
                            sbyte* numPtr30 = numPtr26 + 1;
                            double* numPtr31 = (double*) ((IntPtr) numPtr27 + 8);
                            sbyte* numPtr32 = numPtr28 + 1;
                            int num9 = num8 + 1;
                            *numPtr29 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr30 );
                            *numPtr31 = ( double ) *numPtr32;
                            double* numPtr33 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr34 = numPtr30 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr31 + 8);
                            sbyte* numPtr36 = numPtr32 + 1;
                            int num10 = num9 + 1;
                            *numPtr33 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr34 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr33 + 8);
                            sbyte* numPtr38 = numPtr34 + 1;
                            double* numPtr39 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr40 = numPtr36 + 1;
                            int num11 = num10 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr38 );
                            *numPtr39 = ( double ) *numPtr40;
                            double* numPtr41 = (double*) ((IntPtr) numPtr37 + 8);
                            sbyte* numPtr42 = numPtr38 + 1;
                            double* numPtr43 = (double*) ((IntPtr) numPtr39 + 8);
                            sbyte* numPtr44 = numPtr40 + 1;
                            int num12 = num11 + 1;
                            *numPtr41 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr42 );
                            *numPtr43 = ( double ) *numPtr44;
                            double* numPtr45 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr46 = numPtr42 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr43 + 8);
                            sbyte* numPtr48 = numPtr44 + 1;
                            int num13 = num12 + 1;
                            *numPtr45 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr46 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr45 + 8);
                            sbyte* numPtr50 = numPtr46 + 1;
                            double* numPtr51 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr52 = numPtr48 + 1;
                            int num14 = num13 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr50 );
                            *numPtr51 = ( double ) *numPtr52;
                            double* numPtr53 = (double*) ((IntPtr) numPtr49 + 8);
                            sbyte* numPtr54 = numPtr50 + 1;
                            double* numPtr55 = (double*) ((IntPtr) numPtr51 + 8);
                            sbyte* numPtr56 = numPtr52 + 1;
                            int num15 = num14 + 1;
                            *numPtr53 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr54 );
                            *numPtr55 = ( double ) *numPtr56;
                            double* numPtr57 = (double*) ((IntPtr) numPtr53 + 8);
                            sbyte* numPtr58 = numPtr54 + 1;
                            double* numPtr59 = (double*) ((IntPtr) numPtr55 + 8);
                            sbyte* numPtr60 = numPtr56 + 1;
                            int num16 = num15 + 1;
                            *numPtr57 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr58 );
                            *numPtr59 = ( double ) *numPtr60;
                            double* numPtr61 = (double*) ((IntPtr) numPtr57 + 8);
                            sbyte* numPtr62 = numPtr58 + 1;
                            double* numPtr63 = (double*) ((IntPtr) numPtr59 + 8);
                            sbyte* numPtr64 = numPtr60 + 1;
                            int num17 = num16 + 1;
                            *numPtr61 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr62 );
                            *numPtr63 = ( double ) *numPtr64;
                            double* numPtr65 = (double*) ((IntPtr) numPtr61 + 8);
                            sbyte* numPtr66 = numPtr62 + 1;
                            double* numPtr67 = (double*) ((IntPtr) numPtr63 + 8);
                            sbyte* numPtr68 = numPtr64 + 1;
                            num3 = num17 + 1;
                            *numPtr65 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr66 );
                            *numPtr67 = ( double ) *numPtr68;
                            numPtr7 = ( double* ) ( ( IntPtr ) numPtr65 + 8 );
                            numPtr5 = numPtr66 + 1;
                            numPtr8 = ( double* ) ( ( IntPtr ) numPtr67 + 8 );
                            numPtr6 = numPtr68 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr7 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.SByteSByteResampler.TxToDouble( *numPtr5 );
                        *numPtr8 = ( double ) *numPtr6;
                        numPtr7 += 8;
                        ++numPtr5;
                        numPtr8 += 8;
                        ++numPtr6;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( sbyte xValue )
            {
                return ( double ) xValue;
            }
        }

        private class DateTimeDoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<DateTime> dateTimeList = xValues as IList<DateTime>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<DateTime, double>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, double>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<DateTime, double>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, double>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<DateTime> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<DateTime> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<DateTime>(false) : (UncheckedList<DateTime>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( DateTime* dateTimePtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        DateTime* dateTimePtr2 = dateTimePtr1;
                        double* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr2;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DateTimeDoubleResampler.TxToDouble(*dateTimePtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++dateTimePtr2;
                            numPtr2 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DateTimeDoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<DateTime> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<DateTime> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<DateTime> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<DateTime> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                DateTime[] uncheckedList1 = xDoubleColumn.ToUncheckedList<DateTime>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( DateTime* dateTimePtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    DateTime* dateTimePtr2 = dateTimePtr1;
                    double* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr2 );
                            *numPtr6 = *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            DateTime* dateTimePtr3 = dateTimePtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            double* numPtr9 = (double*) ((IntPtr) numPtr4 + 8);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr3 );
                            *numPtr8 = *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            DateTime* dateTimePtr4 = dateTimePtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr9 + 8);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr4 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            DateTime* dateTimePtr5 = dateTimePtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr12 + 8);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr5 );
                            *numPtr14 = *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            DateTime* dateTimePtr6 = dateTimePtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr15 + 8);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr6 );
                            *numPtr17 = *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            DateTime* dateTimePtr7 = dateTimePtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr21 = (double*) ((IntPtr) numPtr18 + 8);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr7 );
                            *numPtr20 = *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            DateTime* dateTimePtr8 = dateTimePtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr21 + 8);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr8 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            DateTime* dateTimePtr9 = dateTimePtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr24 + 8);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr9 );
                            *numPtr26 = *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            DateTime* dateTimePtr10 = dateTimePtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr27 + 8);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr10 );
                            *numPtr29 = *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            DateTime* dateTimePtr11 = dateTimePtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr33 = (double*) ((IntPtr) numPtr30 + 8);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr11 );
                            *numPtr32 = *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            DateTime* dateTimePtr12 = dateTimePtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr33 + 8);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr12 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            DateTime* dateTimePtr13 = dateTimePtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr36 + 8);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr13 );
                            *numPtr38 = *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            DateTime* dateTimePtr14 = dateTimePtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr39 + 8);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr14 );
                            *numPtr41 = *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            DateTime* dateTimePtr15 = dateTimePtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr45 = (double*) ((IntPtr) numPtr42 + 8);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr15 );
                            *numPtr44 = *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            DateTime* dateTimePtr16 = dateTimePtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr45 + 8);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr16 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            DateTime* dateTimePtr17 = dateTimePtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr48 + 8);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr17 );
                            *numPtr50 = *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            dateTimePtr2 = dateTimePtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( double* ) ( ( IntPtr ) numPtr51 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeDoubleResampler.TxToDouble( *dateTimePtr2 );
                        *numPtr6 = *numPtr4;
                        numPtr5 += 8;
                        ++dateTimePtr2;
                        numPtr6 += 8;
                        numPtr4 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( DateTime xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class DateTimeSingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<DateTime> dateTimeList = xValues as IList<DateTime>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<DateTime, float>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, double>( dateTimeList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<DateTime, float>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, float>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<DateTime> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<DateTime> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<DateTime>(false) : (UncheckedList<DateTime>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( DateTime* dateTimePtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        DateTime* dateTimePtr2 = dateTimePtr1;
                        float* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr2;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DateTimeSingleResampler.TxToDouble(*dateTimePtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++dateTimePtr2;
                            numPtr2 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeSingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DateTimeSingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DateTimeSingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<DateTime> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<DateTime> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<DateTime> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<DateTime> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                DateTime[] uncheckedList1 = xDoubleColumn.ToUncheckedList<DateTime>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( DateTime* dateTimePtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    DateTime* dateTimePtr2 = dateTimePtr1;
                    float* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            DateTime* dateTimePtr3 = dateTimePtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            float* numPtr9 = (float*) ((IntPtr) numPtr4 + 4);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            DateTime* dateTimePtr4 = dateTimePtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr9 + 4);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            DateTime* dateTimePtr5 = dateTimePtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr15 = (float*) ((IntPtr) numPtr12 + 4);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            DateTime* dateTimePtr6 = dateTimePtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr15 + 4);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            DateTime* dateTimePtr7 = dateTimePtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr21 = (float*) ((IntPtr) numPtr18 + 4);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            DateTime* dateTimePtr8 = dateTimePtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr21 + 4);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            DateTime* dateTimePtr9 = dateTimePtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr27 = (float*) ((IntPtr) numPtr24 + 4);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            DateTime* dateTimePtr10 = dateTimePtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr27 + 4);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            DateTime* dateTimePtr11 = dateTimePtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr33 = (float*) ((IntPtr) numPtr30 + 4);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            DateTime* dateTimePtr12 = dateTimePtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr33 + 4);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            DateTime* dateTimePtr13 = dateTimePtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr39 = (float*) ((IntPtr) numPtr36 + 4);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            DateTime* dateTimePtr14 = dateTimePtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr39 + 4);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            DateTime* dateTimePtr15 = dateTimePtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr45 = (float*) ((IntPtr) numPtr42 + 4);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            DateTime* dateTimePtr16 = dateTimePtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr45 + 4);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            DateTime* dateTimePtr17 = dateTimePtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr51 = (float*) ((IntPtr) numPtr48 + 4);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            dateTimePtr2 = dateTimePtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( float* ) ( ( IntPtr ) numPtr51 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeSingleResampler.TxToDouble( *dateTimePtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++dateTimePtr2;
                        numPtr6 += 8;
                        numPtr4 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( DateTime xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class DateTimeInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<DateTime> dateTimeList = xValues as IList<DateTime>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<DateTime, int>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, double>( dateTimeList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<DateTime, int>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, int>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<DateTime> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<DateTime> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<DateTime>(false) : (UncheckedList<DateTime>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( DateTime* dateTimePtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        DateTime* dateTimePtr2 = dateTimePtr1;
                        int* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr2;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DateTimeInt32Resampler.TxToDouble(*dateTimePtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++dateTimePtr2;
                            numPtr2 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DateTimeInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<DateTime> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<DateTime> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<DateTime> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<DateTime> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                DateTime[] uncheckedList1 = xDoubleColumn.ToUncheckedList<DateTime>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( DateTime* dateTimePtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    DateTime* dateTimePtr2 = dateTimePtr1;
                    int* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            DateTime* dateTimePtr3 = dateTimePtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            int* numPtr9 = (int*) ((IntPtr) numPtr4 + 4);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            DateTime* dateTimePtr4 = dateTimePtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr9 + 4);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            DateTime* dateTimePtr5 = dateTimePtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr15 = (int*) ((IntPtr) numPtr12 + 4);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            DateTime* dateTimePtr6 = dateTimePtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr15 + 4);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            DateTime* dateTimePtr7 = dateTimePtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr21 = (int*) ((IntPtr) numPtr18 + 4);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            DateTime* dateTimePtr8 = dateTimePtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr21 + 4);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            DateTime* dateTimePtr9 = dateTimePtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr27 = (int*) ((IntPtr) numPtr24 + 4);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            DateTime* dateTimePtr10 = dateTimePtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr27 + 4);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            DateTime* dateTimePtr11 = dateTimePtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr33 = (int*) ((IntPtr) numPtr30 + 4);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            DateTime* dateTimePtr12 = dateTimePtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr33 + 4);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            DateTime* dateTimePtr13 = dateTimePtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr39 = (int*) ((IntPtr) numPtr36 + 4);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            DateTime* dateTimePtr14 = dateTimePtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr39 + 4);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            DateTime* dateTimePtr15 = dateTimePtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr45 = (int*) ((IntPtr) numPtr42 + 4);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            DateTime* dateTimePtr16 = dateTimePtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr45 + 4);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            DateTime* dateTimePtr17 = dateTimePtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr51 = (int*) ((IntPtr) numPtr48 + 4);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            dateTimePtr2 = dateTimePtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( int* ) ( ( IntPtr ) numPtr51 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeInt32Resampler.TxToDouble( *dateTimePtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++dateTimePtr2;
                        numPtr6 += 8;
                        numPtr4 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( DateTime xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class DateTimeUInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<DateTime> dateTimeList = xValues as IList<DateTime>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<DateTime, uint>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, double>( dateTimeList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<DateTime, uint>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, uint>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<DateTime> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<DateTime> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<DateTime>(false) : (UncheckedList<DateTime>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( DateTime* dateTimePtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        DateTime* dateTimePtr2 = dateTimePtr1;
                        uint* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr2;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble(*dateTimePtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++dateTimePtr2;
                            numPtr2 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<DateTime> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<DateTime> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<DateTime> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<DateTime> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                DateTime[] uncheckedList1 = xDoubleColumn.ToUncheckedList<DateTime>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( DateTime* dateTimePtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    DateTime* dateTimePtr2 = dateTimePtr1;
                    uint* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            DateTime* dateTimePtr3 = dateTimePtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            uint* numPtr9 = (uint*) ((IntPtr) numPtr4 + 4);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            DateTime* dateTimePtr4 = dateTimePtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr9 + 4);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            DateTime* dateTimePtr5 = dateTimePtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr15 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            DateTime* dateTimePtr6 = dateTimePtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr15 + 4);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            DateTime* dateTimePtr7 = dateTimePtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr21 = (uint*) ((IntPtr) numPtr18 + 4);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            DateTime* dateTimePtr8 = dateTimePtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr21 + 4);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            DateTime* dateTimePtr9 = dateTimePtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr27 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            DateTime* dateTimePtr10 = dateTimePtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr27 + 4);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            DateTime* dateTimePtr11 = dateTimePtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr33 = (uint*) ((IntPtr) numPtr30 + 4);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            DateTime* dateTimePtr12 = dateTimePtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr33 + 4);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            DateTime* dateTimePtr13 = dateTimePtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr39 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            DateTime* dateTimePtr14 = dateTimePtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr39 + 4);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            DateTime* dateTimePtr15 = dateTimePtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr45 = (uint*) ((IntPtr) numPtr42 + 4);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            DateTime* dateTimePtr16 = dateTimePtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr45 + 4);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            DateTime* dateTimePtr17 = dateTimePtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr51 = (uint*) ((IntPtr) numPtr48 + 4);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            dateTimePtr2 = dateTimePtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( uint* ) ( ( IntPtr ) numPtr51 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeUInt32Resampler.TxToDouble( *dateTimePtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++dateTimePtr2;
                        numPtr6 += 8;
                        numPtr4 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( DateTime xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class DateTimeInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<DateTime> dateTimeList = xValues as IList<DateTime>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<DateTime, long>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, double>( dateTimeList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<DateTime, long>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, long>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<DateTime> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<DateTime> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<DateTime>(false) : (UncheckedList<DateTime>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( DateTime* dateTimePtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        DateTime* dateTimePtr2 = dateTimePtr1;
                        long* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr2;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DateTimeInt64Resampler.TxToDouble(*dateTimePtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++dateTimePtr2;
                            numPtr2 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DateTimeInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<DateTime> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<DateTime> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<DateTime> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<DateTime> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                DateTime[] uncheckedList1 = xDoubleColumn.ToUncheckedList<DateTime>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( DateTime* dateTimePtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    DateTime* dateTimePtr2 = dateTimePtr1;
                    long* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            DateTime* dateTimePtr3 = dateTimePtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            long* numPtr9 = (long*) ((IntPtr) numPtr4 + 8);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            DateTime* dateTimePtr4 = dateTimePtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr9 + 8);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            DateTime* dateTimePtr5 = dateTimePtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr15 = (long*) ((IntPtr) numPtr12 + 8);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            DateTime* dateTimePtr6 = dateTimePtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr15 + 8);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            DateTime* dateTimePtr7 = dateTimePtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr21 = (long*) ((IntPtr) numPtr18 + 8);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            DateTime* dateTimePtr8 = dateTimePtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr21 + 8);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            DateTime* dateTimePtr9 = dateTimePtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr27 = (long*) ((IntPtr) numPtr24 + 8);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            DateTime* dateTimePtr10 = dateTimePtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr27 + 8);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            DateTime* dateTimePtr11 = dateTimePtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr33 = (long*) ((IntPtr) numPtr30 + 8);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            DateTime* dateTimePtr12 = dateTimePtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr33 + 8);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            DateTime* dateTimePtr13 = dateTimePtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr39 = (long*) ((IntPtr) numPtr36 + 8);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            DateTime* dateTimePtr14 = dateTimePtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr39 + 8);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            DateTime* dateTimePtr15 = dateTimePtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr45 = (long*) ((IntPtr) numPtr42 + 8);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            DateTime* dateTimePtr16 = dateTimePtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr45 + 8);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            DateTime* dateTimePtr17 = dateTimePtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr51 = (long*) ((IntPtr) numPtr48 + 8);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            dateTimePtr2 = dateTimePtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( long* ) ( ( IntPtr ) numPtr51 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeInt64Resampler.TxToDouble( *dateTimePtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++dateTimePtr2;
                        numPtr6 += 8;
                        numPtr4 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( DateTime xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class DateTimeUInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<DateTime> dateTimeList = xValues as IList<DateTime>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<DateTime, ulong>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, double>( dateTimeList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<DateTime, ulong>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, ulong>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<DateTime> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<DateTime> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<DateTime>(false) : (UncheckedList<DateTime>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( DateTime* dateTimePtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        DateTime* dateTimePtr2 = dateTimePtr1;
                        ulong* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr2;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble(*dateTimePtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++dateTimePtr2;
                            numPtr2 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<DateTime> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<DateTime> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<DateTime> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<DateTime> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                DateTime[] uncheckedList1 = xDoubleColumn.ToUncheckedList<DateTime>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( DateTime* dateTimePtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    DateTime* dateTimePtr2 = dateTimePtr1;
                    ulong* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            DateTime* dateTimePtr3 = dateTimePtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            ulong* numPtr9 = (ulong*) ((IntPtr) numPtr4 + 8);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            DateTime* dateTimePtr4 = dateTimePtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr9 + 8);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            DateTime* dateTimePtr5 = dateTimePtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr15 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            DateTime* dateTimePtr6 = dateTimePtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr15 + 8);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            DateTime* dateTimePtr7 = dateTimePtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr21 = (ulong*) ((IntPtr) numPtr18 + 8);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            DateTime* dateTimePtr8 = dateTimePtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr21 + 8);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            DateTime* dateTimePtr9 = dateTimePtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr27 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            DateTime* dateTimePtr10 = dateTimePtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr27 + 8);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            DateTime* dateTimePtr11 = dateTimePtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr33 = (ulong*) ((IntPtr) numPtr30 + 8);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            DateTime* dateTimePtr12 = dateTimePtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr33 + 8);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            DateTime* dateTimePtr13 = dateTimePtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr39 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            DateTime* dateTimePtr14 = dateTimePtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr39 + 8);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            DateTime* dateTimePtr15 = dateTimePtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr45 = (ulong*) ((IntPtr) numPtr42 + 8);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            DateTime* dateTimePtr16 = dateTimePtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr45 + 8);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            DateTime* dateTimePtr17 = dateTimePtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr51 = (ulong*) ((IntPtr) numPtr48 + 8);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            dateTimePtr2 = dateTimePtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( ulong* ) ( ( IntPtr ) numPtr51 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeUInt64Resampler.TxToDouble( *dateTimePtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++dateTimePtr2;
                        numPtr6 += 8;
                        numPtr4 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( DateTime xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class DateTimeInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<DateTime> dateTimeList = xValues as IList<DateTime>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<DateTime, short>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, double>( dateTimeList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<DateTime, short>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, short>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<DateTime> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<DateTime> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<DateTime>(false) : (UncheckedList<DateTime>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( DateTime* dateTimePtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        DateTime* dateTimePtr2 = dateTimePtr1;
                        short* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr2;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DateTimeInt16Resampler.TxToDouble(*dateTimePtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++dateTimePtr2;
                            numPtr2 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DateTimeInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<DateTime> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<DateTime> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<DateTime> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<DateTime> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                DateTime[] uncheckedList1 = xDoubleColumn.ToUncheckedList<DateTime>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( DateTime* dateTimePtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    DateTime* dateTimePtr2 = dateTimePtr1;
                    short* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            DateTime* dateTimePtr3 = dateTimePtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            short* numPtr9 = (short*) ((IntPtr) numPtr4 + 2);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            DateTime* dateTimePtr4 = dateTimePtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr9 + 2);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            DateTime* dateTimePtr5 = dateTimePtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr15 = (short*) ((IntPtr) numPtr12 + 2);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            DateTime* dateTimePtr6 = dateTimePtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr15 + 2);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            DateTime* dateTimePtr7 = dateTimePtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr21 = (short*) ((IntPtr) numPtr18 + 2);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            DateTime* dateTimePtr8 = dateTimePtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr21 + 2);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            DateTime* dateTimePtr9 = dateTimePtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr27 = (short*) ((IntPtr) numPtr24 + 2);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            DateTime* dateTimePtr10 = dateTimePtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr27 + 2);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            DateTime* dateTimePtr11 = dateTimePtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr33 = (short*) ((IntPtr) numPtr30 + 2);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            DateTime* dateTimePtr12 = dateTimePtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr33 + 2);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            DateTime* dateTimePtr13 = dateTimePtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr39 = (short*) ((IntPtr) numPtr36 + 2);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            DateTime* dateTimePtr14 = dateTimePtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr39 + 2);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            DateTime* dateTimePtr15 = dateTimePtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr45 = (short*) ((IntPtr) numPtr42 + 2);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            DateTime* dateTimePtr16 = dateTimePtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr45 + 2);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            DateTime* dateTimePtr17 = dateTimePtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr51 = (short*) ((IntPtr) numPtr48 + 2);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            dateTimePtr2 = dateTimePtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( short* ) ( ( IntPtr ) numPtr51 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeInt16Resampler.TxToDouble( *dateTimePtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++dateTimePtr2;
                        numPtr6 += 8;
                        numPtr4 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( DateTime xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class DateTimeUInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<DateTime> dateTimeList = xValues as IList<DateTime>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<DateTime, ushort>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, double>( dateTimeList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<DateTime, ushort>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, ushort>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<DateTime> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<DateTime> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<DateTime>(false) : (UncheckedList<DateTime>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( DateTime* dateTimePtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        DateTime* dateTimePtr2 = dateTimePtr1;
                        ushort* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr2;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble(*dateTimePtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++dateTimePtr2;
                            numPtr2 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<DateTime> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<DateTime> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<DateTime> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<DateTime> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                DateTime[] uncheckedList1 = xDoubleColumn.ToUncheckedList<DateTime>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( DateTime* dateTimePtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    DateTime* dateTimePtr2 = dateTimePtr1;
                    ushort* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            DateTime* dateTimePtr3 = dateTimePtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            ushort* numPtr9 = (ushort*) ((IntPtr) numPtr4 + 2);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            DateTime* dateTimePtr4 = dateTimePtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr9 + 2);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            DateTime* dateTimePtr5 = dateTimePtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr15 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            DateTime* dateTimePtr6 = dateTimePtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr15 + 2);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            DateTime* dateTimePtr7 = dateTimePtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr21 = (ushort*) ((IntPtr) numPtr18 + 2);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            DateTime* dateTimePtr8 = dateTimePtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr21 + 2);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            DateTime* dateTimePtr9 = dateTimePtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr27 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            DateTime* dateTimePtr10 = dateTimePtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr27 + 2);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            DateTime* dateTimePtr11 = dateTimePtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr33 = (ushort*) ((IntPtr) numPtr30 + 2);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            DateTime* dateTimePtr12 = dateTimePtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr33 + 2);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            DateTime* dateTimePtr13 = dateTimePtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr39 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            DateTime* dateTimePtr14 = dateTimePtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr39 + 2);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            DateTime* dateTimePtr15 = dateTimePtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr45 = (ushort*) ((IntPtr) numPtr42 + 2);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            DateTime* dateTimePtr16 = dateTimePtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr45 + 2);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            DateTime* dateTimePtr17 = dateTimePtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr51 = (ushort*) ((IntPtr) numPtr48 + 2);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            dateTimePtr2 = dateTimePtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( ushort* ) ( ( IntPtr ) numPtr51 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeUInt16Resampler.TxToDouble( *dateTimePtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++dateTimePtr2;
                        numPtr6 += 8;
                        numPtr4 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( DateTime xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class DateTimeByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<DateTime> dateTimeList = xValues as IList<DateTime>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<DateTime, byte>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, double>( dateTimeList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<DateTime, byte>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, byte>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<DateTime> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<DateTime> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<DateTime>(false) : (UncheckedList<DateTime>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( DateTime* dateTimePtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        DateTime* dateTimePtr2 = dateTimePtr1;
                        byte* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr2;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DateTimeByteResampler.TxToDouble(*dateTimePtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++dateTimePtr2;
                            ++numPtr2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DateTimeByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DateTimeByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<DateTime> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<DateTime> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<DateTime> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<DateTime> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                DateTime[] uncheckedList1 = xDoubleColumn.ToUncheckedList<DateTime>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( DateTime* dateTimePtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    DateTime* dateTimePtr2 = dateTimePtr1;
                    byte* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            DateTime* dateTimePtr3 = dateTimePtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            byte* numPtr9 = numPtr4 + 1;
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            DateTime* dateTimePtr4 = dateTimePtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr9 + 1;
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            DateTime* dateTimePtr5 = dateTimePtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr15 = numPtr12 + 1;
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            DateTime* dateTimePtr6 = dateTimePtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            byte* numPtr18 = numPtr15 + 1;
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            DateTime* dateTimePtr7 = dateTimePtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr21 = numPtr18 + 1;
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            DateTime* dateTimePtr8 = dateTimePtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            byte* numPtr24 = numPtr21 + 1;
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            DateTime* dateTimePtr9 = dateTimePtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr27 = numPtr24 + 1;
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            DateTime* dateTimePtr10 = dateTimePtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            byte* numPtr30 = numPtr27 + 1;
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            DateTime* dateTimePtr11 = dateTimePtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr33 = numPtr30 + 1;
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            DateTime* dateTimePtr12 = dateTimePtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            byte* numPtr36 = numPtr33 + 1;
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            DateTime* dateTimePtr13 = dateTimePtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr39 = numPtr36 + 1;
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            DateTime* dateTimePtr14 = dateTimePtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            byte* numPtr42 = numPtr39 + 1;
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            DateTime* dateTimePtr15 = dateTimePtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr45 = numPtr42 + 1;
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            DateTime* dateTimePtr16 = dateTimePtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            byte* numPtr48 = numPtr45 + 1;
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            DateTime* dateTimePtr17 = dateTimePtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr51 = numPtr48 + 1;
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            dateTimePtr2 = dateTimePtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = numPtr51 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeByteResampler.TxToDouble( *dateTimePtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++dateTimePtr2;
                        numPtr6 += 8;
                        ++numPtr4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( DateTime xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class DateTimeSByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<DateTime> dateTimeList = xValues as IList<DateTime>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<DateTime, sbyte>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, double>( dateTimeList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<DateTime, sbyte>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<DateTime, sbyte>( dateTimeList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( dateTimeList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<DateTime> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<DateTime> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<DateTime>(false) : (UncheckedList<DateTime>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( DateTime* dateTimePtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        DateTime* dateTimePtr2 = dateTimePtr1;
                        sbyte* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr2;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.DateTimeSByteResampler.TxToDouble(*dateTimePtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++dateTimePtr2;
                            ++numPtr2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeSByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.DateTimeSByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.DateTimeSByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<DateTime> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<DateTime> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<DateTime> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.DateTimeSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<DateTime> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                DateTime[] uncheckedList1 = xDoubleColumn.ToUncheckedList<DateTime>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( DateTime* dateTimePtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    DateTime* dateTimePtr2 = dateTimePtr1;
                    sbyte* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            DateTime* dateTimePtr3 = dateTimePtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            sbyte* numPtr9 = numPtr4 + 1;
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            DateTime* dateTimePtr4 = dateTimePtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr9 + 1;
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            DateTime* dateTimePtr5 = dateTimePtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr15 = numPtr12 + 1;
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            DateTime* dateTimePtr6 = dateTimePtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            sbyte* numPtr18 = numPtr15 + 1;
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            DateTime* dateTimePtr7 = dateTimePtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr21 = numPtr18 + 1;
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            DateTime* dateTimePtr8 = dateTimePtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            sbyte* numPtr24 = numPtr21 + 1;
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            DateTime* dateTimePtr9 = dateTimePtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr27 = numPtr24 + 1;
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            DateTime* dateTimePtr10 = dateTimePtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            sbyte* numPtr30 = numPtr27 + 1;
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            DateTime* dateTimePtr11 = dateTimePtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr33 = numPtr30 + 1;
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            DateTime* dateTimePtr12 = dateTimePtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            sbyte* numPtr36 = numPtr33 + 1;
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            DateTime* dateTimePtr13 = dateTimePtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr39 = numPtr36 + 1;
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            DateTime* dateTimePtr14 = dateTimePtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            sbyte* numPtr42 = numPtr39 + 1;
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            DateTime* dateTimePtr15 = dateTimePtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr45 = numPtr42 + 1;
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            DateTime* dateTimePtr16 = dateTimePtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            sbyte* numPtr48 = numPtr45 + 1;
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            DateTime* dateTimePtr17 = dateTimePtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr51 = numPtr48 + 1;
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            dateTimePtr2 = dateTimePtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = numPtr51 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.DateTimeSByteResampler.TxToDouble( *dateTimePtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++dateTimePtr2;
                        numPtr6 += 8;
                        ++numPtr4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( DateTime xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class TimeSpanDoubleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<TimeSpan> timeSpanList = xValues as IList<TimeSpan>;
                IList<double> yColumn = yValues as IList<double>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<TimeSpan, double>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, double>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<TimeSpan, double>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, double>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<TimeSpan> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<double> math = GenericMathFactory.New<double>();
                double num4 = math.MaxValue;
                double num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<TimeSpan> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<TimeSpan>(false) : (UncheckedList<TimeSpan>) null;
                UncheckedList<double> uncheckedList2 = yColumn.ToUncheckedList<double>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( double* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                        double* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            double num8 = *numPtr2;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble(*timeSpanPtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( num4 );
                                yvalues.Add( num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++timeSpanPtr2;
                            numPtr2 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( num4 );
                            yvalues.Add( num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        double num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( num4 );
                    yvalues.Add( num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<TimeSpan> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<TimeSpan> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<TimeSpan> xColumn, IList<double> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                double[] uncheckedList = yColumn.ToUncheckedList<double>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<TimeSpan> xDoubleColumn, IList<double> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                TimeSpan[] uncheckedList1 = xDoubleColumn.ToUncheckedList<TimeSpan>();
                double[] uncheckedList2 = yColumn.ToUncheckedList<double>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1[ index1 ] )
                fixed ( double* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                    double* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr2 );
                            *numPtr6 = *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            TimeSpan* timeSpanPtr3 = timeSpanPtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            double* numPtr9 = (double*) ((IntPtr) numPtr4 + 8);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr3 );
                            *numPtr8 = *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            TimeSpan* timeSpanPtr4 = timeSpanPtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            double* numPtr12 = (double*) ((IntPtr) numPtr9 + 8);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr4 );
                            *numPtr11 = *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            TimeSpan* timeSpanPtr5 = timeSpanPtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            double* numPtr15 = (double*) ((IntPtr) numPtr12 + 8);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr5 );
                            *numPtr14 = *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            TimeSpan* timeSpanPtr6 = timeSpanPtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            double* numPtr18 = (double*) ((IntPtr) numPtr15 + 8);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr6 );
                            *numPtr17 = *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            TimeSpan* timeSpanPtr7 = timeSpanPtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            double* numPtr21 = (double*) ((IntPtr) numPtr18 + 8);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr7 );
                            *numPtr20 = *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            TimeSpan* timeSpanPtr8 = timeSpanPtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            double* numPtr24 = (double*) ((IntPtr) numPtr21 + 8);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr8 );
                            *numPtr23 = *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            TimeSpan* timeSpanPtr9 = timeSpanPtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            double* numPtr27 = (double*) ((IntPtr) numPtr24 + 8);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr9 );
                            *numPtr26 = *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            TimeSpan* timeSpanPtr10 = timeSpanPtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            double* numPtr30 = (double*) ((IntPtr) numPtr27 + 8);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr10 );
                            *numPtr29 = *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            TimeSpan* timeSpanPtr11 = timeSpanPtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            double* numPtr33 = (double*) ((IntPtr) numPtr30 + 8);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr11 );
                            *numPtr32 = *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            TimeSpan* timeSpanPtr12 = timeSpanPtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            double* numPtr36 = (double*) ((IntPtr) numPtr33 + 8);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr12 );
                            *numPtr35 = *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            TimeSpan* timeSpanPtr13 = timeSpanPtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            double* numPtr39 = (double*) ((IntPtr) numPtr36 + 8);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr13 );
                            *numPtr38 = *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            TimeSpan* timeSpanPtr14 = timeSpanPtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            double* numPtr42 = (double*) ((IntPtr) numPtr39 + 8);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr14 );
                            *numPtr41 = *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            TimeSpan* timeSpanPtr15 = timeSpanPtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            double* numPtr45 = (double*) ((IntPtr) numPtr42 + 8);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr15 );
                            *numPtr44 = *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            TimeSpan* timeSpanPtr16 = timeSpanPtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            double* numPtr48 = (double*) ((IntPtr) numPtr45 + 8);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr16 );
                            *numPtr47 = *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            TimeSpan* timeSpanPtr17 = timeSpanPtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            double* numPtr51 = (double*) ((IntPtr) numPtr48 + 8);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr17 );
                            *numPtr50 = *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            timeSpanPtr2 = timeSpanPtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( double* ) ( ( IntPtr ) numPtr51 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanDoubleResampler.TxToDouble( *timeSpanPtr2 );
                        *numPtr6 = *numPtr4;
                        numPtr5 += 8;
                        ++timeSpanPtr2;
                        numPtr6 += 8;
                        numPtr4 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( TimeSpan xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class TimeSpanSingleResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<TimeSpan> timeSpanList = xValues as IList<TimeSpan>;
                IList<float> yColumn = yValues as IList<float>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<TimeSpan, float>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, double>( timeSpanList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<TimeSpan, float>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, float>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<TimeSpan> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<float> math = GenericMathFactory.New<float>();
                float num4 = math.MaxValue;
                float num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<TimeSpan> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<TimeSpan>(false) : (UncheckedList<TimeSpan>) null;
                UncheckedList<float> uncheckedList2 = yColumn.ToUncheckedList<float>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( float* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                        float* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            float num8 = *numPtr2;
                            if ( ( double ) num4 >= ( double ) num8 )
                                num4 = num8;
                            if ( ( double ) num5 <= ( double ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.TimeSpanSingleResampler.TxToDouble(*timeSpanPtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++timeSpanPtr2;
                            numPtr2 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        float num8 = uncheckedList2[index];
                        if ( ( double ) num4 >= ( double ) num8 )
                            num4 = num8;
                        if ( ( double ) num5 <= ( double ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.TimeSpanSingleResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<TimeSpan> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<TimeSpan> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<TimeSpan> xColumn, IList<float> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                float[] uncheckedList = yColumn.ToUncheckedList<float>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<TimeSpan> xDoubleColumn, IList<float> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                TimeSpan[] uncheckedList1 = xDoubleColumn.ToUncheckedList<TimeSpan>();
                float[] uncheckedList2 = yColumn.ToUncheckedList<float>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1[ index1 ] )
                fixed ( float* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                    float* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            TimeSpan* timeSpanPtr3 = timeSpanPtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            float* numPtr9 = (float*) ((IntPtr) numPtr4 + 4);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            TimeSpan* timeSpanPtr4 = timeSpanPtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            float* numPtr12 = (float*) ((IntPtr) numPtr9 + 4);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            TimeSpan* timeSpanPtr5 = timeSpanPtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            float* numPtr15 = (float*) ((IntPtr) numPtr12 + 4);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            TimeSpan* timeSpanPtr6 = timeSpanPtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            float* numPtr18 = (float*) ((IntPtr) numPtr15 + 4);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            TimeSpan* timeSpanPtr7 = timeSpanPtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            float* numPtr21 = (float*) ((IntPtr) numPtr18 + 4);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            TimeSpan* timeSpanPtr8 = timeSpanPtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            float* numPtr24 = (float*) ((IntPtr) numPtr21 + 4);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            TimeSpan* timeSpanPtr9 = timeSpanPtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            float* numPtr27 = (float*) ((IntPtr) numPtr24 + 4);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            TimeSpan* timeSpanPtr10 = timeSpanPtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            float* numPtr30 = (float*) ((IntPtr) numPtr27 + 4);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            TimeSpan* timeSpanPtr11 = timeSpanPtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            float* numPtr33 = (float*) ((IntPtr) numPtr30 + 4);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            TimeSpan* timeSpanPtr12 = timeSpanPtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            float* numPtr36 = (float*) ((IntPtr) numPtr33 + 4);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            TimeSpan* timeSpanPtr13 = timeSpanPtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            float* numPtr39 = (float*) ((IntPtr) numPtr36 + 4);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            TimeSpan* timeSpanPtr14 = timeSpanPtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            float* numPtr42 = (float*) ((IntPtr) numPtr39 + 4);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            TimeSpan* timeSpanPtr15 = timeSpanPtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            float* numPtr45 = (float*) ((IntPtr) numPtr42 + 4);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            TimeSpan* timeSpanPtr16 = timeSpanPtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            float* numPtr48 = (float*) ((IntPtr) numPtr45 + 4);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            TimeSpan* timeSpanPtr17 = timeSpanPtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            float* numPtr51 = (float*) ((IntPtr) numPtr48 + 4);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            timeSpanPtr2 = timeSpanPtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( float* ) ( ( IntPtr ) numPtr51 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanSingleResampler.TxToDouble( *timeSpanPtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++timeSpanPtr2;
                        numPtr6 += 8;
                        numPtr4 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( TimeSpan xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class TimeSpanInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<TimeSpan> timeSpanList = xValues as IList<TimeSpan>;
                IList<int> yColumn = yValues as IList<int>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<TimeSpan, int>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, double>( timeSpanList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<TimeSpan, int>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, int>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<TimeSpan> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<int> math = GenericMathFactory.New<int>();
                int num4 = math.MaxValue;
                int num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<TimeSpan> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<TimeSpan>(false) : (UncheckedList<TimeSpan>) null;
                UncheckedList<int> uncheckedList2 = yColumn.ToUncheckedList<int>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( int* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                        int* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            int num8 = *numPtr2;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble(*timeSpanPtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++timeSpanPtr2;
                            numPtr2 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        int num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<TimeSpan> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<TimeSpan> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<TimeSpan> xColumn, IList<int> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                int[] uncheckedList = yColumn.ToUncheckedList<int>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<TimeSpan> xDoubleColumn, IList<int> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                TimeSpan[] uncheckedList1 = xDoubleColumn.ToUncheckedList<TimeSpan>();
                int[] uncheckedList2 = yColumn.ToUncheckedList<int>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1[ index1 ] )
                fixed ( int* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                    int* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            TimeSpan* timeSpanPtr3 = timeSpanPtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            int* numPtr9 = (int*) ((IntPtr) numPtr4 + 4);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            TimeSpan* timeSpanPtr4 = timeSpanPtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            int* numPtr12 = (int*) ((IntPtr) numPtr9 + 4);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            TimeSpan* timeSpanPtr5 = timeSpanPtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            int* numPtr15 = (int*) ((IntPtr) numPtr12 + 4);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            TimeSpan* timeSpanPtr6 = timeSpanPtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            int* numPtr18 = (int*) ((IntPtr) numPtr15 + 4);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            TimeSpan* timeSpanPtr7 = timeSpanPtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            int* numPtr21 = (int*) ((IntPtr) numPtr18 + 4);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            TimeSpan* timeSpanPtr8 = timeSpanPtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            int* numPtr24 = (int*) ((IntPtr) numPtr21 + 4);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            TimeSpan* timeSpanPtr9 = timeSpanPtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            int* numPtr27 = (int*) ((IntPtr) numPtr24 + 4);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            TimeSpan* timeSpanPtr10 = timeSpanPtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            int* numPtr30 = (int*) ((IntPtr) numPtr27 + 4);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            TimeSpan* timeSpanPtr11 = timeSpanPtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            int* numPtr33 = (int*) ((IntPtr) numPtr30 + 4);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            TimeSpan* timeSpanPtr12 = timeSpanPtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            int* numPtr36 = (int*) ((IntPtr) numPtr33 + 4);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            TimeSpan* timeSpanPtr13 = timeSpanPtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            int* numPtr39 = (int*) ((IntPtr) numPtr36 + 4);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            TimeSpan* timeSpanPtr14 = timeSpanPtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            int* numPtr42 = (int*) ((IntPtr) numPtr39 + 4);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            TimeSpan* timeSpanPtr15 = timeSpanPtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            int* numPtr45 = (int*) ((IntPtr) numPtr42 + 4);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            TimeSpan* timeSpanPtr16 = timeSpanPtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            int* numPtr48 = (int*) ((IntPtr) numPtr45 + 4);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            TimeSpan* timeSpanPtr17 = timeSpanPtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            int* numPtr51 = (int*) ((IntPtr) numPtr48 + 4);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            timeSpanPtr2 = timeSpanPtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( int* ) ( ( IntPtr ) numPtr51 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanInt32Resampler.TxToDouble( *timeSpanPtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++timeSpanPtr2;
                        numPtr6 += 8;
                        numPtr4 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( TimeSpan xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class TimeSpanUInt32Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<TimeSpan> timeSpanList = xValues as IList<TimeSpan>;
                IList<uint> yColumn = yValues as IList<uint>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<TimeSpan, uint>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, double>( timeSpanList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<TimeSpan, uint>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, uint>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<TimeSpan> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<uint> math = GenericMathFactory.New<uint>();
                uint num4 = math.MaxValue;
                uint num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<TimeSpan> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<TimeSpan>(false) : (UncheckedList<TimeSpan>) null;
                UncheckedList<uint> uncheckedList2 = yColumn.ToUncheckedList<uint>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( uint* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                        uint* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            uint num8 = *numPtr2;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble(*timeSpanPtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++timeSpanPtr2;
                            numPtr2 += 4;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        uint num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<TimeSpan> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<TimeSpan> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<TimeSpan> xColumn, IList<uint> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                uint[] uncheckedList = yColumn.ToUncheckedList<uint>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<TimeSpan> xDoubleColumn, IList<uint> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                TimeSpan[] uncheckedList1 = xDoubleColumn.ToUncheckedList<TimeSpan>();
                uint[] uncheckedList2 = yColumn.ToUncheckedList<uint>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1[ index1 ] )
                fixed ( uint* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                    uint* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            TimeSpan* timeSpanPtr3 = timeSpanPtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            uint* numPtr9 = (uint*) ((IntPtr) numPtr4 + 4);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            TimeSpan* timeSpanPtr4 = timeSpanPtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            uint* numPtr12 = (uint*) ((IntPtr) numPtr9 + 4);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            TimeSpan* timeSpanPtr5 = timeSpanPtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            uint* numPtr15 = (uint*) ((IntPtr) numPtr12 + 4);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            TimeSpan* timeSpanPtr6 = timeSpanPtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            uint* numPtr18 = (uint*) ((IntPtr) numPtr15 + 4);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            TimeSpan* timeSpanPtr7 = timeSpanPtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            uint* numPtr21 = (uint*) ((IntPtr) numPtr18 + 4);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            TimeSpan* timeSpanPtr8 = timeSpanPtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            uint* numPtr24 = (uint*) ((IntPtr) numPtr21 + 4);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            TimeSpan* timeSpanPtr9 = timeSpanPtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            uint* numPtr27 = (uint*) ((IntPtr) numPtr24 + 4);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            TimeSpan* timeSpanPtr10 = timeSpanPtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            uint* numPtr30 = (uint*) ((IntPtr) numPtr27 + 4);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            TimeSpan* timeSpanPtr11 = timeSpanPtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            uint* numPtr33 = (uint*) ((IntPtr) numPtr30 + 4);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            TimeSpan* timeSpanPtr12 = timeSpanPtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            uint* numPtr36 = (uint*) ((IntPtr) numPtr33 + 4);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            TimeSpan* timeSpanPtr13 = timeSpanPtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            uint* numPtr39 = (uint*) ((IntPtr) numPtr36 + 4);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            TimeSpan* timeSpanPtr14 = timeSpanPtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            uint* numPtr42 = (uint*) ((IntPtr) numPtr39 + 4);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            TimeSpan* timeSpanPtr15 = timeSpanPtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            uint* numPtr45 = (uint*) ((IntPtr) numPtr42 + 4);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            TimeSpan* timeSpanPtr16 = timeSpanPtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            uint* numPtr48 = (uint*) ((IntPtr) numPtr45 + 4);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            TimeSpan* timeSpanPtr17 = timeSpanPtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            uint* numPtr51 = (uint*) ((IntPtr) numPtr48 + 4);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            timeSpanPtr2 = timeSpanPtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( uint* ) ( ( IntPtr ) numPtr51 + 4 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanUInt32Resampler.TxToDouble( *timeSpanPtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++timeSpanPtr2;
                        numPtr6 += 8;
                        numPtr4 += 4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( TimeSpan xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class TimeSpanInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<TimeSpan> timeSpanList = xValues as IList<TimeSpan>;
                IList<long> yColumn = yValues as IList<long>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<TimeSpan, long>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, double>( timeSpanList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<TimeSpan, long>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, long>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<TimeSpan> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<long> math = GenericMathFactory.New<long>();
                long num4 = math.MaxValue;
                long num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<TimeSpan> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<TimeSpan>(false) : (UncheckedList<TimeSpan>) null;
                UncheckedList<long> uncheckedList2 = yColumn.ToUncheckedList<long>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( long* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                        long* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            long num8 = *numPtr2;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble(*timeSpanPtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++timeSpanPtr2;
                            numPtr2 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        long num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<TimeSpan> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<TimeSpan> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<TimeSpan> xColumn, IList<long> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                long[] uncheckedList = yColumn.ToUncheckedList<long>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<TimeSpan> xDoubleColumn, IList<long> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                TimeSpan[] uncheckedList1 = xDoubleColumn.ToUncheckedList<TimeSpan>();
                long[] uncheckedList2 = yColumn.ToUncheckedList<long>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1[ index1 ] )
                fixed ( long* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                    long* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            TimeSpan* timeSpanPtr3 = timeSpanPtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            long* numPtr9 = (long*) ((IntPtr) numPtr4 + 8);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            TimeSpan* timeSpanPtr4 = timeSpanPtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            long* numPtr12 = (long*) ((IntPtr) numPtr9 + 8);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            TimeSpan* timeSpanPtr5 = timeSpanPtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            long* numPtr15 = (long*) ((IntPtr) numPtr12 + 8);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            TimeSpan* timeSpanPtr6 = timeSpanPtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            long* numPtr18 = (long*) ((IntPtr) numPtr15 + 8);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            TimeSpan* timeSpanPtr7 = timeSpanPtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            long* numPtr21 = (long*) ((IntPtr) numPtr18 + 8);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            TimeSpan* timeSpanPtr8 = timeSpanPtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            long* numPtr24 = (long*) ((IntPtr) numPtr21 + 8);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            TimeSpan* timeSpanPtr9 = timeSpanPtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            long* numPtr27 = (long*) ((IntPtr) numPtr24 + 8);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            TimeSpan* timeSpanPtr10 = timeSpanPtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            long* numPtr30 = (long*) ((IntPtr) numPtr27 + 8);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            TimeSpan* timeSpanPtr11 = timeSpanPtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            long* numPtr33 = (long*) ((IntPtr) numPtr30 + 8);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            TimeSpan* timeSpanPtr12 = timeSpanPtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            long* numPtr36 = (long*) ((IntPtr) numPtr33 + 8);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            TimeSpan* timeSpanPtr13 = timeSpanPtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            long* numPtr39 = (long*) ((IntPtr) numPtr36 + 8);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            TimeSpan* timeSpanPtr14 = timeSpanPtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            long* numPtr42 = (long*) ((IntPtr) numPtr39 + 8);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            TimeSpan* timeSpanPtr15 = timeSpanPtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            long* numPtr45 = (long*) ((IntPtr) numPtr42 + 8);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            TimeSpan* timeSpanPtr16 = timeSpanPtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            long* numPtr48 = (long*) ((IntPtr) numPtr45 + 8);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            TimeSpan* timeSpanPtr17 = timeSpanPtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            long* numPtr51 = (long*) ((IntPtr) numPtr48 + 8);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            timeSpanPtr2 = timeSpanPtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( long* ) ( ( IntPtr ) numPtr51 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanInt64Resampler.TxToDouble( *timeSpanPtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++timeSpanPtr2;
                        numPtr6 += 8;
                        numPtr4 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( TimeSpan xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class TimeSpanUInt64Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<TimeSpan> timeSpanList = xValues as IList<TimeSpan>;
                IList<ulong> yColumn = yValues as IList<ulong>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<TimeSpan, ulong>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, double>( timeSpanList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<TimeSpan, ulong>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, ulong>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<TimeSpan> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ulong> math = GenericMathFactory.New<ulong>();
                ulong num4 = math.MaxValue;
                ulong num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<TimeSpan> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<TimeSpan>(false) : (UncheckedList<TimeSpan>) null;
                UncheckedList<ulong> uncheckedList2 = yColumn.ToUncheckedList<ulong>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ulong* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                        ulong* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            ulong num8 = *numPtr2;
                            if ( num4 >= num8 )
                                num4 = num8;
                            if ( num5 <= num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble(*timeSpanPtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++timeSpanPtr2;
                            numPtr2 += 8;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ulong num8 = uncheckedList2[index];
                        if ( num4 >= num8 )
                            num4 = num8;
                        if ( num5 <= num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<TimeSpan> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<TimeSpan> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<TimeSpan> xColumn, IList<ulong> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ulong[] uncheckedList = yColumn.ToUncheckedList<ulong>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<TimeSpan> xDoubleColumn, IList<ulong> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                TimeSpan[] uncheckedList1 = xDoubleColumn.ToUncheckedList<TimeSpan>();
                ulong[] uncheckedList2 = yColumn.ToUncheckedList<ulong>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ulong* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                    ulong* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            TimeSpan* timeSpanPtr3 = timeSpanPtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            ulong* numPtr9 = (ulong*) ((IntPtr) numPtr4 + 8);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            TimeSpan* timeSpanPtr4 = timeSpanPtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ulong* numPtr12 = (ulong*) ((IntPtr) numPtr9 + 8);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            TimeSpan* timeSpanPtr5 = timeSpanPtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            ulong* numPtr15 = (ulong*) ((IntPtr) numPtr12 + 8);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            TimeSpan* timeSpanPtr6 = timeSpanPtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            ulong* numPtr18 = (ulong*) ((IntPtr) numPtr15 + 8);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            TimeSpan* timeSpanPtr7 = timeSpanPtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            ulong* numPtr21 = (ulong*) ((IntPtr) numPtr18 + 8);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            TimeSpan* timeSpanPtr8 = timeSpanPtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            ulong* numPtr24 = (ulong*) ((IntPtr) numPtr21 + 8);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            TimeSpan* timeSpanPtr9 = timeSpanPtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            ulong* numPtr27 = (ulong*) ((IntPtr) numPtr24 + 8);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            TimeSpan* timeSpanPtr10 = timeSpanPtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            ulong* numPtr30 = (ulong*) ((IntPtr) numPtr27 + 8);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            TimeSpan* timeSpanPtr11 = timeSpanPtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            ulong* numPtr33 = (ulong*) ((IntPtr) numPtr30 + 8);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            TimeSpan* timeSpanPtr12 = timeSpanPtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            ulong* numPtr36 = (ulong*) ((IntPtr) numPtr33 + 8);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            TimeSpan* timeSpanPtr13 = timeSpanPtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            ulong* numPtr39 = (ulong*) ((IntPtr) numPtr36 + 8);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            TimeSpan* timeSpanPtr14 = timeSpanPtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            ulong* numPtr42 = (ulong*) ((IntPtr) numPtr39 + 8);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            TimeSpan* timeSpanPtr15 = timeSpanPtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            ulong* numPtr45 = (ulong*) ((IntPtr) numPtr42 + 8);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            TimeSpan* timeSpanPtr16 = timeSpanPtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            ulong* numPtr48 = (ulong*) ((IntPtr) numPtr45 + 8);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            TimeSpan* timeSpanPtr17 = timeSpanPtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            ulong* numPtr51 = (ulong*) ((IntPtr) numPtr48 + 8);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            timeSpanPtr2 = timeSpanPtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( ulong* ) ( ( IntPtr ) numPtr51 + 8 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanUInt64Resampler.TxToDouble( *timeSpanPtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++timeSpanPtr2;
                        numPtr6 += 8;
                        numPtr4 += 8;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( TimeSpan xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class TimeSpanInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<TimeSpan> timeSpanList = xValues as IList<TimeSpan>;
                IList<short> yColumn = yValues as IList<short>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<TimeSpan, short>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, double>( timeSpanList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<TimeSpan, short>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, short>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<TimeSpan> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<short> math = GenericMathFactory.New<short>();
                short num4 = math.MaxValue;
                short num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<TimeSpan> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<TimeSpan>(false) : (UncheckedList<TimeSpan>) null;
                UncheckedList<short> uncheckedList2 = yColumn.ToUncheckedList<short>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( short* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                        short* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            short num8 = *numPtr2;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble(*timeSpanPtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++timeSpanPtr2;
                            numPtr2 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        short num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<TimeSpan> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<TimeSpan> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<TimeSpan> xColumn, IList<short> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                short[] uncheckedList = yColumn.ToUncheckedList<short>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<TimeSpan> xDoubleColumn, IList<short> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                TimeSpan[] uncheckedList1 = xDoubleColumn.ToUncheckedList<TimeSpan>();
                short[] uncheckedList2 = yColumn.ToUncheckedList<short>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1[ index1 ] )
                fixed ( short* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                    short* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            TimeSpan* timeSpanPtr3 = timeSpanPtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            short* numPtr9 = (short*) ((IntPtr) numPtr4 + 2);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            TimeSpan* timeSpanPtr4 = timeSpanPtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            short* numPtr12 = (short*) ((IntPtr) numPtr9 + 2);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            TimeSpan* timeSpanPtr5 = timeSpanPtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            short* numPtr15 = (short*) ((IntPtr) numPtr12 + 2);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            TimeSpan* timeSpanPtr6 = timeSpanPtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            short* numPtr18 = (short*) ((IntPtr) numPtr15 + 2);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            TimeSpan* timeSpanPtr7 = timeSpanPtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            short* numPtr21 = (short*) ((IntPtr) numPtr18 + 2);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            TimeSpan* timeSpanPtr8 = timeSpanPtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            short* numPtr24 = (short*) ((IntPtr) numPtr21 + 2);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            TimeSpan* timeSpanPtr9 = timeSpanPtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            short* numPtr27 = (short*) ((IntPtr) numPtr24 + 2);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            TimeSpan* timeSpanPtr10 = timeSpanPtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            short* numPtr30 = (short*) ((IntPtr) numPtr27 + 2);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            TimeSpan* timeSpanPtr11 = timeSpanPtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            short* numPtr33 = (short*) ((IntPtr) numPtr30 + 2);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            TimeSpan* timeSpanPtr12 = timeSpanPtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            short* numPtr36 = (short*) ((IntPtr) numPtr33 + 2);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            TimeSpan* timeSpanPtr13 = timeSpanPtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            short* numPtr39 = (short*) ((IntPtr) numPtr36 + 2);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            TimeSpan* timeSpanPtr14 = timeSpanPtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            short* numPtr42 = (short*) ((IntPtr) numPtr39 + 2);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            TimeSpan* timeSpanPtr15 = timeSpanPtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            short* numPtr45 = (short*) ((IntPtr) numPtr42 + 2);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            TimeSpan* timeSpanPtr16 = timeSpanPtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            short* numPtr48 = (short*) ((IntPtr) numPtr45 + 2);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            TimeSpan* timeSpanPtr17 = timeSpanPtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            short* numPtr51 = (short*) ((IntPtr) numPtr48 + 2);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            timeSpanPtr2 = timeSpanPtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( short* ) ( ( IntPtr ) numPtr51 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanInt16Resampler.TxToDouble( *timeSpanPtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++timeSpanPtr2;
                        numPtr6 += 8;
                        numPtr4 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( TimeSpan xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class TimeSpanUInt16Resampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<TimeSpan> timeSpanList = xValues as IList<TimeSpan>;
                IList<ushort> yColumn = yValues as IList<ushort>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<TimeSpan, ushort>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, double>( timeSpanList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<TimeSpan, ushort>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, ushort>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<TimeSpan> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<ushort> math = GenericMathFactory.New<ushort>();
                ushort num4 = math.MaxValue;
                ushort num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<TimeSpan> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<TimeSpan>(false) : (UncheckedList<TimeSpan>) null;
                UncheckedList<ushort> uncheckedList2 = yColumn.ToUncheckedList<ushort>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( ushort* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                        ushort* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            ushort num8 = *numPtr2;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble(*timeSpanPtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++timeSpanPtr2;
                            numPtr2 += 2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        ushort num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<TimeSpan> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<TimeSpan> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<TimeSpan> xColumn, IList<ushort> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                ushort[] uncheckedList = yColumn.ToUncheckedList<ushort>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<TimeSpan> xDoubleColumn, IList<ushort> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                TimeSpan[] uncheckedList1 = xDoubleColumn.ToUncheckedList<TimeSpan>();
                ushort[] uncheckedList2 = yColumn.ToUncheckedList<ushort>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1[ index1 ] )
                fixed ( ushort* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                    ushort* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            TimeSpan* timeSpanPtr3 = timeSpanPtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            ushort* numPtr9 = (ushort*) ((IntPtr) numPtr4 + 2);
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            TimeSpan* timeSpanPtr4 = timeSpanPtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            ushort* numPtr12 = (ushort*) ((IntPtr) numPtr9 + 2);
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            TimeSpan* timeSpanPtr5 = timeSpanPtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            ushort* numPtr15 = (ushort*) ((IntPtr) numPtr12 + 2);
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            TimeSpan* timeSpanPtr6 = timeSpanPtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            ushort* numPtr18 = (ushort*) ((IntPtr) numPtr15 + 2);
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            TimeSpan* timeSpanPtr7 = timeSpanPtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            ushort* numPtr21 = (ushort*) ((IntPtr) numPtr18 + 2);
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            TimeSpan* timeSpanPtr8 = timeSpanPtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            ushort* numPtr24 = (ushort*) ((IntPtr) numPtr21 + 2);
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            TimeSpan* timeSpanPtr9 = timeSpanPtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            ushort* numPtr27 = (ushort*) ((IntPtr) numPtr24 + 2);
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            TimeSpan* timeSpanPtr10 = timeSpanPtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            ushort* numPtr30 = (ushort*) ((IntPtr) numPtr27 + 2);
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            TimeSpan* timeSpanPtr11 = timeSpanPtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            ushort* numPtr33 = (ushort*) ((IntPtr) numPtr30 + 2);
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            TimeSpan* timeSpanPtr12 = timeSpanPtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            ushort* numPtr36 = (ushort*) ((IntPtr) numPtr33 + 2);
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            TimeSpan* timeSpanPtr13 = timeSpanPtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            ushort* numPtr39 = (ushort*) ((IntPtr) numPtr36 + 2);
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            TimeSpan* timeSpanPtr14 = timeSpanPtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            ushort* numPtr42 = (ushort*) ((IntPtr) numPtr39 + 2);
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            TimeSpan* timeSpanPtr15 = timeSpanPtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            ushort* numPtr45 = (ushort*) ((IntPtr) numPtr42 + 2);
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            TimeSpan* timeSpanPtr16 = timeSpanPtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            ushort* numPtr48 = (ushort*) ((IntPtr) numPtr45 + 2);
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            TimeSpan* timeSpanPtr17 = timeSpanPtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            ushort* numPtr51 = (ushort*) ((IntPtr) numPtr48 + 2);
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            timeSpanPtr2 = timeSpanPtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = ( ushort* ) ( ( IntPtr ) numPtr51 + 2 );
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanUInt16Resampler.TxToDouble( *timeSpanPtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++timeSpanPtr2;
                        numPtr6 += 8;
                        numPtr4 += 2;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( TimeSpan xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class TimeSpanByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<TimeSpan> timeSpanList = xValues as IList<TimeSpan>;
                IList<byte> yColumn = yValues as IList<byte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<TimeSpan, byte>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, double>( timeSpanList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<TimeSpan, byte>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, byte>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<TimeSpan> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<byte> math = GenericMathFactory.New<byte>();
                byte num4 = math.MaxValue;
                byte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<TimeSpan> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<TimeSpan>(false) : (UncheckedList<TimeSpan>) null;
                UncheckedList<byte> uncheckedList2 = yColumn.ToUncheckedList<byte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( byte* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                        byte* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            byte num8 = *numPtr2;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.TimeSpanByteResampler.TxToDouble(*timeSpanPtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++timeSpanPtr2;
                            ++numPtr2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        byte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.TimeSpanByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.TimeSpanByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<TimeSpan> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<TimeSpan> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<TimeSpan> xColumn, IList<byte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                byte[] uncheckedList = yColumn.ToUncheckedList<byte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<TimeSpan> xDoubleColumn, IList<byte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                TimeSpan[] uncheckedList1 = xDoubleColumn.ToUncheckedList<TimeSpan>();
                byte[] uncheckedList2 = yColumn.ToUncheckedList<byte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1[ index1 ] )
                fixed ( byte* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                    byte* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            TimeSpan* timeSpanPtr3 = timeSpanPtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            byte* numPtr9 = numPtr4 + 1;
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            TimeSpan* timeSpanPtr4 = timeSpanPtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            byte* numPtr12 = numPtr9 + 1;
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            TimeSpan* timeSpanPtr5 = timeSpanPtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            byte* numPtr15 = numPtr12 + 1;
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            TimeSpan* timeSpanPtr6 = timeSpanPtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            byte* numPtr18 = numPtr15 + 1;
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            TimeSpan* timeSpanPtr7 = timeSpanPtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            byte* numPtr21 = numPtr18 + 1;
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            TimeSpan* timeSpanPtr8 = timeSpanPtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            byte* numPtr24 = numPtr21 + 1;
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            TimeSpan* timeSpanPtr9 = timeSpanPtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            byte* numPtr27 = numPtr24 + 1;
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            TimeSpan* timeSpanPtr10 = timeSpanPtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            byte* numPtr30 = numPtr27 + 1;
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            TimeSpan* timeSpanPtr11 = timeSpanPtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            byte* numPtr33 = numPtr30 + 1;
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            TimeSpan* timeSpanPtr12 = timeSpanPtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            byte* numPtr36 = numPtr33 + 1;
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            TimeSpan* timeSpanPtr13 = timeSpanPtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            byte* numPtr39 = numPtr36 + 1;
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            TimeSpan* timeSpanPtr14 = timeSpanPtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            byte* numPtr42 = numPtr39 + 1;
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            TimeSpan* timeSpanPtr15 = timeSpanPtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            byte* numPtr45 = numPtr42 + 1;
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            TimeSpan* timeSpanPtr16 = timeSpanPtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            byte* numPtr48 = numPtr45 + 1;
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            TimeSpan* timeSpanPtr17 = timeSpanPtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            byte* numPtr51 = numPtr48 + 1;
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            timeSpanPtr2 = timeSpanPtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = numPtr51 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanByteResampler.TxToDouble( *timeSpanPtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++timeSpanPtr2;
                        numPtr6 += 8;
                        ++numPtr4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( TimeSpan xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }

        private class TimeSpanSByteResampler : PointResamplerBase
        {
            public override sealed IPointSeries Execute( ResamplingMode resamplingMode, IndexRange pointRange, int viewportWidth, bool isFifo, bool isCategoryAxis, IList xValues, IList yValues, bool? dataIsSorted, bool? dataIsEvenlySpaced, bool? dataIsDisplayedAs2d, IRange visibleXRange )
            {
                IList<TimeSpan> timeSpanList = xValues as IList<TimeSpan>;
                IList<sbyte> yColumn = yValues as IList<sbyte>;
                if ( !PointResamplerBase.RequiresReduction( resamplingMode, pointRange, viewportWidth ) )
                    return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, isCategoryAxis );
                switch ( resamplingMode )
                {
                    case ResamplingMode.MinMax:
                    case ResamplingMode.Nyquist:
                        return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Mid:
                        return this.ReducePointsMid( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Max:
                        return this.ReducePointsMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Min:
                        return this.ReducePointsMin( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.Cluster2D:
                        return PointResamplerBase.ResampleInClusterMode<TimeSpan, sbyte>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                    case ResamplingMode.MinMaxWithUnevenSpacing:
                        return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, double>( timeSpanList, ( IList<double> ) yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                    case ResamplingMode.Auto:
                        bool? nullable1 = dataIsDisplayedAs2d;
                        bool flag1 = true;
                        if ( nullable1.GetValueOrDefault() == flag1 & nullable1.HasValue )
                            return PointResamplerBase.ResampleInClusterMode<TimeSpan, sbyte>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable2 = dataIsEvenlySpaced;
                        bool flag2 = true;
                        if ( nullable2.GetValueOrDefault() == flag2 & nullable2.HasValue | isCategoryAxis )
                            return this.ReducePointsMinMax( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis );
                        bool? nullable3 = dataIsSorted;
                        bool flag3 = true;
                        if ( nullable3.GetValueOrDefault() == flag3 & nullable3.HasValue )
                            return PointResamplerBase.ReducePointsMinMaxUnevenlySpaced<TimeSpan, sbyte>( timeSpanList, yColumn, pointRange, viewportWidth, isCategoryAxis, visibleXRange );
                        return this.ResampleWithoutReduction( timeSpanList, yColumn, pointRange, false );
                    default:
                        throw new Exception( string.Format( "Resampling Mode {0} has not been handled", ( object ) resamplingMode ) );
                }
            }

            private unsafe IPointSeries ReducePointsMinMax( IList<TimeSpan> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = 2 * viewportWidth;
                int num3 = num1 / num2;
                Point2DSeries point2Dseries = new Point2DSeries(2 * num1 / num3);
                IMath<sbyte> math = GenericMathFactory.New<sbyte>();
                sbyte num4 = math.MaxValue;
                sbyte num5 = math.MinValue;
                int index = min;
                int num6 = num3;
                int val2 = max - num1 % num3;
                UncheckedList<TimeSpan> uncheckedList1 = !isCategoryAxis ? xColumn.ToUncheckedList<TimeSpan>(false) : (UncheckedList<TimeSpan>) null;
                UncheckedList<sbyte> uncheckedList2 = yColumn.ToUncheckedList<sbyte>(true);
                IUltraList<double> xvalues = point2Dseries.XValues;
                IUltraList<double> yvalues = point2Dseries.YValues;
                int num7 = Math.Min(uncheckedList2.Count, val2);
                if ( uncheckedList1 != null )
                {
                    fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1.Array[ min ] )
                    fixed ( sbyte* numPtr1 = &uncheckedList2.Array[ min ] )
                    {
                        TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                        sbyte* numPtr2 = numPtr1;
                        while ( index <= num7 )
                        {
                            sbyte num8 = *numPtr2;
                            if ( ( int ) num4 >= ( int ) num8 )
                                num4 = num8;
                            if ( ( int ) num5 <= ( int ) num8 )
                                num5 = num8;
                            if ( --num6 == 0 )
                            {
                                double num9 = PointResamplerFactory.TimeSpanSByteResampler.TxToDouble(*timeSpanPtr2);
                                xvalues.Add( num9 );
                                xvalues.Add( num9 );
                                yvalues.Add( ( double ) num4 );
                                yvalues.Add( ( double ) num5 );
                                num4 = math.MaxValue;
                                num5 = math.MinValue;
                                num6 = num3;
                            }
                            ++index;
                            ++timeSpanPtr2;
                            ++numPtr2;
                        }
                    }
                }
                else
                {
                    for ( ; index <= num7 ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                        if ( --num6 == 0 )
                        {
                            double num9 = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble(xColumn[index]);
                            xvalues.Add( num9 );
                            xvalues.Add( num9 );
                            yvalues.Add( ( double ) num4 );
                            yvalues.Add( ( double ) num5 );
                            num4 = math.MaxValue;
                            num5 = math.MinValue;
                            num6 = num3;
                        }
                    }
                }
                if ( max != num7 )
                {
                    for ( ; index <= max ; ++index )
                    {
                        sbyte num8 = uncheckedList2[index];
                        if ( ( int ) num4 >= ( int ) num8 )
                            num4 = num8;
                        if ( ( int ) num5 <= ( int ) num8 )
                            num5 = num8;
                    }
                    double num9 = isCategoryAxis ? (double) index : (uncheckedList1 != null ? PointResamplerFactory.TimeSpanSByteResampler.TxToDouble(uncheckedList1[uncheckedList1.Count - 1]) : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble(xColumn[xColumn.Count - 1]));
                    xvalues.Add( num9 );
                    xvalues.Add( num9 );
                    yvalues.Add( ( double ) num4 );
                    yvalues.Add( ( double ) num5 );
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMax( IList<TimeSpan> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y > num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MinValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMin( IList<TimeSpan> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double y = double.MaxValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num3 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num4 = (double) uncheckedList[index];
                    y = y < num4 ? y : num4;
                    if ( ++num3 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, y ) );
                        y = double.MaxValue;
                        num3 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private IPointSeries ReducePointsMid( IList<TimeSpan> xColumn, IList<sbyte> yColumn, IndexRange pointRange, int viewportWidth, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                int num2 = num1 / (2 * viewportWidth);
                Point2DSeries point2Dseries = new Point2DSeries(num1 / num2);
                double num3 = double.MaxValue;
                double num4 = double.MinValue;
                sbyte[] uncheckedList = yColumn.ToUncheckedList<sbyte>();
                int index = min;
                int num5 = 0;
                for ( ; index <= max ; ++index )
                {
                    double num6 = (double) uncheckedList[index];
                    num3 = num3 < num6 ? num3 : num6;
                    num4 = num4 > num6 ? num4 : num6;
                    if ( ++num5 >= num2 )
                    {
                        double x = isCategoryAxis ? (double) index : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble(xColumn[index]);
                        point2Dseries.Add( new Point2D( x, 0.5 * ( num4 + num3 ) ) );
                        num3 = double.MaxValue;
                        num4 = double.MinValue;
                        num5 = 0;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private unsafe IPointSeries ResampleWithoutReduction( IList<TimeSpan> xDoubleColumn, IList<sbyte> yColumn, IndexRange pointRange, bool isCategoryAxis )
            {
                int max = pointRange.Max;
                int min = pointRange.Min;
                int num1 = max - min + 1;
                TimeSpan[] uncheckedList1 = xDoubleColumn.ToUncheckedList<TimeSpan>();
                sbyte[] uncheckedList2 = yColumn.ToUncheckedList<sbyte>();
                Point2DSeries point2Dseries = new Point2DSeries(num1);
                double[] uncheckedList3 = point2Dseries.XValues.ToUncheckedList<double>();
                double[] uncheckedList4 = point2Dseries.YValues.ToUncheckedList<double>();
                point2Dseries.XValues.SetCount( num1 );
                point2Dseries.YValues.SetCount( num1 );
                int index1 = min;
                fixed ( TimeSpan* timeSpanPtr1 = &uncheckedList1[ index1 ] )
                fixed ( sbyte* numPtr1 = &uncheckedList2[ min ] )
                fixed ( double* numPtr2 = &uncheckedList3[ 0 ] )
                fixed ( double* numPtr3 = &uncheckedList4[ 0 ] )
                {
                    TimeSpan* timeSpanPtr2 = timeSpanPtr1;
                    sbyte* numPtr4 = numPtr1;
                    double* numPtr5 = numPtr2;
                    double* numPtr6 = numPtr3;
                    int num2 = min;
                    int num3;
                    if ( num1 > 16 )
                    {
                        for ( int index2 = max - ( max - min ) % 16 ; num2 != index2 ; num2 = num3 + 1 )
                        {
                            *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr2 );
                            *numPtr6 = ( double ) *numPtr4;
                            double* numPtr7 = (double*) ((IntPtr) numPtr5 + 8);
                            TimeSpan* timeSpanPtr3 = timeSpanPtr2 + 1;
                            double* numPtr8 = (double*) ((IntPtr) numPtr6 + 8);
                            sbyte* numPtr9 = numPtr4 + 1;
                            int num4 = num2 + 1;
                            *numPtr7 = isCategoryAxis ? ( double ) num4 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr3 );
                            *numPtr8 = ( double ) *numPtr9;
                            double* numPtr10 = (double*) ((IntPtr) numPtr7 + 8);
                            TimeSpan* timeSpanPtr4 = timeSpanPtr3 + 1;
                            double* numPtr11 = (double*) ((IntPtr) numPtr8 + 8);
                            sbyte* numPtr12 = numPtr9 + 1;
                            int num5 = num4 + 1;
                            *numPtr10 = isCategoryAxis ? ( double ) num5 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr4 );
                            *numPtr11 = ( double ) *numPtr12;
                            double* numPtr13 = (double*) ((IntPtr) numPtr10 + 8);
                            TimeSpan* timeSpanPtr5 = timeSpanPtr4 + 1;
                            double* numPtr14 = (double*) ((IntPtr) numPtr11 + 8);
                            sbyte* numPtr15 = numPtr12 + 1;
                            int num6 = num5 + 1;
                            *numPtr13 = isCategoryAxis ? ( double ) num6 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr5 );
                            *numPtr14 = ( double ) *numPtr15;
                            double* numPtr16 = (double*) ((IntPtr) numPtr13 + 8);
                            TimeSpan* timeSpanPtr6 = timeSpanPtr5 + 1;
                            double* numPtr17 = (double*) ((IntPtr) numPtr14 + 8);
                            sbyte* numPtr18 = numPtr15 + 1;
                            int num7 = num6 + 1;
                            *numPtr16 = isCategoryAxis ? ( double ) num7 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr6 );
                            *numPtr17 = ( double ) *numPtr18;
                            double* numPtr19 = (double*) ((IntPtr) numPtr16 + 8);
                            TimeSpan* timeSpanPtr7 = timeSpanPtr6 + 1;
                            double* numPtr20 = (double*) ((IntPtr) numPtr17 + 8);
                            sbyte* numPtr21 = numPtr18 + 1;
                            int num8 = num7 + 1;
                            *numPtr19 = isCategoryAxis ? ( double ) num8 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr7 );
                            *numPtr20 = ( double ) *numPtr21;
                            double* numPtr22 = (double*) ((IntPtr) numPtr19 + 8);
                            TimeSpan* timeSpanPtr8 = timeSpanPtr7 + 1;
                            double* numPtr23 = (double*) ((IntPtr) numPtr20 + 8);
                            sbyte* numPtr24 = numPtr21 + 1;
                            int num9 = num8 + 1;
                            *numPtr22 = isCategoryAxis ? ( double ) num9 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr8 );
                            *numPtr23 = ( double ) *numPtr24;
                            double* numPtr25 = (double*) ((IntPtr) numPtr22 + 8);
                            TimeSpan* timeSpanPtr9 = timeSpanPtr8 + 1;
                            double* numPtr26 = (double*) ((IntPtr) numPtr23 + 8);
                            sbyte* numPtr27 = numPtr24 + 1;
                            int num10 = num9 + 1;
                            *numPtr25 = isCategoryAxis ? ( double ) num10 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr9 );
                            *numPtr26 = ( double ) *numPtr27;
                            double* numPtr28 = (double*) ((IntPtr) numPtr25 + 8);
                            TimeSpan* timeSpanPtr10 = timeSpanPtr9 + 1;
                            double* numPtr29 = (double*) ((IntPtr) numPtr26 + 8);
                            sbyte* numPtr30 = numPtr27 + 1;
                            int num11 = num10 + 1;
                            *numPtr28 = isCategoryAxis ? ( double ) num11 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr10 );
                            *numPtr29 = ( double ) *numPtr30;
                            double* numPtr31 = (double*) ((IntPtr) numPtr28 + 8);
                            TimeSpan* timeSpanPtr11 = timeSpanPtr10 + 1;
                            double* numPtr32 = (double*) ((IntPtr) numPtr29 + 8);
                            sbyte* numPtr33 = numPtr30 + 1;
                            int num12 = num11 + 1;
                            *numPtr31 = isCategoryAxis ? ( double ) num12 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr11 );
                            *numPtr32 = ( double ) *numPtr33;
                            double* numPtr34 = (double*) ((IntPtr) numPtr31 + 8);
                            TimeSpan* timeSpanPtr12 = timeSpanPtr11 + 1;
                            double* numPtr35 = (double*) ((IntPtr) numPtr32 + 8);
                            sbyte* numPtr36 = numPtr33 + 1;
                            int num13 = num12 + 1;
                            *numPtr34 = isCategoryAxis ? ( double ) num13 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr12 );
                            *numPtr35 = ( double ) *numPtr36;
                            double* numPtr37 = (double*) ((IntPtr) numPtr34 + 8);
                            TimeSpan* timeSpanPtr13 = timeSpanPtr12 + 1;
                            double* numPtr38 = (double*) ((IntPtr) numPtr35 + 8);
                            sbyte* numPtr39 = numPtr36 + 1;
                            int num14 = num13 + 1;
                            *numPtr37 = isCategoryAxis ? ( double ) num14 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr13 );
                            *numPtr38 = ( double ) *numPtr39;
                            double* numPtr40 = (double*) ((IntPtr) numPtr37 + 8);
                            TimeSpan* timeSpanPtr14 = timeSpanPtr13 + 1;
                            double* numPtr41 = (double*) ((IntPtr) numPtr38 + 8);
                            sbyte* numPtr42 = numPtr39 + 1;
                            int num15 = num14 + 1;
                            *numPtr40 = isCategoryAxis ? ( double ) num15 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr14 );
                            *numPtr41 = ( double ) *numPtr42;
                            double* numPtr43 = (double*) ((IntPtr) numPtr40 + 8);
                            TimeSpan* timeSpanPtr15 = timeSpanPtr14 + 1;
                            double* numPtr44 = (double*) ((IntPtr) numPtr41 + 8);
                            sbyte* numPtr45 = numPtr42 + 1;
                            int num16 = num15 + 1;
                            *numPtr43 = isCategoryAxis ? ( double ) num16 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr15 );
                            *numPtr44 = ( double ) *numPtr45;
                            double* numPtr46 = (double*) ((IntPtr) numPtr43 + 8);
                            TimeSpan* timeSpanPtr16 = timeSpanPtr15 + 1;
                            double* numPtr47 = (double*) ((IntPtr) numPtr44 + 8);
                            sbyte* numPtr48 = numPtr45 + 1;
                            int num17 = num16 + 1;
                            *numPtr46 = isCategoryAxis ? ( double ) num17 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr16 );
                            *numPtr47 = ( double ) *numPtr48;
                            double* numPtr49 = (double*) ((IntPtr) numPtr46 + 8);
                            TimeSpan* timeSpanPtr17 = timeSpanPtr16 + 1;
                            double* numPtr50 = (double*) ((IntPtr) numPtr47 + 8);
                            sbyte* numPtr51 = numPtr48 + 1;
                            num3 = num17 + 1;
                            *numPtr49 = isCategoryAxis ? ( double ) num3 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr17 );
                            *numPtr50 = ( double ) *numPtr51;
                            numPtr5 = ( double* ) ( ( IntPtr ) numPtr49 + 8 );
                            timeSpanPtr2 = timeSpanPtr17 + 1;
                            numPtr6 = ( double* ) ( ( IntPtr ) numPtr50 + 8 );
                            numPtr4 = numPtr51 + 1;
                        }
                    }
                    for ( ; num2 <= max ; ++num2 )
                    {
                        *numPtr5 = isCategoryAxis ? ( double ) num2 : PointResamplerFactory.TimeSpanSByteResampler.TxToDouble( *timeSpanPtr2 );
                        *numPtr6 = ( double ) *numPtr4;
                        numPtr5 += 8;
                        ++timeSpanPtr2;
                        numPtr6 += 8;
                        ++numPtr4;
                    }
                }
                point2Dseries.Freeze();
                return ( IPointSeries ) point2Dseries;
            }

            private static double TxToDouble( TimeSpan xValue )
            {
                return ( double ) xValue.Ticks;
            }
        }
    }
}
