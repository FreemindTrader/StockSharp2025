<local:ChartElementEditor
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:dx="clr-namespace:DevExpress.Xpf.Core;assembly=DevExpress.Xpf.Core.v22.1"
    xmlns:dxpg="clr-namespace:DevExpress.Xpf.PropertyGrid;assembly=DevExpress.Xpf.PropertyGrid.v22.1"
    xmlns:l11="clr-namespace:DevExpress.Xpf.Bars.Themes;assembly=DevExpress.Xpf.Core.v22.1"
    xmlns:l1i="clr-namespace:DevExpress.Xpf.Utils.Themes;assembly=DevExpress.Xpf.Core.v22.1"
    xmlns:local="clr-namespace:StockSharp.Xaml.Charting"
    xmlns:li1111lil="clr-namespace:DevExpress.Xpf.Core.Native;assembly=DevExpress.Xpf.Core.v22.1"
    xmlns:li1i="clr-namespace:DevExpress.Xpf.Editors;assembly=DevExpress.Xpf.Core.v22.1"
    xmlns:loc="clr-namespace:StockSharp.Xaml;assembly=StockSharp.Xaml"
    xmlns:sx="http://schemas.stocksharp.com/xaml">
    <FrameworkElement.Resources>
        <Style x:Key="BtnStyle" TargetType="{x:Type li1i:CheckEdit}">
            <Setter Property="Control.Template">
                <Setter.Value>
                    <ControlTemplate TargetType="{x:Type li1i:CheckEdit}">
                        <Image Source="{loc:ThemedIcons Key=Settings}">
                            <dx:WpfSvgPalette.Palette>
                                <li1111lil:ThemeResource ThemeKey="{l11:BarSvgPaletteThemeKey ResourceKey=SvgPaletteInMenu}" />
                            </dx:WpfSvgPalette.Palette>
                        </Image>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
        <Style TargetType="{x:Type dxpg:RowControl}">
            <Setter Property="dxpg:RowControlBase.ExpandButtonWidth" Value="5" />
        </Style>
    </FrameworkElement.Resources>
    <StackPanel>
        <li1i:CheckEdit
            x:Name="ButtonShowPopup"
            Width="12"
            Height="12"
            Margin="0,2,0,0"
            Style="{StaticResource BtnStyle}" />
        <Popup
            MaxHeight="500"
            AllowsTransparency="True"
            Focusable="True"
            HorizontalOffset="0"
            IsOpen="{Binding Path=IsChecked, ElementName=ButtonShowPopup, Mode=TwoWay}"
            Placement="Bottom"
            PlacementTarget="{Binding ElementName=ButtonShowPopup}"
            PopupAnimation="Fade"
            StaysOpen="false"
            VerticalOffset="0">
            <Border BorderThickness="1" Padding="2">
                <sx:PropertyGridEx
                    Width="330"
                    MinHeight="300"
                    MaxHeight="600"
                    SelectedObject="{Binding}"
                    ShowCategories="{Binding CategoriesMode, FallbackValue={x:Static dxpg:CategoriesShowMode.Visible}}"
                    ShowDescriptionIn="ToolTip"
                    ShowMenuButtonInRows="False"
                    ShowSearchBox="False"
                    ShowToolPanel="False"
                    ValueColumnWidth="100" />
            </Border>
        </Popup>
    </StackPanel>
</local:ChartElementEditor>